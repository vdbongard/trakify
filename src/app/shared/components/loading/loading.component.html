@if (showErrorTemplate() ? loadingState() !== state.ERROR : true) {
  @if (isLoadingDelayed() === false || !showLoading()) {
    <ng-content />
  } @else {
    <ng-container *ngTemplateOutlet="customLoading() ?? loading" />
  }
} @else {
  <ng-container *ngTemplateOutlet="customError() ?? error" />
}

<ng-template #loading>
  <t-spinner />
</ng-template>
<ng-template #error>
  <p class="mat-body-large">An error occurred.</p>
</ng-template>
