<t-loading [loadingState]="pageState">
  <t-episode-header
    *ngIf="params$ | async as params"
    [breadcrumbParts]="breadcrumbParts"
    [episode]="episode$ | async"
    [tmdbEpisode]="tmdbEpisode$ | async"
    [episodeProgress]="episodeProgress$ | async"
    [episodeNumber]="params.episode"
    [seasonNumber]="params.season"
    [showSlug]="params.show"
    [episodes]="seasonEpisodes$ | async"
  />

  <t-loading [loadingState]="episodeState">
    <t-episode
      [isLoggedIn]="authService.isLoggedIn$ | async"
      [show]="show$ | async"
      [episode]="episode$ | async"
      [episodeProgress]="episodeProgress$ | async"
      [isNewShow]="(showProgress$ | async) === undefined"
      [tmdbEpisode]="tmdbEpisode$ | async"
      [isSeenLoading]="(seenState | async) === state.LOADING"
      (addEpisode)="executeService.addEpisode($event.episode, $event.show, seenState)"
      (removeEpisode)="executeService.removeEpisode($event.episode, $event.show, seenState)"
      (showImage)="showImage($event.url, $event.name)"
    />
  </t-loading>
</t-loading>
