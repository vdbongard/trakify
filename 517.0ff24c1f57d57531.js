"use strict";(self.webpackChunktrakify=self.webpackChunktrakify||[]).push([[517],{1517:(Ao,_e,r)=>{r.r(_e),r.d(_e,{default:()=>Eo});var Z=r(5861),O=r(1135),g=r(2722),$=r(1850),m=r(975),b=r(858),Q=r(5606),u=r(3261),B=r(8424),ot=r(2578),d=r(6895),A=r(4859),Y=r(4754),H=r(8255),D=r(7392),t=r(4650),q=r(6592),y=r(9841),T=r(4004),ie=r(8930),ne=r(6321),j=r(5507),ge=r(251),V=r(2042);class X{constructor(n,e,i,s){this.showService=n,this.tmdbService=e,this.configService=i,this.episodeService=s}getShowsFilteredAndSorted$(){return(0,y.a)([this.showService.getShowsWatched$(),this.showService.showsProgress.$,this.episodeService.getEpisodes$(),this.showService.showsHidden.$,this.showService.favorites.$,this.configService.config.$,this.tmdbService.getTmdbShows$(),this.tmdbService.tmdbSeasons.$]).pipe((0,T.U)(([n,e,i,s,a,c,h,_])=>{if(!n.length)return[];const f=[];return n.forEach(l=>{const v=e[l.show.ids.trakt],N=l.show.ids.tmdb?h[l.show.ids.tmdb]:void 0,C=v?.next_episode?i[(0,ne.d)(l.show.ids.trakt,v.next_episode.season,v.next_episode.number)]:void 0;if((0,ie.Ll)(c,l.show,v,N,s))return;const p=v?.next_episode&&_[(0,ne.u)(l.show.ids.tmdb,v.next_episode.season)];f.push({showWatched:l,show:l.show,showProgress:v,tmdbShow:N,tmdbSeason:p,nextEpisode:C,isFavorite:this.showService.isFavorite(l.show,a),isHidden:this.showService.isHidden(l.show)})}),(0,ie.TD)(c,f,i),f}))}static#t=this.\u0275fac=function(e){return new(e||X)(t.LFG(q.X),t.LFG(j.U),t.LFG(ge.E),t.LFG(V.n))};static#e=this.\u0275prov=t.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"})}var oe=r(5381),J=r(7009),st=r(6578),tt=r(9450),at=r(629);function Ge(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3).show,a=t.oxw();return t.KtG(a.dialogService.manageLists(s.ids.trakt))}),t._uU(1," Manage lists "),t.qZA()}}function Ue(o,n){if(1&o&&(t.ynx(0),t.YNc(1,Ge,2,0,"button",7),t.BQk()),2&o){const e=n.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function ze(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2),a=s.isFavorite,c=s.show,h=t.oxw();return t.KtG(a?h.showService.removeFavorite(c):h.showService.addFavorite(c))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2).isFavorite;t.xp6(1),t.hij(" ",e?"Remove favorite":"Add favorite"," ")}}function qe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2),a=s.isHidden,c=s.show,h=t.oxw();return t.KtG(a?h.executeService.removeShowHidden(c):h.executeService.addShowHidden(c))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2).isHidden;t.xp6(1),t.hij(" ",e?"Unhide show":"Hide show"," ")}}function je(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.YNc(1,Ue,2,1,"ng-container",5),t.ALo(2,"async"),t.TgZ(3,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().show,a=t.oxw();return t.KtG(a.executeService.addShow(s,{showConfirm:!0}))}),t._uU(4," Mark as seen "),t.qZA(),t.YNc(5,ze,2,1,"button",7),t.YNc(6,qe,2,1,"button",7),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().show,a=t.oxw();return t.KtG(a.executeService.removeShow(s))}),t._uU(8,"Remove show"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(),i=e.isFavorite,s=e.isHidden,a=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,a.listService.lists.$)),t.xp6(4),t.Q6J("ngIf",void 0!==i),t.xp6(1),t.Q6J("ngIf",void 0!==s)}}function We(o,n){1&o&&t.YNc(0,je,9,5,"ng-container",5),2&o&&t.Q6J("ngIf",n.show)}const Ke=function(){return{}};class vt extends $.X{constructor(n,e,i,s,a,c,h,_,f,l,v){super(),this.showService=n,this.infoService=e,this.tmdbService=i,this.dialogService=s,this.snackBar=a,this.listService=c,this.executeService=h,this.activatedRoute=_,this.router=f,this.authService=l,this.cdr=v,this.pageState=new O.X(m.Gu.LOADING),this.paths=u}ngOnInit(){var e,n=this;this.activatedRoute.data.pipe((0,g.R)(this.destroy$)).subscribe(({showInfos:e})=>{this.cdr.markForCheck(),this.showsInfos=e}),this.infoService.getShowsFilteredAndSorted$().pipe((0,g.R)(this.destroy$)).subscribe({next:(e=(0,Z.Z)(function*(i){n.cdr.markForCheck(),n.pageState.next(m.Gu.SUCCESS),n.showsInfos=i,console.debug("showsInfos",n.showsInfos)}),function(s){return e.apply(this,arguments)}),error:e=>(0,Q.q)(e,this.snackBar,this.pageState)})}static#t=this.\u0275fac=function(e){return new(e||vt)(t.Y36(q.X),t.Y36(X),t.Y36(j.U),t.Y36(oe.x),t.Y36(J.ux),t.Y36(st.X),t.Y36(tt.V),t.Y36(b.gz),t.Y36(b.F0),t.Y36(at.e),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:vt,selectors:[["t-shows-page"]],standalone:!0,features:[t.qOj,t.jDz],decls:10,vars:15,consts:[[3,"loadingState"],[3,"isLoggedIn","showsInfos","withEpisode","withEpisodesCount","withProgressbar","menu","back","addFavorite","removeFavorite"],["mat-fab","","color","primary","aria-label","Add show to watchlist",1,"fab",3,"routerLink"],["menu","matMenu"],["matMenuContent",""],[4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0)(1,"t-shows",1),t.NdJ("addFavorite",function(a){return i.showService.addFavorite(a)})("removeFavorite",function(a){return i.showService.removeFavorite(a)}),t.ALo(2,"async"),t.qZA()(),t.TgZ(3,"a",2),t.ALo(4,"ngGenericPipe"),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()(),t.TgZ(7,"mat-menu",null,3),t.YNc(9,We,1,1,"ng-template",4),t.qZA()),2&e){const s=t.MAs(8);t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(2,9,i.authService.isLoggedIn$))("showsInfos",i.showsInfos)("withEpisode",!0)("withEpisodesCount",!0)("withProgressbar",!0)("menu",s)("back",i.router.url),t.xp6(2),t.Q6J("routerLink",t.xi3(4,11,t.DdM(14,Ke),i.paths.addShow))}},dependencies:[d.O5,B.N,ot.j,d.Ov,A.ot,A.EX,b.rH,Y.r,Y.a,H.Tx,H.VK,H.OP,H.KA,D.Ps,D.Hw],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"],changeDetection:0})}var ct=r(7579),fe=r(3151),I=r(3900),S=r(9646),se=r(6451),rt=r(262);function ve(o=0){return new Promise(n=>{window.setTimeout(()=>{n()},o)})}var M=r(5022),E=r(4006),R=r(9549),wt=r(4144),F=r(1281),x=r(3238),dt=r(2687),Ve=r(5698),bt=r(8675),P=r(9521),we=r(445);function Xe(o,n){1&o&&(t.TgZ(0,"span",8),t.Hsn(1,1),t.qZA())}function ti(o,n){1&o&&(t.TgZ(0,"span",9),t.Hsn(1,2),t.qZA())}const ei=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],ii=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"],ae=["*"],ye=new t.OlP("mat-chips-default-options"),Se=new t.OlP("MatChipAvatar"),Ce=new t.OlP("MatChipTrailingIcon"),Ie=new t.OlP("MatChipRemove"),xt=new t.OlP("MatChip");class _i{}const gi=(0,x.sb)(_i,-1);let et=(()=>{class o extends gi{constructor(e,i){super(),this._elementRef=e,this._parentChip=i,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this._allowFocusWhenDisabled=!1,"BUTTON"===e.nativeElement.nodeName&&e.nativeElement.setAttribute("type","button")}get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=(0,F.Ig)(e)}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===P.K5||e.keyCode===P.L_)&&!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(xt))},o.\u0275dir=t.lG2({type:o,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(e,i){1&e&&t.NdJ("click",function(a){return i._handleClick(a)})("keydown",function(a){return i._handleKeydown(a)}),2&e&&(t.uIk("tabindex",i._getTabindex())("disabled",i._getDisabledAttribute())("aria-disabled",i.disabled),t.ekj("mdc-evolution-chip__action--primary",i._isPrimary)("mdc-evolution-chip__action--presentational",i._isPrimary)("mdc-evolution-chip__action--trailing",!i._isPrimary))},inputs:{disabled:"disabled",tabIndex:"tabIndex",isInteractive:"isInteractive",_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},features:[t.qOj]}),o})(),bi=0;const xi=(0,x.sb)((0,x.pj)((0,x.Kr)((0,x.Id)(class{constructor(o){this._elementRef=o}})),"primary"),-1);let W=(()=>{class o extends xi{constructor(e,i,s,a,c,h,_,f){super(i),this._changeDetectorRef=e,this._ngZone=s,this._focusMonitor=a,this._globalRippleOptions=_,this._isRippleCentered=!1,this._onFocus=new ct.x,this._onBlur=new ct.x,this.role=null,this._hasFocusInternal=!1,this.id="mat-mdc-chip-"+bi++,this.ariaLabel=null,this._removable=!0,this._highlighted=!1,this.removed=new t.vpe,this.destroyed=new t.vpe,this.basicChipAttrName="mat-basic-chip";const l=i.nativeElement;this._document=c,this._animationsDisabled="NoopAnimations"===h,this._isBasicChip=l.hasAttribute(this.basicChipAttrName)||l.tagName.toLowerCase()===this.basicChipAttrName,null!=f&&(this.tabIndex=parseInt(f)??this.defaultTabIndex),this._monitorFocus()}_hasFocus(){return this._hasFocusInternal}get value(){return void 0!==this._value?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get removable(){return this._removable}set removable(e){this._removable=(0,F.Ig)(e)}get highlighted(){return this._highlighted}set highlighted(e){this._highlighted=(0,F.Ig)(e)}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!(!this.trailingIcon&&!this.removeIcon)}_handleKeydown(e){(e.keyCode===P.ZH||e.keyCode===P.yY)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(i=>{const s=i._elementRef.nativeElement;return s===e||s.contains(e)})}_getActions(){const e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const i=null!==e;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):this._ngZone.onStable.pipe((0,Ve.q)(1)).subscribe(()=>this._ngZone.run(()=>this._onBlur.next({chip:this}))))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(dt.tE),t.Y36(d.K0),t.Y36(t.QbO,8),t.Y36(x.Y2,8),t.$8M("tabindex"))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-basic-chip"],["mat-chip"]],contentQueries:function(e,i,s){if(1&e&&(t.Suo(s,Se,5),t.Suo(s,Ce,5),t.Suo(s,Ie,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.leadingIcon=a.first),t.iGM(a=t.CRH())&&(i.trailingIcon=a.first),t.iGM(a=t.CRH())&&(i.removeIcon=a.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(x.wG,5),t.Gf(et,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.ripple=s.first),t.iGM(s=t.CRH())&&(i.primaryAction=s.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:30,hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(a){return i._handleKeydown(a)}),2&e&&(t.Ikx("id",i.id),t.uIk("role",i.role)("tabindex",i.role?i.tabIndex:null)("aria-label",i.ariaLabel),t.ekj("mdc-evolution-chip",!i._isBasicChip)("mdc-evolution-chip--disabled",i.disabled)("mdc-evolution-chip--with-trailing-action",i._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",i.leadingIcon)("mdc-evolution-chip--with-primary-icon",i.leadingIcon)("mdc-evolution-chip--with-avatar",i.leadingIcon)("mat-mdc-chip-with-avatar",i.leadingIcon)("mat-mdc-chip-highlighted",i.highlighted)("mat-mdc-chip-disabled",i.disabled)("mat-mdc-basic-chip",i._isBasicChip)("mat-mdc-standard-chip",!i._isBasicChip)("mat-mdc-chip-with-trailing-icon",i._hasTrailingIcon())("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",id:"id",ariaLabel:["aria-label","ariaLabel"],value:"value",removable:"removable",highlighted:"highlighted"},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[t._Bn([{provide:xt,useExisting:o}]),t.qOj],ngContentSelectors:ii,decls:9,vars:6,consts:[["matRipple","",1,"mat-mdc-chip-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],["class","mdc-evolution-chip__graphic mat-mdc-chip-graphic",4,"ngIf"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],["class","mdc-evolution-chip__cell mdc-evolution-chip__cell--trailing",4,"ngIf"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(e,i){1&e&&(t.F$t(ei),t._UZ(0,"span",0)(1,"span",1),t.TgZ(2,"span",2)(3,"div",3),t.YNc(4,Xe,2,0,"span",4),t.TgZ(5,"span",5),t.Hsn(6),t._UZ(7,"span",6),t.qZA()()(),t.YNc(8,ti,2,0,"span",7)),2&e&&(t.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i._isRippleCentered)("matRippleTrigger",i._elementRef.nativeElement),t.xp6(3),t.Q6J("isInteractive",!1),t.xp6(1),t.Q6J("ngIf",i.leadingIcon),t.xp6(4),t.Q6J("ngIf",i._hasTrailingIcon()))},dependencies:[d.O5,x.wG,et],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{overflow-x:hidden}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mdc-evolution-chip__action--primary:before{box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1}.mdc-evolution-chip--touch{margin-top:8px;margin-bottom:8px}.mdc-evolution-chip__action-touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-evolution-chip__text-label{white-space:nowrap;user-select:none;text-overflow:ellipsis;overflow:hidden}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mdc-evolution-chip__checkmark-background{opacity:0}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__graphic{transition:width 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark{transition:opacity 50ms 0ms linear,transform 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-50%, -50%)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@keyframes mdc-evolution-chip-enter{from{transform:scale(0.8);opacity:.4}to{transform:scale(1);opacity:1}}.mdc-evolution-chip--enter{animation:mdc-evolution-chip-enter 100ms 0ms cubic-bezier(0, 0, 0.2, 1)}@keyframes mdc-evolution-chip-exit{from{opacity:1}to{opacity:0}}.mdc-evolution-chip--exit{animation:mdc-evolution-chip-exit 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-evolution-chip--hidden{opacity:0;pointer-events:none;transition:width 150ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-standard-chip .mdc-evolution-chip__checkmark{height:20px;width:20px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:24px}.mdc-evolution-chip--with-avatar .mdc-evolution-chip__graphic{height:24px;width:24px;font-size:24px}.mdc-evolution-chip--with-avatar .mdc-evolution-chip__icon--primary{height:24px;width:24px;font-size:24px}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px);height:var(--mdc-chip-container-height, 32px)}.mat-mdc-standard-chip .mdc-evolution-chip__ripple{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius, 14px 14px 14px 14px)}.mat-mdc-standard-chip.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:var(--mdc-chip-with-avatar-avatar-size, 28px)}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{height:var(--mdc-chip-with-avatar-avatar-size, 28px);width:var(--mdc-chip-with-avatar-avatar-size, 28px);font-size:var(--mdc-chip-with-avatar-avatar-size, 28px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-outline-width, 1px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-outline-width, 1px)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-selected-outline-width, 0)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--selected) .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-unselected-outline-width, 1px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color, transparent)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color, currentColor)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{height:var(--mdc-chip-with-icon-icon-size, 18px);width:var(--mdc-chip-with-icon-icon-size, 18px);font-size:var(--mdc-chip-with-icon-icon-size, 18px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, currentColor)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, currentColor)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-mdc-standard-chip .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:.4}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary{width:100%}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{opacity:.04}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{opacity:.12}.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative}.mat-mdc-chip-action-label{text-align:left}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-chip-remove{opacity:.54}.mat-mdc-chip-remove:focus{opacity:1}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px) * -1);left:8px;right:8px}.mat-mdc-chip-remove .mat-icon{width:inherit;height:inherit;font-size:inherit;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),o})();class yi{constructor(n){}}const Si=(0,x.sb)(yi);let St=(()=>{class o extends Si{constructor(e,i,s){super(e),this._elementRef=e,this._changeDetectorRef=i,this._dir=s,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new ct.x,this._defaultRole="presentation",this._disabled=!1,this._explicitRole=null,this._chipActions=new t.n_E}get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,F.Ig)(e),this._syncChipsState()}get empty(){return 0===this._chips.length}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(e=>{e.disabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){const e=this.tabIndex;-1!==this.tabIndex&&(this.tabIndex=-1,setTimeout(()=>{this.tabIndex=e,this._changeDetectorRef.markForCheck()}))}_getChipStream(e){return this._chips.changes.pipe((0,bt.O)(null),(0,I.w)(()=>(0,se.T)(...this._chips.map(e))))}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList&&i.classList.contains("mdc-evolution-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe((0,bt.O)(this._chips)).subscribe(e=>{const i=[];e.forEach(s=>s._getActions().forEach(a=>i.push(a))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new dt.Em(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe((0,g.R)(this._destroyed)).subscribe(({chip:e})=>{const i=e._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe((0,g.R)(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe((0,bt.O)(null),(0,g.R)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe((0,g.R)(this._destroyed)).subscribe(e=>{const s=this._chips.toArray().indexOf(e.chip);this._isValidIndex(s)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=s)})}_redirectDestroyedChipFocus(){if(null!=this._lastDestroyedFocusedChipIndex){if(this._chips.length){const e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[e];i.disabled?1===this._chips.length?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(we.Is,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-chip-set"]],contentQueries:function(e,i,s){if(1&e&&t.Suo(s,W,5),2&e){let a;t.iGM(a=t.CRH())&&(i._chips=a)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(a){return i._handleKeydown(a)}),2&e&&t.uIk("role",i.role)},inputs:{disabled:"disabled",role:"role"},features:[t.qOj],ngContentSelectors:ae,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"span",0),t.Hsn(1),t.qZA())},styles:[".mdc-evolution-chip-set{display:flex}.mdc-evolution-chip-set:focus{outline:none}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mdc-evolution-chip-set--overflow .mdc-evolution-chip-set__chips{flex-flow:nowrap}.mdc-evolution-chip-set .mdc-evolution-chip-set__chips{margin-left:-8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip-set__chips,.mdc-evolution-chip-set .mdc-evolution-chip-set__chips[dir=rtl]{margin-left:0;margin-right:-8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-left:8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip,.mdc-evolution-chip-set .mdc-evolution-chip[dir=rtl]{margin-left:0;margin-right:8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-top:4px;margin-bottom:4px}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0}),o})(),Pi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[x.rD,{provide:ye,useValue:{separatorKeyCodes:[P.K5]}}],imports:[x.BQ,d.ez,x.si,x.BQ]}),o})();function Li(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.changeShowsSelection(a))}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit,i=t.oxw(2);t.Q6J("highlighted",e.slug===i.activeSlug),t.xp6(1),t.hij(" ",e.name," ")}}function Oi(o,n){if(1&o&&(t.TgZ(0,"mat-chip-set",7),t.YNc(1,Li,2,2,"mat-chip",8),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chips)}}class ht extends $.X{constructor(n,e,i,s,a,c,h,_,f,l){super(),this.showService=n,this.tmdbService=e,this.router=i,this.route=s,this.listService=a,this.snackBar=c,this.executeService=h,this.authService=_,this.cdr=f,this.episodeService=l,this.pageState=new O.X(m.Gu.LOADING),this.searchValue=null,this.chips=[{name:"Trending",slug:"trending",fetch:this.showService.fetchTrendingShows().pipe((0,T.U)(v=>v.map(N=>N.show)))},{name:"Popular",slug:"popular",fetch:this.showService.fetchPopularShows()},{name:"Recommended",slug:"recommended",fetch:this.showService.fetchRecommendedShows().pipe((0,T.U)(v=>v.map(N=>N.show)))},{name:"Upcoming",slug:"upcoming",fetch:this.episodeService.fetchCalendarAll().pipe((0,T.U)(v=>v.map(N=>N.show)))}],this.defaultSlug="trending",this.activeSlug="trending",this.nextShows$=new ct.x}ngOnInit(){var n=this;return(0,Z.Z)(function*(){n.route.queryParams.pipe((0,T.U)(e=>Fi.parse(e)),(0,g.R)(n.destroy$)).subscribe(function(){var e=(0,Z.Z)(function*(i){n.cdr.markForCheck(),n.searchValue=i.q??null,n.activeSlug=i.slug??n.defaultSlug,n.searchValue?yield n.searchForShow(n.searchValue):yield n.getShowInfos(n.chips.find(s=>s.slug===n.activeSlug)?.fetch)});return function(i){return e.apply(this,arguments)}}())})()}ngOnDestroy(){super.ngOnDestroy(),this.nextShows$.complete()}searchForShow(n){var e=this;return(0,Z.Z)(function*(){const i=e.showService.fetchSearchForShows(n).pipe((0,T.U)(s=>s.map(a=>a.show)));yield e.getShowInfos(i)})()}getShowInfos(n){var e=this;return(0,Z.Z)(function*(){if(!n)return;e.nextShows$.next(),e.pageState.next(m.Gu.LOADING),e.showsInfos=void 0,yield ve();const i=n.pipe((0,fe.d)());i.pipe((0,I.w)(s=>(0,y.a)([e.showService.showsProgress.$,e.showService.getShowsWatched$(),e.listService.watchlist.$,(0,S.of)(s)])),(0,T.U)(([s,a,c,h])=>{e.showsInfos=e.showsInfos?e.showsInfos.map(_=>e.getShowInfo(_,s,a,c,void 0)):h.map(_=>e.getShowInfo(void 0,s,a,c,_)),console.debug("showsInfos",e.showsInfos),e.pageState.next(m.Gu.SUCCESS)}),(0,g.R)(e.nextShows$),(0,g.R)(e.destroy$)).subscribe({next:()=>e.cdr.markForCheck(),error:s=>(0,Q.q)(s,e.snackBar,e.pageState)}),i.pipe((0,I.w)(s=>(0,se.T)(...s.map(a=>e.tmdbService.getTmdbShow$(a,!1,{fetch:!0}).pipe((0,rt.K)(()=>(0,S.of)(void 0)))))),(0,T.U)(s=>{!s||!e.showsInfos||(e.showsInfos=e.showsInfos.map(a=>a.show?null===a.show.ids.tmdb?{...a,tmdbShow:null}:a.show.ids.tmdb!==s.id?a:{...a,tmdbShow:s}:a))}),(0,g.R)(e.nextShows$),(0,g.R)(e.destroy$)).subscribe({next:()=>e.cdr.markForCheck(),error:s=>(0,Q.q)(s,e.snackBar,e.pageState)})})()}getShowInfo(n,e,i,s,a){const c=a??n?.show;return{...n,show:c,showProgress:c&&e[c.ids.trakt],showWatched:i.find(h=>h.show.ids.trakt===c?.ids.trakt),isWatchlist:!!s?.find(h=>h.show.ids.trakt===c?.ids.trakt)}}searchSubmitted(n){var e=this;return(0,Z.Z)(function*(){const i=n.target?.querySelector('input[type="search"]')?.value;yield e.router.navigate([],{queryParamsHandling:"merge",queryParams:i?{q:i}:void 0})})()}changeShowsSelection(n){var e=this;return(0,Z.Z)(function*(){yield e.router.navigate([],{queryParamsHandling:"merge",queryParams:{slug:n.slug}})})()}static#t=this.\u0275fac=function(e){return new(e||ht)(t.Y36(q.X),t.Y36(j.U),t.Y36(b.F0),t.Y36(b.gz),t.Y36(st.X),t.Y36(J.ux),t.Y36(tt.V),t.Y36(at.e),t.Y36(t.sBO),t.Y36(V.n))};static#e=this.\u0275cmp=t.Xpm({type:ht,selectors:[["t-add-show"]],standalone:!0,features:[t.qOj,t.jDz],decls:10,vars:11,consts:[[1,"search-form",3,"ngSubmit"],["appearance","fill","color","accent",1,"form-field"],["matInput","","type","search","enterkeyhint","search","name","search","data-test-id","add-show-search",3,"value","keyup.enter"],["searchInput",""],["aria-label","Show selection","class","show-selection",4,"ngIf"],[3,"loadingState"],[3,"isLoggedIn","showsInfos","withYear","withEpisodesCount","withAddButtons","back","add","remove"],["aria-label","Show selection",1,"show-selection"],["color","accent",3,"highlighted","click",4,"ngFor","ngForOf"],["color","accent",3,"highlighted","click"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(c){return i.searchSubmitted(c)}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search shows..."),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("keyup.enter",function(){t.CHM(s);const c=t.MAs(5);return t.KtG(c.blur())}),t.qZA()()(),t.YNc(6,Oi,2,1,"mat-chip-set",4),t.TgZ(7,"t-loading",5)(8,"t-shows",6),t.NdJ("add",function(c){return i.executeService.addToWatchlist(c)})("remove",function(c){return i.executeService.removeFromWatchlist(c)}),t.ALo(9,"async"),t.qZA()()}2&e&&(t.xp6(4),t.Q6J("value",i.searchValue),t.xp6(2),t.Q6J("ngIf",!i.searchValue),t.xp6(1),t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(9,9,i.authService.isLoggedIn$))("showsInfos",i.showsInfos)("withYear",!0)("withEpisodesCount",!0)("withAddButtons",!0)("back",i.router.url))},dependencies:[d.O5,d.sg,d.Ov,E.u5,E._Y,E.JL,E.F,R.lN,R.KE,R.hX,wt.c,wt.Nt,Pi,W,St,B.N,ot.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}.search-form[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]{width:100%}.show-selection[_ngcontent-%COMP%]{margin-top:-1.34375rem;margin-bottom:.75rem;display:inline-block}"],changeDetection:0})}const Fi=M.z.object({q:M.z.string().optional(),slug:M.z.string().optional()}),Ni=["searchInput"];class Ct extends $.X{constructor(n,e,i,s,a,c){super(),this.showService=n,this.tmdbService=e,this.router=i,this.route=s,this.snackBar=a,this.cdr=c,this.pageState=new O.X(m.Gu.LOADING)}ngOnInit(){var e,n=this;this.tmdbService.getTmdbShows$().pipe((0,g.R)(this.destroy$)).subscribe(e=>{this.cdr.markForCheck(),this.tmdbShows=e}),this.route.queryParams.pipe((0,T.U)(e=>Yi.parse(e)),(0,g.R)(this.destroy$)).subscribe({next:(e=(0,Z.Z)(function*(i){n.cdr.markForCheck(),n.showsInfos=void 0,n.searchValue=i.q,n.search(n.searchValue),n.pageState.next(m.Gu.SUCCESS),n.searchValue||n.searchInput?.focus?.()}),function(s){return e.apply(this,arguments)}),error:e=>(0,Q.q)(e,this.snackBar,this.pageState)})}search(n){var i,e=this;!n||(this.showsInfos=void 0,this.showService.searchForAddedShows$(n).subscribe({next:(i=(0,Z.Z)(function*(s){e.cdr.markForCheck(),s.forEach(a=>{e.showsInfos||(e.showsInfos=[]),e.showsInfos.push({show:a,tmdbShow:a.ids.tmdb?e.tmdbShows?.[a.ids.tmdb]:void 0})}),console.debug("showsInfos",e.showsInfos),e.pageState.next(m.Gu.SUCCESS)}),function(a){return i.apply(this,arguments)}),error:i=>(0,Q.q)(i,this.snackBar,this.pageState)}))}searchByNavigating(){var n=this;return(0,Z.Z)(function*(){yield n.router.navigate([],{queryParams:{q:n.searchValue??null},replaceUrl:!0})})()}static#t=this.\u0275fac=function(e){return new(e||Ct)(t.Y36(q.X),t.Y36(j.U),t.Y36(b.F0),t.Y36(b.gz),t.Y36(J.ux),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:Ct,selectors:[["t-search"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ni,5),2&e){let s;t.iGM(s=t.CRH())&&(i.searchInput=s.first)}},standalone:!0,features:[t.qOj,t.jDz],decls:8,vars:5,consts:[[1,"search-form"],["appearance","fill","color","accent",1,"form-field"],["matInput","","type","search","enterkeyhint","search","name","searchValue","cdkTrapFocus","","autocomplete","off","data-test-id","search",3,"ngModel","cdkTrapFocusAutoCapture","ngModelChange","keyup.enter"],["searchInput",""],[3,"loadingState"],[3,"showsInfos","back"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search added shows..."),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("ngModelChange",function(c){return i.searchValue=c})("keyup.enter",function(){t.CHM(s);const c=t.MAs(5);return t.KtG(c.blur())})("ngModelChange",function(){return i.searchByNavigating()}),t.qZA()()(),t.TgZ(6,"t-loading",4),t._UZ(7,"t-shows",5),t.qZA()}2&e&&(t.xp6(4),t.Q6J("ngModel",i.searchValue)("cdkTrapFocusAutoCapture",!0),t.xp6(2),t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("back",i.router.url))},dependencies:[R.lN,R.KE,R.hX,wt.c,wt.Nt,E.u5,E._Y,E.Fj,E.JJ,E.JL,E.On,E.F,dt.rt,dt.mK,B.N,ot.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}.search-form[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}const Yi=M.z.object({q:M.z.string().optional()});var Di=r(101);class It extends $.X{constructor(n,e,i,s,a,c){super(),this.episodeService=n,this.snackBar=e,this.listService=i,this.configService=s,this.router=a,this.cdr=c,this.pageState=new O.X(m.Gu.LOADING),this.showsInfosAll=new O.X(void 0)}ngOnInit(){this.episodeService.getUpcomingEpisodeInfos$(198).pipe((0,g.R)(this.destroy$)).subscribe({next:n=>{this.cdr.markForCheck();let e=this.showsInfosAll.value;e||(e=[]),e.push(...n),this.showsInfosAll.next(e),this.pageState.next(m.Gu.SUCCESS)},error:n=>(0,Q.q)(n,this.snackBar,this.pageState)}),(0,y.a)([this.configService.config.$,this.listService.getWatchlistItems$(),this.showsInfosAll]).subscribe(([n,e,i])=>{if(!i)return;const s=i?.filter(a=>{if(!a.show)return!0;const c=this.listService.isWatchlistItem(e,a.show),h=!!n.upcomingFilters.find(l=>!(l.name!==m.ZR.WATCHLIST_ITEM||!l.value)&&("hide"===l.category?c:!c)),_=0===a.nextEpisode?.season,f=!!n.upcomingFilters.find(l=>!(l.name!==m.ZR.SPECIALS||!l.value)&&("hide"===l.category?_:!_));return!(h||f)});(0,Di.Q)(s,this.showsInfos)||(this.cdr.markForCheck(),this.showsInfos=s,console.debug("showsInfos",this.showsInfos))})}static#t=this.\u0275fac=function(e){return new(e||It)(t.Y36(V.n),t.Y36(J.ux),t.Y36(st.X),t.Y36(ge.E),t.Y36(b.F0),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:It,selectors:[["t-upcoming"]],standalone:!0,features:[t.qOj,t.jDz],decls:2,vars:6,consts:[[3,"loadingState"],[3,"showsInfos","withEpisode","withLinkToEpisode","withRelativeDate","back"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t._UZ(1,"t-shows",1),t.qZA()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("withEpisode",!0)("withLinkToEpisode",!0)("withRelativeDate",!0)("back",i.router.url))},dependencies:[B.N,ot.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"],changeDetection:0})}function Bi(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().show,a=t.oxw();return t.KtG(a.executeService.removeFromWatchlist(s))}),t._uU(2," Remove from watchlist "),t.qZA(),t.BQk()}}function Ji(o,n){1&o&&t.YNc(0,Bi,3,0,"ng-container",5),2&o&&t.Q6J("ngIf",n.show)}const $i=function(){return{}};class kt extends $.X{constructor(n,e,i,s,a,c,h){super(),this.tmdbService=n,this.listService=e,this.snackBar=i,this.episodeService=s,this.executeService=a,this.router=c,this.cdr=h,this.pageState=new O.X(m.Gu.LOADING),this.paths=u}ngOnInit(){var e,n=this;(0,y.a)([this.listService.getWatchlistItems$(),this.tmdbService.getTmdbShows$(),this.episodeService.getEpisodes$()]).pipe((0,g.R)(this.destroy$)).subscribe({next:(e=(0,Z.Z)(function*([i,s,a]){const c=i.map(h=>({show:h.show,tmdbShow:h.show.ids.tmdb?s[h.show.ids.tmdb]:void 0,isWatchlist:!0,nextEpisode:a[(0,ne.d)(h.show.ids.trakt,1,1)]}));(0,ie.TD)({sort:{by:m.PE.OLDEST_EPISODE},sortOptions:[{}]},c,a),n.cdr.markForCheck(),n.showsInfos=c,console.debug("showsInfos",n.showsInfos),n.pageState.next(m.Gu.SUCCESS)}),function(s){return e.apply(this,arguments)}),error:e=>(0,Q.q)(e,this.snackBar,this.pageState)})}static#t=this.\u0275fac=function(e){return new(e||kt)(t.Y36(j.U),t.Y36(st.X),t.Y36(J.ux),t.Y36(V.n),t.Y36(tt.V),t.Y36(b.F0),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:kt,selectors:[["t-watchlist"]],standalone:!0,features:[t.qOj,t.jDz],decls:9,vars:11,consts:[[3,"loadingState"],[3,"showsInfos","withEpisodesCount","withEpisode","menu","back"],["mat-fab","","color","primary","aria-label","Add show to watchlist",1,"fab",3,"routerLink"],["menu","matMenu"],["matMenuContent",""],[4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0),t._UZ(1,"t-shows",1),t.qZA(),t.TgZ(2,"a",2),t.ALo(3,"ngGenericPipe"),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()(),t.TgZ(6,"mat-menu",null,3),t.YNc(8,Ji,1,1,"ng-template",4),t.qZA()),2&e){const s=t.MAs(7);t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("withEpisodesCount",!0)("withEpisode",!0)("menu",s)("back",i.router.url),t.xp6(1),t.Q6J("routerLink",t.xi3(3,7,t.DdM(10,$i),i.paths.addShow))}},dependencies:[d.O5,H.Tx,H.VK,H.OP,H.KA,B.N,ot.j,A.ot,A.EX,b.rH,Y.r,Y.a,D.Ps,D.Hw],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"],changeDetection:0})}var Tt=r(8505),Qi=r(9300),Ae=r(4128),pt=r(136),k=r(4880);class Et{transform(n){if(!n)return"...";let e=n.status;return n.networks?.[0]&&(e+=" \xb7 "+n.networks[0].name),e}static#t=this.\u0275fac=function(e){return new(e||Et)};static#e=this.\u0275pipe=t.Yjl({name:"showSubheading",type:Et,pure:!0,standalone:!0})}class At{transform(n){return function Hi(o){if(!o.videos)return;const n=[...o.videos.results];return[...o.videos.results].reverse().find(s=>"YouTube"===s.site&&"Trailer"===s.type)||n.find(s=>"YouTube"===s.site&&"Teaser"===s.type)}(n)}static#t=this.\u0275fac=function(e){return new(e||At)};static#e=this.\u0275pipe=t.Yjl({name:"getTrailer",type:At,pure:!0,standalone:!0})}class it{transform(n){return void 0!==n&&(null===n||new Date(n)>new Date)}static#t=this.\u0275fac=function(e){return new(e||it)};static#e=this.\u0275pipe=t.Yjl({name:"isInFuture",type:it,pure:!0,standalone:!0})}function Ri(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"img",11),t.NdJ("load",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.posterLoaded=!0)})("click",function(){const a=t.CHM(e).ngIf,c=t.oxw(2);return t.KtG(c.showImageFunction(a))})("keyup",function(){const a=t.CHM(e).ngIf,c=t.oxw(2);return t.KtG(c.showImageFunction(a))}),t.qZA()}if(2&o){const e=n.ngIf,i=t.oxw(2);let s;t.Q6J("src",i.posterPrefixW185+e,t.LSH)("alt",i.tmdbShow||i.show?(null!==(s=null==i.tmdbShow?null:i.tmdbShow.name)&&void 0!==s?s:null==i.show?null:i.show.title)+" Poster":"Poster")}}function Gi(o,n){if(1&o&&(t.ynx(0),t.YNc(1,Ri,1,2,"img",10),t.BQk()),2&o){const e=t.oxw(),i=t.MAs(4);let s;t.xp6(1),t.Q6J("ngIf",e.posterPrefixW185&&(e.showWatched&&null!==(s=null==e.tmdbSeason?null:e.tmdbSeason.poster_path)&&void 0!==s?s:null==e.tmdbShow?null:e.tmdbShow.poster_path))("ngIfElse",i)}}function Ui(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"img",12),t.NdJ("load",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.posterLoaded=!0)}),t.qZA()}}function zi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isFavorite?s.removeFavorite.emit(s.show):s.addFavorite.emit(s.show))}),t.TgZ(1,"mat-icon",14),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw();t.ekj("remove",!e.isFavorite),t.xp6(2),t.hij(" ",e.isFavorite?"star":"star_outline"," ")}}function qi(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.qZA(),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(2),t.Oqu(e)}}function ji(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.ALo(3,"slice"),t.ALo(4,"slice"),t.qZA(),t.TgZ(5,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isMoreOverviewShown=!s.isMoreOverviewShown)}),t._uU(6),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().ngIf,i=t.oxw();t.xp6(2),t.hij(" ",i.isMoreOverviewShown?e:(i.isSmall?t.Dn7(3,2,e,0,i.maxSmallOverviewLength):t.Dn7(4,6,e,0,i.maxLargeOverviewLength))+"..."," "),t.xp6(4),t.hij(" ",i.isMoreOverviewShown?"less":"more"," ")}}function Wi(o,n){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,qi,3,1,"ng-container",2),t.YNc(2,ji,7,10,"ng-container",2),t.qZA()),2&o){const e=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.isSmall?e.length<i.maxSmallOverviewLength:e.length<i.maxLargeOverviewLength),t.xp6(1),t.Q6J("ngIf",i.isSmall?e.length>=i.maxSmallOverviewLength:e.length>=i.maxLargeOverviewLength)}}function Ki(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const a=t.CHM(e).ngIf,c=t.oxw(2);return t.KtG(c.showTrailer.emit(a))}),t._uU(1," Trailer "),t.qZA()}}function Vi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.addShow.emit(s.show))}),t._uU(1," Mark show as seen "),t.qZA()}}function Xi(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.YNc(1,Vi,2,0,"button",18),t.ALo(2,"isInFuture"),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isWatchlist?s.removeFromWatchlist.emit(s.show):s.addToWatchlist.emit(s.show))}),t._uU(4),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.nextEpisode&&!t.lcZ(2,2,e.nextEpisode.first_aired)),t.xp6(3),t.hij(" ",e.isWatchlist?"Remove from watchlist":"Add to watchlist"," ")}}function tn(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,Ki,2,0,"button",18),t.ALo(2,"getTrailer"),t.YNc(3,Xi,5,4,"ng-container",2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.tmdbShow)),t.xp6(2),t.Q6J("ngIf",e.isLoggedIn&&e.isNewShow)}}class Zt{constructor(){this.addFavorite=new t.vpe,this.removeFavorite=new t.vpe,this.addToWatchlist=new t.vpe,this.removeFromWatchlist=new t.vpe,this.addShow=new t.vpe,this.showTrailer=new t.vpe,this.showImage=new t.vpe,this.posterLoaded=!1,this.isMoreOverviewShown=!1,this.maxSmallOverviewLength=96,this.maxLargeOverviewLength=504,this.posterPrefixW185=pt.m0,this.posterPrefixOriginal=pt.YY}showImageFunction(n){this.showImage.emit({url:this.posterPrefixOriginal+n,name:this.tmdbShow||this.show?(this.tmdbShow?.name??this.show?.title)+" Poster":"Poster"})}static#t=this.\u0275fac=function(e){return new(e||Zt)};static#e=this.\u0275cmp=t.Xpm({type:Zt,selectors:[["t-show-header"]],inputs:{isLoggedIn:"isLoggedIn",tmdbSeason:"tmdbSeason",showWatched:"showWatched",tmdbShow:"tmdbShow",nextEpisode:"nextEpisode",show:"show",isFavorite:"isFavorite",isSmall:"isSmall",isNewShow:"isNewShow",isWatchlist:"isWatchlist"},outputs:{addFavorite:"addFavorite",removeFavorite:"removeFavorite",addToWatchlist:"addToWatchlist",removeFromWatchlist:"removeFromWatchlist",addShow:"addShow",showTrailer:"showTrailer",showImage:"showImage"},standalone:!0,features:[t.jDz],decls:15,vars:8,consts:[[1,"header"],[1,"poster-wrapper"],[4,"ngIf"],["imgFallback",""],[1,"right"],[1,"mat-body-2","small-text"],[1,"title-wrapper"],[1,"mat-headline-5","title"],["mat-icon-button","","aria-label","Favorite","class","favorite-button",3,"remove","click",4,"ngIf"],["class","button-container",4,"ngIf"],["width","185","height","278","fetchpriority","high","data-test-id","poster-image",3,"src","alt","load","click","keyup",4,"ngIf","ngIfElse"],["width","185","height","278","fetchpriority","high","data-test-id","poster-image",3,"src","alt","load","click","keyup"],["ngSrc","assets/poster.png","width","154","height","231","priority","","alt","Poster",3,"load"],["mat-icon-button","","aria-label","Favorite",1,"favorite-button",3,"click"],[1,"favorite-icon"],[1,"mat-body","overview"],["mat-button","",3,"click"],[1,"button-container"],["class","button","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"button",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Gi,2,2,"ng-container",2),t.YNc(3,Ui,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"div",4)(6,"h4",5),t._uU(7),t.ALo(8,"showSubheading"),t.qZA(),t.TgZ(9,"div",6)(10,"h1",7),t._uU(11),t.qZA(),t.YNc(12,zi,3,3,"button",8),t.qZA(),t.YNc(13,Wi,3,2,"div",2),t.YNc(14,tn,4,4,"div",9),t.qZA()()),2&e){let s;t.xp6(2),t.Q6J("ngIf",i.posterPrefixW185&&(i.showWatched?null!==(null!==(s=i.tmdbSeason)&&void 0!==s?s:i.tmdbShow):null!==i.tmdbShow)),t.xp6(5),t.Oqu(t.lcZ(8,6,i.tmdbShow)),t.xp6(4),t.Oqu(null==i.tmdbShow?null:i.tmdbShow.name),t.xp6(1),t.Q6J("ngIf",i.tmdbShow&&i.showWatched),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow?null:i.tmdbShow.overview),t.xp6(1),t.Q6J("ngIf",i.show&&i.tmdbShow)}},dependencies:[d.O5,d.Zd,Et,D.Ps,D.Hw,A.ot,A.lW,A.RK,d.OU,At,it],styles:[".header[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 1fr;gap:1rem}@media (min-width: 576px){.header[_ngcontent-%COMP%]{grid-template-columns:13rem 1fr;gap:3rem}}.poster-wrapper[_ngcontent-%COMP%]{aspect-ratio:2/3;border-radius:var(--border-radius);overflow:hidden;display:flex;place-items:center}.right[_ngcontent-%COMP%]{overflow:hidden}.small-text[_ngcontent-%COMP%]{color:var(--text-color-2);margin-bottom:.5rem;margin-top:0}@media (min-width: 576px){.small-text[_ngcontent-%COMP%]{margin-bottom:1rem}}.title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;margin-bottom:.67em;--icon-size: 1.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]{font-size:2rem;--icon-size: 1.5rem}}.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0;margin-right:.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:.5rem}}.title-wrapper[_ngcontent-%COMP%]   .favorite-button[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);padding:0}.title-wrapper[_ngcontent-%COMP%]   .favorite-button.remove[_ngcontent-%COMP%]{display:none}.title-wrapper[_ngcontent-%COMP%]:hover   .favorite-button.remove[_ngcontent-%COMP%]{display:flex}.title-wrapper[_ngcontent-%COMP%]   .favorite-icon[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);line-height:var(--icon-size)}.overview[_ngcontent-%COMP%]{margin-bottom:.25rem}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1rem}"],changeDetection:0})}var Ze=r(1629);function en(o,n){if(1&o&&t._UZ(0,"img",8),2&o){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("ngSrc",i.posterPrefix+e.profile_path)("alt",e.name)}}function nn(o,n){if(1&o&&t._UZ(0,"img",9),2&o){const e=t.oxw().$implicit;t.Q6J("alt",e.name)}}function on(o,n){if(1&o&&(t.TgZ(0,"div",3),t.YNc(1,en,1,2,"img",4),t.YNc(2,nn,1,1,"ng-template",null,5,t.W1O),t.TgZ(4,"p",6),t._uU(5),t.qZA(),t.TgZ(6,"p",7),t._uU(7),t.qZA()()),2&o){const e=n.$implicit,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.profile_path)("ngIfElse",i),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.roles[0].character)}}class Mt{constructor(){this.posterPrefix=pt.m0}static#t=this.\u0275fac=function(e){return new(e||Mt)};static#e=this.\u0275cmp=t.Xpm({type:Mt,selectors:[["t-show-cast"]],inputs:{cast:"cast"},standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"mat-subtitle-1"],[1,"cast-wrapper"],["class","cast",4,"ngFor","ngForOf"],[1,"cast"],["width","185","height","278","class","cast-profile",3,"ngSrc","alt",4,"ngIf","ngIfElse"],["imgFallback",""],["ticker","",1,"mat-body","cast-name"],["ticker","",1,"mat-body","cast-character"],["width","185","height","278",1,"cast-profile",3,"ngSrc","alt"],["ngSrc","assets/poster.png","width","185","height","278",3,"alt"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Cast"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,on,8,4,"div",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",i.cast))},dependencies:[d.ez,d.sg,d.O5,d.Zd,Ze.d],styles:[".cast-wrapper[_ngcontent-%COMP%]{display:flex;gap:1rem;overflow:auto}.cast-wrapper[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-shrink:0;width:6rem}@media (min-width: 576px){.cast-wrapper[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]{width:11rem}}.cast-wrapper[_ngcontent-%COMP%]   .cast-profile[_ngcontent-%COMP%]{aspect-ratio:2/3;border-radius:var(--border-radius)}.cast-wrapper[_ngcontent-%COMP%]   .cast-name[_ngcontent-%COMP%], .cast-wrapper[_ngcontent-%COMP%]   .cast-character[_ngcontent-%COMP%]{margin:0}.cast-wrapper[_ngcontent-%COMP%]   .cast-name[_ngcontent-%COMP%]{margin-top:.75rem}.cast-wrapper[_ngcontent-%COMP%]   .cast-character[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}class Pt{transform(n){return n.map(e=>e.name).join(", ")}static#t=this.\u0275fac=function(e){return new(e||Pt)};static#e=this.\u0275pipe=t.Yjl({name:"genre",type:Pt,pure:!0,standalone:!0})}class Lt{transform(n){return n.map(e=>e.name).join(", ")}static#t=this.\u0275fac=function(e){return new(e||Lt)};static#e=this.\u0275pipe=t.Yjl({name:"createdBy",type:Lt,pure:!0,standalone:!0})}function sn(o,n){if(1&o&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"genre"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("Genre: ",t.lcZ(2,1,e.tmdbShow.genres),"")}}function an(o,n){if(1&o&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"createdBy"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" Created by: ",t.lcZ(2,1,e.tmdbShow.created_by)," ")}}function cn(o,n){1&o&&(t.ynx(0),t._uU(1," First airing "),t.BQk())}function rn(o,n){1&o&&t._uU(0,"First aired")}function dn(o,n){if(1&o&&(t.TgZ(0,"p",5),t.YNc(1,cn,2,0,"ng-container",2),t.ALo(2,"isInFuture"),t.YNc(3,rn,1,0,"ng-template",null,6,t.W1O),t._uU(5),t.ALo(6,"date"),t.qZA()),2&o){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,i.tmdbShow.first_air_date))("ngIfElse",e),t.xp6(4),t.hij(": ",t.xi3(6,5,i.tmdbShow.first_air_date,"d. MMM. yyyy")," ")}}function hn(o,n){if(1&o&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"number"),t.TgZ(3,"span",7),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" Rating: ",t.xi3(2,2,e.tmdbShow.vote_average,"1.0-1")," "),t.xp6(3),t.hij("(",e.tmdbShow.vote_count," votes)")}}function pn(o,n){if(1&o&&(t.TgZ(0,"p",5),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" Runtime: ",e.tmdbShow.episode_run_time[0]+"min"," ")}}function ln(o,n){if(1&o&&(t.TgZ(0,"p",5),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("Type: ",e.tmdbShow.type,"")}}function mn(o,n){if(1&o&&(t.ynx(0),t.YNc(1,sn,3,3,"p",4),t.YNc(2,an,3,3,"p",4),t.YNc(3,dn,7,8,"p",4),t.YNc(4,hn,5,5,"p",4),t.YNc(5,pn,2,1,"p",4),t.YNc(6,ln,2,1,"p",4),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.tmdbShow.genres.length),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.created_by.length),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.first_air_date),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.vote_count),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.episode_run_time.length),t.xp6(1),t.Q6J("ngIf","Scripted"!==e.tmdbShow.type)}}function un(o,n){1&o&&(t.TgZ(0,"p",5),t._uU(1,"No details available."),t.qZA())}class Ot{constructor(){this.hasDetails=!1}ngOnChanges(n){n.tmdbShow&&(this.hasDetails=Boolean(this.tmdbShow&&(this.tmdbShow.genres.length||this.tmdbShow.created_by.length||this.tmdbShow.first_air_date||this.tmdbShow.vote_count||this.tmdbShow.episode_run_time.length||"Scripted"!==this.tmdbShow.type)))}static#t=this.\u0275fac=function(e){return new(e||Ot)};static#e=this.\u0275cmp=t.Xpm({type:Ot,selectors:[["t-show-details"]],inputs:{tmdbShow:"tmdbShow"},standalone:!0,features:[t.TTD,t.jDz],decls:6,vars:2,consts:[[1,"mat-subtitle-1"],[1,"details"],[4,"ngIf","ngIfElse"],["noDetails",""],["class","mat-body",4,"ngIf"],[1,"mat-body"],["isInPast",""],[1,"votes"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Details"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,mn,7,6,"ng-container",2),t.YNc(4,un,2,0,"ng-template",null,3,t.W1O),t.qZA()),2&e){const s=t.MAs(5);t.xp6(3),t.Q6J("ngIf",i.tmdbShow&&i.hasDetails)("ngIfElse",s)}},dependencies:[d.ez,d.O5,d.JJ,d.uU,Pt,Lt,it],styles:[".details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.5rem}@media (min-width: 576px){.details[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:1rem}}.details[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.votes[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}var ce=r(3322),Me=r(1572);function _n(o,n){1&o&&t.GkF(0)}const Pe=function(o,n,e){return{show:o,season:n,episode:e}},Le=function(o){return{back:o}};function gn(o,n){if(1&o&&(t.TgZ(0,"a",5),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.YNc(3,_n,1,0,"ng-container",6),t.qZA()),2&o){const e=t.oxw(2),i=t.MAs(3);t.Q6J("routerLink",e.show&&e.episode?t.xi3(1,4,t.kEZ(9,Pe,t.lcZ(2,7,e.show),e.episode.season+"",e.episode.number+""),e.paths.episode):null)("state",t.VKq(13,Le,e.back)),t.xp6(3),t.Q6J("ngIf",!1)("ngIfElse",i)}}function fn(o,n){1&o&&t.GkF(0)}function vn(o,n){if(1&o&&(t.TgZ(0,"div",7),t.YNc(1,fn,1,0,"ng-container",6),t.qZA()),2&o){const e=t.oxw(2),i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.withLink)("ngIfElse",i)}}function wn(o,n){if(1&o&&(t.TgZ(0,"span",9),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" \xb7 ",t.xi3(2,1,e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}function bn(o,n){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.ALo(3,"number"),t.YNc(4,wn,3,4,"span",8),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.lnq(" S",t.xi3(2,4,e.episode.season,"2.0-0"),"E",t.xi3(3,7,e.episode.number,"2.0-0")," ",e.episode.title," "),t.xp6(3),t.Q6J("ngIf",e.episode.first_aired)}}function xn(o,n){1&o&&(t.ynx(0),t._uU(1,"\xa0"),t.BQk())}function yn(o,n){1&o&&(t.TgZ(0,"div",13),t._UZ(1,"mat-spinner",14),t.qZA())}function Sn(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",10),t.YNc(2,yn,2,0,"div",11),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.episode?null!=s.episodeProgress&&s.episodeProgress.completed?s.removeEpisode.emit({episode:s.episode,show:s.show}):s.addEpisode.emit({episode:s.episode,show:s.show}):null)}),t.ALo(4,"isInFuture"),t._uU(5),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.isSeenLoading),t.xp6(1),t.Q6J("disabled",e.isSeenLoading||!e.episode||t.lcZ(4,3,e.episode.first_aired)),t.xp6(2),t.hij(" ",null!=e.episodeProgress&&e.episodeProgress.completed?"Mark as unseen":"Mark as seen"," ")}}function Cn(o,n){if(1&o&&(t.ynx(0),t.YNc(1,gn,4,15,"a",2),t.YNc(2,vn,2,2,"div",3),t.TgZ(3,"a",4),t.ALo(4,"ngGenericPipe"),t.ALo(5,"showSlug"),t.YNc(6,bn,5,10,"ng-container",0),t.YNc(7,xn,2,0,"ng-container",0),t.qZA(),t.YNc(8,Sn,6,5,"ng-container",0),t.ALo(9,"isInFuture"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.withLink),t.xp6(1),t.Q6J("ngIf",!e.withLink),t.xp6(1),t.Q6J("routerLink",e.show&&e.episode?t.xi3(4,7,t.kEZ(14,Pe,t.lcZ(5,10,e.show),e.episode.season+"",e.episode.number+""),e.paths.episode):null)("state",t.VKq(18,Le,e.back)),t.xp6(3),t.Q6J("ngIf",e.episode),t.xp6(1),t.Q6J("ngIf",!e.episode),t.xp6(1),t.Q6J("ngIf",e.isLoggedIn&&(!e.isNewShow||e.isNewShow&&!t.lcZ(9,12,null==e.episode?null:e.episode.first_aired)))}}function In(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.qZA(),t.TgZ(3,"p",16),t._uU(4,"Source: TMDB"),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.hij(" ",e.episode.overview||"No episode description."," ")}}function kn(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"img",19),t.NdJ("load",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.stillLoaded=!0)})("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.showImageFunction())})("keyup",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.showImageFunction())}),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("src",e.stillPrefix+(null==e.tmdbEpisode?null:e.tmdbEpisode.still_path),t.LSH)}}function Tn(o,n){if(1&o&&(t.ynx(0),t.YNc(1,kn,1,1,"img",18),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.tmdbEpisode?null:e.tmdbEpisode.still_path)}}function En(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"img",20),t.NdJ("load",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.stillLoaded=!0)}),t.qZA()}}function An(o,n){if(1&o&&(t.YNc(0,Tn,2,1,"ng-container",6),t.YNc(1,En,1,0,"ng-template",null,17,t.W1O)),2&o){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.stillPrefix&&(void 0===i.tmdbEpisode||(null==i.tmdbEpisode?null:i.tmdbEpisode.still_path)))("ngIfElse",e)}}class lt{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.showImage=new t.vpe,this.stillLoaded=!1,this.stillPrefix=pt.YY,this.paths=u,this.back=history.state.back}showImageFunction(){this.withLink||this.showImage.emit({url:this.stillPrefix+this.tmdbEpisode?.still_path,name:"Episode still"})}static#t=this.\u0275fac=function(e){return new(e||lt)};static#e=this.\u0275cmp=t.Xpm({type:lt,selectors:[["t-episode"]],inputs:{isLoggedIn:"isLoggedIn",show:"show",episode:"episode",isNewShow:"isNewShow",episodeProgress:"episodeProgress",tmdbEpisode:"tmdbEpisode",isSeenLoading:"isSeenLoading",withLink:"withLink"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode",showImage:"showImage"},standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[4,"ngIf"],["image",""],["class","still-wrapper",3,"routerLink","state",4,"ngIf"],["class","still-wrapper",4,"ngIf"],[1,"mat-body-2","title",3,"routerLink","state"],[1,"still-wrapper",3,"routerLink","state"],[4,"ngIf","ngIfElse"],[1,"still-wrapper"],["class","subtitle",4,"ngIf"],[1,"subtitle"],[1,"button","button-container"],["class","spinner-container",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"spinner-container"],["diameter","24","color","accent"],[1,"mat-body","description"],[1,"mat-body","source"],["imgFallback",""],["width","1920","height","1080","fetchpriority","high","alt","Episode still","class","still",3,"src","load","click","keyup",4,"ngIf"],["width","1920","height","1080","fetchpriority","high","alt","Episode still",1,"still",3,"src","load","click","keyup"],["ngSrc","assets/still.png","width","800","height","450","priority","","alt","Still",3,"load"]],template:function(e,i){1&e&&(t.YNc(0,Cn,10,20,"ng-container",0),t.YNc(1,In,5,1,"ng-container",0),t.YNc(2,An,3,2,"ng-template",null,1,t.W1O)),2&e&&(t.Q6J("ngIf",null!==i.episode&&i.show),t.xp6(1),t.Q6J("ngIf",i.episode))},dependencies:[d.O5,b.Bz,b.rH,ce.v,Y.r,Y.a,d.uU,d.JJ,it,Me.Cq,Me.Ou,d.Zd,A.ot,A.lW],styles:[".still-wrapper[_ngcontent-%COMP%]{aspect-ratio:16/9;margin-bottom:.5rem;overflow:hidden;display:flex;place-items:center}@media (min-width: 576px){.still-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}}.button[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.button.button-container[_ngcontent-%COMP%]{display:inline-block;position:relative;height:2.25rem}.spinner-container[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1;display:flex;align-items:center;justify-content:center}.source[_ngcontent-%COMP%]{color:var(--text-color-2);font-style:italic;margin-bottom:0}.subtitle[_ngcontent-%COMP%]{color:var(--text-color-2)}.description[_ngcontent-%COMP%]{margin-top:.5rem}"],changeDetection:0})}var re=r(3022);function Zn(o,n){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" \xb7 ",e.tmdbShow.number_of_episodes," episodes ")}}function Mn(o,n){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" \xb7 ",e.showProgress.aired-e.showProgress.completed," remaining ")}}function Pn(o,n){if(1&o&&(t.TgZ(0,"span",7),t.YNc(1,Zn,2,1,"ng-container",2),t.YNc(2,Mn,2,1,"ng-container",2),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.tmdbShow&&(!e.showProgress||0===e.showProgress.completed)),t.xp6(1),t.Q6J("ngIf",e.showProgress&&e.showProgress.completed>0&&e.showProgress.aired-e.showProgress.completed)}}function Ln(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"t-episode",8),t.NdJ("addEpisode",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.addEpisode.emit(s))})("removeEpisode",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.removeEpisode.emit(s))}),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("isLoggedIn",e.isLoggedIn)("show",e.show)("episode",e.nextEpisodeTrakt)("tmdbEpisode",e.nextEpisodeTmdb)("episodeProgress",e.nextEpisodeProgress)("isNewShow",e.isNewShow)("isSeenLoading",e.seenLoading===e.state.LOADING)("withLink",!0)}}function On(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"h2",4),t._uU(2," Next episode "),t.YNc(3,Pn,3,2,"span",5),t.qZA(),t.YNc(4,Ln,1,8,"t-episode",6),t.BQk()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.showProgress||e.tmdbShow),t.xp6(1),t.Q6J("ngIf",e.show&&e.tmdbShow)}}function Fn(o,n){1&o&&(t.TgZ(0,"h3",9),t._uU(1," No next episode. "),t.qZA())}function Nn(o,n){if(1&o&&(t.ynx(0),t.YNc(1,On,5,2,"ng-container",2),t.YNc(2,Fn,2,0,"h3",3),t.ALo(3,"isShowEnded"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null!==e.nextEpisodeTrakt),t.xp6(1),t.Q6J("ngIf",e.showWatched&&null===e.nextEpisodeTrakt&&!t.lcZ(3,2,e.tmdbShow))}}function Yn(o,n){1&o&&(t.TgZ(0,"div",10),t._uU(1,"..."),t.qZA())}class Ft{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.state=m.Gu}static#t=this.\u0275fac=function(e){return new(e||Ft)};static#e=this.\u0275cmp=t.Xpm({type:Ft,selectors:[["t-show-next-episode"]],inputs:{isLoggedIn:"isLoggedIn",isLoading:"isLoading",nextEpisodeTrakt:"nextEpisodeTrakt",nextEpisodeTmdb:"nextEpisodeTmdb",nextEpisodeProgress:"nextEpisodeProgress",showProgress:"showProgress",isNewShow:"isNewShow",tmdbShow:"tmdbShow",show:"show",showWatched:"showWatched",seenLoading:"seenLoading"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode"},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nextEpisodeLoading",""],[4,"ngIf"],["class","mat-subtitle-1",4,"ngIf"],[1,"mat-subtitle-1","next-text"],["class","subtitle",4,"ngIf"],[3,"isLoggedIn","show","episode","tmdbEpisode","episodeProgress","isNewShow","isSeenLoading","withLink","addEpisode","removeEpisode",4,"ngIf"],[1,"subtitle"],[3,"isLoggedIn","show","episode","tmdbEpisode","episodeProgress","isNewShow","isSeenLoading","withLink","addEpisode","removeEpisode"],[1,"mat-subtitle-1"],[1,"loading"]],template:function(e,i){if(1&e&&(t.YNc(0,Nn,4,4,"ng-container",0),t.YNc(1,Yn,2,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",!i.isLoading)("ngIfElse",s)}},dependencies:[d.O5,lt,re.t],styles:[".loading[_ngcontent-%COMP%]{background:var(--background-2);padding:1rem;border-radius:var(--border-radius);opacity:.5}.subtitle[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}var nt=r(4633),Oe=r(1521),Dn=r(953),Bn=r(833);function mt(o){if(!o)throw Error("Empty season title");return"Season 0"===o?"Specials":o}class ut{transform(n){return mt(n)}static#t=this.\u0275fac=function(e){return new(e||ut)};static#e=this.\u0275pipe=t.Yjl({name:"seasonTitle",type:ut,pure:!0,standalone:!0})}var Nt=r(3162);function $n(o,n){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" (",e.seasonProgress.completed,"/",e.episodesAired,") ")}}function Qn(o,n){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" (",e.season.episode_count," episodes) ")}}function Hn(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"seasonTitle"),t.TgZ(4,"span",2),t.YNc(5,$n,2,2,"ng-container",0),t.YNc(6,Qn,2,1,"ng-container",0),t.qZA()(),t._UZ(7,"mat-progress-bar",3),t.BQk()),2&o){const e=t.oxw();let i;t.xp6(2),t.hij(" ",t.lcZ(3,4,"Season "+(null!==(i=null==e.seasonProgress?null:e.seasonProgress.number)&&void 0!==i?i:null==e.season?null:e.season.season_number))," "),t.xp6(3),t.Q6J("ngIf",e.seasonProgress),t.xp6(1),t.Q6J("ngIf",!e.seasonProgress&&e.season),t.xp6(1),t.Q6J("value",e.seasonProgress&&e.episodesAired?e.seasonProgress.completed/e.episodesAired*100:0)}}class Yt{ngOnChanges(n){(n.seasonProgress||n.seasonEpisodes)&&(this.episodesAired=this.seasonProgress?.aired)}getEpisodesAiredCount(n){return n?n.filter(i=>function Jn(o){return(0,Bn.Z)(1,arguments),(0,Dn.Z)(o).getTime()<Date.now()}(new Date(i.first_aired+""))).length:0}static#t=this.\u0275fac=function(e){return new(e||Yt)};static#e=this.\u0275cmp=t.Xpm({type:Yt,selectors:[["t-show-season-item"]],inputs:{seasonProgress:"seasonProgress",seasonsEpisodes:"seasonsEpisodes",season:"season"},standalone:!0,features:[t.TTD,t.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mat-body-2","title"],[1,"episodes-text"],["mode","determinate","color","accent","aria-label","Season episodes watched percentage of all season episodes",3,"value"]],template:function(e,i){1&e&&t.YNc(0,Hn,8,6,"ng-container",0),2&e&&t.Q6J("ngIf",i.seasonProgress||i.season)},dependencies:[ut,d.O5,Nt.Cv,Nt.pW],styles:["[_nghost-%COMP%]{width:100%;height:100%}.title[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:0}@media (min-width: 576px){.title[_ngcontent-%COMP%]{margin-bottom:1rem}}.episodes-text[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}const Fe=function(o,n){return{show:o,season:n}},Ne=function(o){return{back:o}};function Rn(o,n){if(1&o&&(t.TgZ(0,"a",4),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t._UZ(4,"t-show-season-item",5),t.qZA()()),2&o){const e=n.$implicit,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,4,t.WLB(9,Fe,t.lcZ(2,7,i.show),e.number+""),i.paths.season))("state",t.VKq(12,Ne,i.back)),t.xp6(4),t.Q6J("seasonProgress",e)("seasonsEpisodes",i.seasonsEpisodes)}}function Gn(o,n){if(1&o&&(t.TgZ(0,"mat-list",2),t.YNc(1,Rn,5,14,"a",3),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.showProgress.seasons)}}function Un(o,n){if(1&o&&(t.TgZ(0,"a",4),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t._UZ(4,"t-show-season-item",6),t.qZA()()),2&o){const e=n.$implicit,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,3,t.WLB(8,Fe,t.lcZ(2,6,i.show),e.season_number+""),i.paths.season))("state",t.VKq(11,Ne,i.back)),t.xp6(4),t.Q6J("season",e)}}function zn(o,n){if(1&o&&(t.TgZ(0,"mat-list"),t.YNc(1,Un,5,13,"a",3),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tmdbShow.seasons)}}class Dt{constructor(){this.paths=u}static#t=this.\u0275fac=function(e){return new(e||Dt)};static#e=this.\u0275cmp=t.Xpm({type:Dt,selectors:[["t-show-seasons"]],inputs:{show:"show",showProgress:"showProgress",seasonsEpisodes:"seasonsEpisodes",tmdbShow:"tmdbShow",back:"back"},standalone:!0,features:[t.jDz],decls:2,vars:2,consts:[["class","seasons-list",4,"ngIf"],[4,"ngIf"],[1,"seasons-list"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state",4,"ngFor","ngForOf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state"],[3,"seasonProgress","seasonsEpisodes"],[3,"season"]],template:function(e,i){1&e&&(t.YNc(0,Gn,2,1,"mat-list",0),t.YNc(1,zn,2,1,"mat-list",1)),2&e&&(t.Q6J("ngIf",i.showProgress),t.xp6(1),t.Q6J("ngIf",i.tmdbShow&&!i.showProgress))},dependencies:[nt.ie,nt.i$,nt.Tg,d.O5,d.sg,x.si,x.wG,Oe.g,b.rH,Yt,ce.v,Y.r,Y.a],styles:[".seasons-list[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"],changeDetection:0})}function qn(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"Website"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href",null==e.tmdbShow?null:e.tmdbShow.homepage,t.LSH)}}function jn(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"Trakt"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href","https://trakt.tv/shows/"+(null==e.show||null==e.show.ids?null:e.show.ids.slug),t.LSH)}}function Wn(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"TMDB"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href","https://www.themoviedb.org/tv/"+(null==e.show||null==e.show.ids?null:e.show.ids.tmdb),t.LSH)}}function Kn(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"IMDB"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href","https://imdb.com/title/"+(null==e.show||null==e.show.ids?null:e.show.ids.imdb),t.LSH)}}function Vn(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"TVDB"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href","https://www.thetvdb.com/dereferrer/series/"+(null==e.show||null==e.show.ids?null:e.show.ids.tvdb),t.LSH)}}function Xn(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"Twitter"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href","https://www.twitter.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.twitter_id),t.LSH)}}function to(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"Instagram"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href","https://www.instagram.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.instagram_id),t.LSH)}}function eo(o,n){if(1&o&&(t.TgZ(0,"a",3),t._uU(1,"Facebook"),t.qZA()),2&o){const e=t.oxw();t.Q6J("href","https://www.facebook.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.facebook_id),t.LSH)}}class Bt{static#t=this.\u0275fac=function(e){return new(e||Bt)};static#e=this.\u0275cmp=t.Xpm({type:Bt,selectors:[["t-show-links"]],inputs:{show:"show",tmdbShow:"tmdbShow"},standalone:!0,features:[t.jDz],decls:11,vars:8,consts:[[1,"mat-subtitle-1"],[1,"links"],["mat-stroked-button","","target","_blank","rel","noopener norefferer",3,"href",4,"ngIf"],["mat-stroked-button","","target","_blank","rel","noopener norefferer",3,"href"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Links"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,qn,2,1,"a",2),t.YNc(4,jn,2,1,"a",2),t.YNc(5,Wn,2,1,"a",2),t.YNc(6,Kn,2,1,"a",2),t.YNc(7,Vn,2,1,"a",2),t.YNc(8,Xn,2,1,"a",2),t.YNc(9,to,2,1,"a",2),t.YNc(10,eo,2,1,"a",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",null==i.tmdbShow?null:i.tmdbShow.homepage),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.slug),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.tmdb),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.imdb),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.tvdb),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.twitter_id),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.instagram_id),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.facebook_id))},dependencies:[d.ez,d.O5,A.ot,A.zs],styles:[".links[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}"],changeDetection:0})}class Jt{transform(n){return n===m.Gu.ERROR}static#t=this.\u0275fac=function(e){return new(e||Jt)};static#e=this.\u0275pipe=t.Yjl({name:"isError",type:Jt,pure:!0,standalone:!0})}var io=r(2289),de=r(1481),Ye=r(1884);class K{constructor(n){this.snackBar=n}params$(n,e,i){return n.pipe((0,T.U)(s=>e.parse(s)),(0,Ye.x)(),(0,k.J)("params",this.snackBar,i))}static#t=this.\u0275fac=function(e){return new(e||K)(t.LFG(J.ux))};static#e=this.\u0275prov=t.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"})}var he=r(5137);function no(o,n){1&o&&t._UZ(0,"t-show-cast",7),2&o&&t.Q6J("cast",n.ngIf)}function oo(o,n){if(1&o&&(t._UZ(0,"t-show-details",8),t.ALo(1,"async")),2&o){const e=t.oxw();t.Q6J("tmdbShow",t.lcZ(1,1,e.tmdbShow$))}}function so(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"t-show-next-episode",9),t.NdJ("addEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.addToHistory(s.episode,s.show))})("removeEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.executeService.removeEpisode(s.episode,s.show))}),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"isError"),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.ALo(12,"async"),t.ALo(13,"async"),t.qZA()}if(2&o){const e=t.oxw();let i,s,a;t.Q6J("isLoggedIn",t.lcZ(1,11,e.authService.isLoggedIn$))("isLoading",null===t.lcZ(2,13,e.nextEpisode$)&&!t.lcZ(3,15,t.lcZ(4,17,e.pageState)))("nextEpisodeTrakt",null==(i=t.lcZ(5,19,e.nextEpisode$))?null:i[0])("nextEpisodeTmdb",null==(s=t.lcZ(6,21,e.nextEpisode$))?null:s[1])("nextEpisodeProgress",null==(a=t.lcZ(7,23,e.nextEpisode$))?null:a[2])("showProgress",t.lcZ(8,25,e.showProgress$))("isNewShow",void 0===t.lcZ(9,27,e.showProgress$))("tmdbShow",t.lcZ(10,29,e.tmdbShow$))("show",t.lcZ(11,31,e.show$))("showWatched",t.lcZ(12,33,e.showWatched$))("seenLoading",t.lcZ(13,35,e.seenLoading))}}function ao(o,n){if(1&o&&(t._UZ(0,"t-show-seasons",10),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&o){const e=t.oxw();t.Q6J("show",t.lcZ(1,5,e.show$))("showProgress",t.lcZ(2,7,e.showProgress$))("seasonsEpisodes",t.lcZ(3,9,e.seasonEpisodes$))("tmdbShow",t.lcZ(4,11,e.tmdbShow$))("back",e.back)}}function co(o,n){if(1&o&&(t._UZ(0,"t-show-links",11),t.ALo(1,"async"),t.ALo(2,"async")),2&o){const e=t.oxw();t.Q6J("show",t.lcZ(1,2,e.show$))("tmdbShow",t.lcZ(2,4,e.tmdbShow$))}}class $t extends $.X{constructor(n,e,i,s,a,c,h,_,f,l,v,N,C){super(),this.route=n,this.showService=e,this.tmdbService=i,this.episodeService=s,this.snackBar=a,this.executeService=c,this.observer=h,this.title=_,this.paramService=f,this.seasonService=l,this.listService=v,this.authService=N,this.dialogService=C,this.pageState=new O.X(m.Gu.LOADING),this.seenLoading=new O.X(m.Gu.SUCCESS),this.back=history.state.back,this.isSmall$=this.observer.observe([`(max-width: ${pt.SM})`]).pipe((0,T.U)(p=>p.matches)),this.params$=this.paramService.params$(this.route.params,ro,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState).pipe((0,Tt.b)(p=>{this.title.setTitle(`${p.title} - Trakify`),this.pageState.next(m.Gu.SUCCESS)}),(0,fe.d)()),this.isWatchlist$=(0,y.a)([this.show$,this.listService.watchlist.$]).pipe((0,T.U)(([p,w])=>!!w?.find(L=>L.show.ids.trakt===p.ids.trakt)),(0,k.J)("isWatchlist",this.snackBar,this.pageState)),this.showWatched$=this.show$.pipe((0,I.w)(p=>this.showService.getShowWatched$(p)),(0,k.J)("showWatched",this.snackBar,this.pageState)),this.showProgress$=this.show$.pipe((0,I.w)(p=>this.showService.getShowProgress$(p)),(0,T.U)(p=>{if(p)return{...p,seasons:[...p.seasons].reverse()}}),(0,k.J)("showProgress",this.snackBar,this.pageState)),this.tmdbShow$=this.show$.pipe((0,I.w)(p=>this.tmdbService.getTmdbShow$(p,!0,{fetchAlways:!0})),(0,T.U)(p=>{if(!p)return;const w={...p,seasons:[...p.seasons]},L=w.seasons.findIndex(ee=>0===ee.season_number);return L>=0&&w.seasons.push(w.seasons.splice(L,1)[0]),w}),(0,k.J)("tmdbShow",this.snackBar,this.pageState,"An error occurred while fetching the tmdb show")),this.isFavorite$=(0,y.a)([this.show$,this.showService.favorites.$]).pipe((0,T.U)(([p,w])=>!!w?.includes(p.ids.trakt)),(0,k.J)("isFavorite",this.snackBar,this.pageState)),this.nextEpisode$=(0,y.a)([this.tmdbShow$,this.showProgress$,this.showWatched$,this.show$]).pipe((0,I.w)(([p,w,L,ee])=>{const Re=(0,re.D)(p),z=w&&null!==w?.next_episode?w?.next_episode?.season:(Re||null===w?.next_episode)&&L?null:1,ft=w&&null!==w?.next_episode?w?.next_episode?.number:(Re||null===w?.next_episode)&&L?null:1,me=void 0!==z&&void 0!==ft&&null!==z&&null!==ft;return(0,y.a)([me?this.episodeService.getEpisode$(ee,z,ft,{sync:!0,fetchAlways:!0}).pipe((0,rt.K)(()=>(0,S.of)(void 0))):(0,S.of)(z),me?this.tmdbService.getTmdbEpisode$(ee,z,ft,{sync:!0,fetchAlways:!0}).pipe((0,rt.K)(()=>(0,S.of)(void 0))):(0,S.of)(z),me?(0,S.of)(w?.seasons.find(ue=>ue.number===z)?.episodes?.find(ue=>ue.number===ft)).pipe((0,rt.K)(()=>(0,S.of)(void 0))):(0,S.of)(z)])}),(0,k.J)("nextEpisode",this.snackBar,this.pageState)),this.tmdbSeason$=(0,y.a)([this.show$,this.nextEpisode$]).pipe((0,I.w)(([p,w])=>{const L=w[0];return L?this.tmdbService.getTmdbSeason$(p,L.season,!0,!0):(0,S.of)(void 0)}),(0,k.J)("tmdbSeason",this.snackBar,this.pageState)),this.seasonEpisodes$=(0,y.a)([this.show$,this.tmdbShow$]).pipe((0,Qi.h)(p=>!(0,re.D)(p[1])),(0,I.w)(([p,w])=>w?(0,Ae.D)([...w.seasons.map(L=>(0,Ae.D)([(0,S.of)(L.season_number),this.seasonService.getSeasonEpisodes$(p,L.season_number)]).pipe((0,rt.K)(()=>(0,S.of)([L.season_number,[]]))))]):(0,S.of)([])),(0,T.U)(p=>Object.fromEntries(p)),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState))}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0)}addToHistory(n,e){var i=this;return(0,Z.Z)(function*(){if(!n)throw Error("Episode is empty (addToHistory)");try{yield i.executeService.addEpisode(n,e)}catch(s){(0,Q.q)(s,i.snackBar,i.seenLoading)}})()}static#t=this.\u0275fac=function(e){return new(e||$t)(t.Y36(b.gz),t.Y36(q.X),t.Y36(j.U),t.Y36(V.n),t.Y36(J.ux),t.Y36(tt.V),t.Y36(io.Yg),t.Y36(de.Dx),t.Y36(K),t.Y36(he.t),t.Y36(st.X),t.Y36(at.e),t.Y36(oe.x))};static#e=this.\u0275cmp=t.Xpm({type:$t,selectors:[["t-show"]],standalone:!0,features:[t.qOj,t.jDz],decls:23,vars:48,consts:[[1,"container",3,"loadingState"],[3,"isLoggedIn","tmdbSeason","showWatched","tmdbShow","show","nextEpisode","isFavorite","isSmall","isNewShow","isWatchlist","addFavorite","removeFavorite","addToWatchlist","removeFromWatchlist","addShow","showTrailer","showImage"],[3,"cast",4,"ngIf"],[3,"tmdbShow",4,"ngIf"],[3,"isLoggedIn","isLoading","nextEpisodeTrakt","nextEpisodeTmdb","nextEpisodeProgress","showProgress","isNewShow","tmdbShow","show","showWatched","seenLoading","addEpisode","removeEpisode",4,"ngIf"],[3,"show","showProgress","seasonsEpisodes","tmdbShow","back",4,"ngIf"],[3,"show","tmdbShow",4,"ngIf"],[3,"cast"],[3,"tmdbShow"],[3,"isLoggedIn","isLoading","nextEpisodeTrakt","nextEpisodeTmdb","nextEpisodeProgress","showProgress","isNewShow","tmdbShow","show","showWatched","seenLoading","addEpisode","removeEpisode"],[3,"show","showProgress","seasonsEpisodes","tmdbShow","back"],[3,"show","tmdbShow"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0)(1,"t-show-header",1),t.NdJ("addFavorite",function(a){return i.showService.addFavorite(a)})("removeFavorite",function(a){return i.showService.removeFavorite(a)})("addToWatchlist",function(a){return i.executeService.addToWatchlist(a)})("removeFromWatchlist",function(a){return i.executeService.removeFromWatchlist(a)})("addShow",function(a){return i.executeService.addShow(a)})("showTrailer",function(a){return i.dialogService.showTrailer(a)})("showImage",function(a){return i.dialogService.showImage(a.url,a.name)}),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.qZA(),t.YNc(12,no,1,1,"t-show-cast",2),t.ALo(13,"async"),t.YNc(14,oo,2,3,"t-show-details",3),t.ALo(15,"async"),t.YNc(16,so,14,37,"t-show-next-episode",4),t.ALo(17,"async"),t.YNc(18,ao,5,13,"t-show-seasons",5),t.ALo(19,"async"),t.ALo(20,"async"),t.YNc(21,co,3,6,"t-show-links",6),t.ALo(22,"async"),t.qZA()),2&e){let s,a,c,h,_,f;t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(2,16,i.authService.isLoggedIn$))("tmdbSeason",t.lcZ(3,18,i.tmdbSeason$))("showWatched",t.lcZ(4,20,i.showWatched$))("tmdbShow",t.lcZ(5,22,i.tmdbShow$))("show",t.lcZ(6,24,i.show$))("nextEpisode",null==(s=t.lcZ(7,26,i.nextEpisode$))?null:s[0])("isFavorite",t.lcZ(8,28,i.isFavorite$))("isSmall",t.lcZ(9,30,i.isSmall$))("isNewShow",void 0===t.lcZ(10,32,i.showProgress$))("isWatchlist",t.lcZ(11,34,i.isWatchlist$)),t.xp6(11),t.Q6J("ngIf",null==(a=t.lcZ(13,36,i.tmdbShow$))||null==a.aggregate_credits?null:a.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",null==(c=t.lcZ(15,38,i.tmdbShow$))||null==c.aggregate_credits?null:c.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",null==(h=t.lcZ(17,40,i.tmdbShow$))||null==h.aggregate_credits?null:h.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",(null==(_=t.lcZ(19,42,i.tmdbShow$))||null==_.aggregate_credits?null:_.aggregate_credits.cast)&&t.lcZ(20,44,i.nextEpisode$)),t.xp6(3),t.Q6J("ngIf",null==(f=t.lcZ(22,46,i.tmdbShow$))||null==f.aggregate_credits?null:f.aggregate_credits.cast)}},dependencies:[d.O5,B.N,Zt,Mt,d.Ov,Ot,Ft,Dt,Bt,Jt],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}@media (min-width: 576px){.container[_ngcontent-%COMP%]{gap:3rem}}"],changeDetection:0})}const ro=M.z.object({show:M.z.string()});var G=r(7272);function ho(o,n){1&o&&(t.TgZ(0,"h2",6),t._uU(1,"/"),t.qZA())}const po=function(o){return{back:o}};function lo(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"a",4),t._uU(2),t.qZA(),t.YNc(3,ho,2,0,"h2",5),t.BQk()),2&o){const e=n.$implicit,i=n.index,s=t.oxw(2);t.xp6(1),t.Q6J("routerLink",e.link)("state",t.VKq(5,po,s.back))("tickerIf",0===i),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",i!==s.parts.length-1)}}function mo(o,n){if(1&o&&(t.ynx(0),t.YNc(1,lo,4,7,"ng-container",3),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.parts)}}function uo(o,n){1&o&&(t.TgZ(0,"span",7),t._uU(1,"\xa0"),t.qZA())}class _t{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||_t)};static#e=this.\u0275cmp=t.Xpm({type:_t,selectors:[["t-breadcrumb"]],inputs:{parts:"parts"},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[1,"breadcrumb-wrapper"],[4,"ngIf"],["class","mat-subtitle-1 part",4,"ngIf"],[4,"ngFor","ngForOf"],["ticker","",1,"mat-subtitle-1","part",3,"routerLink","state","tickerIf"],["class","mat-subtitle-1 divider",4,"ngIf"],[1,"mat-subtitle-1","divider"],[1,"mat-subtitle-1","part"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0),t.YNc(1,mo,2,1,"ng-container",1),t.YNc(2,uo,2,0,"span",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.parts),t.xp6(1),t.Q6J("ngIf",!i.parts))},dependencies:[d.O5,d.sg,b.Bz,b.rH,Ze.d],styles:[".breadcrumb-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;white-space:nowrap}.part[_ngcontent-%COMP%]{display:inline-block;margin:0}.divider[_ngcontent-%COMP%]{display:inline-block;margin:0 .5rem;cursor:default}"],changeDetection:0})}function De(o,n,e){return Math.min(Math.max(o,n),e)}class Qt{transform(n,e,i){if(!n.season||!n.show||!i[0])return"";const s=parseInt(n.season);if(isNaN(s))throw Error("Season number not found (EpisodeLinkWithCounterPipe)");const c=De(s+e,i.at(0).number,i.at(-1).number);return(0,u.season)({show:n.show,season:c+""})}static#t=this.\u0275fac=function(e){return new(e||Qt)};static#e=this.\u0275pipe=t.Yjl({name:"seasonLinkWithCounter",type:Qt,pure:!0,standalone:!0})}const Be=function(o,n){return{season:o,show:n}},Je=function(o){return{back:o}};class Ht{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||Ht)};static#e=this.\u0275cmp=t.Xpm({type:Ht,selectors:[["t-season-header"]],inputs:{breadcrumbParts:"breadcrumbParts",seasonNumber:"seasonNumber",showSlug:"showSlug",seasonProgress:"seasonProgress",seasons:"seasons"},standalone:!0,features:[t.jDz],decls:16,vars:29,consts:[[3,"parts"],[1,"title-wrapper"],[1,"left"],[1,"mat-headline-6","title"],[1,"right"],["mat-icon-button","","aria-label","Previous season","data-test-id","previous-button",3,"routerLink","state","disabled"],["mat-icon-button","","aria-label","Next season","data-test-id","next-button",3,"routerLink","state","disabled"],["mode","determinate","color","accent","aria-label","Season episodes watched percentage",1,"progress-bar",3,"value"]],template:function(e,i){if(1&e&&(t._UZ(0,"t-breadcrumb",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.ALo(5,"seasonTitle"),t.qZA()(),t.TgZ(6,"div",4)(7,"a",5),t.ALo(8,"seasonLinkWithCounter"),t.TgZ(9,"mat-icon"),t._uU(10,"navigate_before"),t.qZA()(),t.TgZ(11,"a",6),t.ALo(12,"seasonLinkWithCounter"),t.TgZ(13,"mat-icon"),t._uU(14,"navigate_next"),t.qZA()()()(),t._UZ(15,"mat-progress-bar",7)),2&e){let s;t.Q6J("parts",i.breadcrumbParts),t.xp6(4),t.hij(" ",t.lcZ(5,9,null!==(s=null==i.seasonProgress?null:i.seasonProgress.title)&&void 0!==s?s:"Season "+i.seasonNumber)," "),t.xp6(3),t.Q6J("routerLink",i.seasons?t.Dn7(8,11,t.WLB(19,Be,i.seasonNumber,i.showSlug),-1,i.seasons):null)("state",t.VKq(22,Je,i.back))("disabled",!!i.seasons&&i.seasonNumber===i.seasons[0].number+""),t.xp6(4),t.Q6J("routerLink",i.seasons?t.Dn7(12,15,t.WLB(24,Be,i.seasonNumber,i.showSlug),1,i.seasons):null)("state",t.VKq(27,Je,i.back))("disabled",!!i.seasons&&i.seasonNumber===i.seasons[i.seasons.length-1].number+""),t.xp6(4),t.Q6J("value",i.seasonProgress?i.seasonProgress.completed/i.seasonProgress.aired*100:0)}},dependencies:[_t,A.ot,A.o6,b.rH,ut,Qt,Nt.Cv,Nt.pW,D.Ps,D.Hw],styles:[".title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0}.title-wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex}.progress-bar[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0})}var pe=r(6709);class Rt{transform(n){return new Date(n?.first_aired+"")}static#t=this.\u0275fac=function(e){return new(e||Rt)};static#e=this.\u0275pipe=t.Yjl({name:"airDate",type:Rt,pure:!0,standalone:!0})}class Gt{transform(n,e){return n?.title&&void 0!==n?.number?n.title+" ("+n.number+")":"Episode "+((n?.number??e)+1)}static#t=this.\u0275fac=function(e){return new(e||Gt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeTitleWithIndex",type:Gt,pure:!0,standalone:!0})}function _o(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-checkbox",5),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onClick(s))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("checked",null==e.episodeProgress?null:e.episodeProgress.completed)}}function go(o,n){if(1&o&&(t.TgZ(0,"h3",6),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.episode.first_aired,"d. MMM. yyyy")," ")}}class Ut{constructor(){this.i=0,this.add=new t.vpe,this.remove=new t.vpe,this.currentDate=new Date}onClick(n){n.preventDefault(),n.stopPropagation(),this.checkbox?.checked?this.remove.emit(this.episode):this.add.emit(this.episode)}static#t=this.\u0275fac=function(e){return new(e||Ut)};static#e=this.\u0275cmp=t.Xpm({type:Ut,selectors:[["t-season-episode-item"]],viewQuery:function(e,i){if(1&e&&t.Gf(pe.oG,5),2&e){let s;t.iGM(s=t.CRH())&&(i.checkbox=s.first)}},inputs:{isLoggedIn:"isLoggedIn",i:"i",episodeProgress:"episodeProgress",episode:"episode"},outputs:{add:"add",remove:"remove"},standalone:!0,features:[t.jDz],decls:8,vars:10,consts:[[1,"wrapper"],["class","checkbox",3,"checked","click",4,"ngIf"],[1,"right-wrapper"],[1,"mat-body-2","title"],["class","mat-body-2 subtitle",4,"ngIf"],[1,"checkbox",3,"checked","click"],[1,"mat-body-2","subtitle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,_o,1,1,"mat-checkbox",1),t.TgZ(2,"div",2),t.ALo(3,"airDate"),t.TgZ(4,"h3",3),t._uU(5),t.ALo(6,"episodeTitleWithIndex"),t.qZA(),t.YNc(7,go,3,4,"h3",4),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isLoggedIn),t.xp6(1),t.ekj("not-aired",t.lcZ(3,5,i.episode)>i.currentDate),t.xp6(3),t.hij(" ",t.xi3(6,7,i.episode,i.i)," "),t.xp6(2),t.Q6J("ngIf",i.episode&&i.episode.first_aired))},dependencies:[pe.p9,pe.oG,d.O5,Rt,Gt,d.uU],styles:["[_nghost-%COMP%]{width:100%;height:100%}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.right-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}@media (min-width: 576px){.right-wrapper[_ngcontent-%COMP%]{gap:.5rem}}.title[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.subtitle[_ngcontent-%COMP%], .not-aired[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}class zt{transform(n,e){if(n&&e)return n.find(i=>i.number===e.number)}static#t=this.\u0275fac=function(e){return new(e||zt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeProgress",type:zt,pure:!0,standalone:!0})}function fo(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"t-season-episode-item",5),t.NdJ("add",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.addEpisode.emit({episode:s,show:a.show}))})("remove",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.removeEpisode.emit({episode:s,show:a.show}))}),t.ALo(1,"episodeProgress"),t.qZA()}if(2&o){const e=t.oxw(),i=e.index,s=e.$implicit,a=t.oxw(2);t.Q6J("i",i)("isLoggedIn",a.isLoggedIn)("episodeProgress",t.xi3(1,4,null==a.seasonProgress?null:a.seasonProgress.episodes,s))("episode",s)}}const vo=function(o,n,e){return{show:o,season:n,episode:e}},wo=function(o){return{back:o}};function bo(o,n){if(1&o&&(t.TgZ(0,"a",3),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t.YNc(4,fo,2,7,"t-season-episode-item",4),t.qZA()()),2&o){const e=n.index,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,3,t.kEZ(8,vo,t.lcZ(2,6,i.show),i.seasonNumber,e+1+""),i.paths.episode))("state",t.VKq(12,wo,i.back)),t.xp6(4),t.Q6J("ngIf",i.show)}}function xo(o,n){if(1&o&&(t.TgZ(0,"mat-list"),t.YNc(1,bo,5,14,"a",2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.episodes)}}class qt{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.episodesLoadingState=new O.X(m.Gu.LOADING),this.paths=u,this.back=history.state.back}ngOnChanges(){this.episodes&&this.episodesLoadingState.value===m.Gu.LOADING&&this.episodesLoadingState.next(m.Gu.SUCCESS)}static#t=this.\u0275fac=function(e){return new(e||qt)};static#e=this.\u0275cmp=t.Xpm({type:qt,selectors:[["t-season-episodes"]],inputs:{isLoggedIn:"isLoggedIn",show:"show",seasonNumber:"seasonNumber",seasonProgress:"seasonProgress",episodes:"episodes"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode"},standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:2,consts:[[3,"loadingState"],[4,"ngIf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state",4,"ngFor","ngForOf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state"],[3,"i","isLoggedIn","episodeProgress","episode","add","remove",4,"ngIf"],[3,"i","isLoggedIn","episodeProgress","episode","add","remove"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,xo,2,1,"mat-list",1),t.qZA()),2&e&&(t.Q6J("loadingState",i.episodesLoadingState),t.xp6(1),t.Q6J("ngIf",i.episodes&&i.seasonNumber))},dependencies:[B.N,nt.ie,nt.i$,nt.Tg,d.sg,x.si,x.wG,Oe.g,b.rH,ce.v,Y.r,Y.a,Ut,d.O5,zt],changeDetection:0})}function yo(o,n){if(1&o){const e=t.EpF();t.ynx(0),t._UZ(1,"t-season-header",2),t.ALo(2,"async"),t.ALo(3,"async"),t.TgZ(4,"t-season-episodes",3),t.NdJ("addEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.executeService.addEpisode(s.episode,s.show))})("removeEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.executeService.removeEpisode(s.episode,s.show))}),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.qZA(),t.BQk()}if(2&o){const e=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("breadcrumbParts",i.breadcrumbParts)("seasonProgress",t.lcZ(2,10,i.seasonProgress$))("seasonNumber",e.season)("showSlug",e.show)("seasons",t.lcZ(3,12,i.seasons$)),t.xp6(3),t.Q6J("isLoggedIn",t.lcZ(5,14,i.authService.isLoggedIn$))("episodes",t.lcZ(6,16,i.seasonEpisodes$))("show",t.lcZ(7,18,i.show$))("seasonNumber",e.season)("seasonProgress",t.lcZ(8,20,i.seasonProgress$))}}class jt extends $.X{constructor(n,e,i,s,a,c,h,_,f){super(),this.route=n,this.snackBar=e,this.showService=i,this.seasonService=s,this.executeService=a,this.title=c,this.paramService=h,this.authService=_,this.cdr=f,this.pageState=new O.X(m.Gu.LOADING),this.paths=u,this.params$=this.paramService.params$(this.route.params,So,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState),this.seasonProgress$=(0,y.a)([this.params$,this.show$]).pipe((0,I.w)(([l,v])=>(0,G.z)((0,S.of)(null),this.seasonService.getSeasonProgress$(v,parseInt(l.season)))),(0,Tt.b)(()=>this.pageState.next(m.Gu.SUCCESS)),(0,k.J)("seasonProgress",this.snackBar,this.pageState)),this.seasons$=this.show$.pipe((0,I.w)(l=>(0,G.z)((0,S.of)(null),this.seasonService.fetchSeasons(l))),(0,k.J)("seasons",this.snackBar,this.pageState)),this.seasonEpisodes$=(0,y.a)([this.params$,this.show$]).pipe((0,I.w)(([l,v])=>(0,G.z)((0,S.of)(null),this.seasonService.getSeasonEpisodes$(v,parseInt(l.season)))),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState))}ngOnInit(){var n=this;(0,y.a)([this.params$,this.show$]).pipe((0,g.R)(this.destroy$)).subscribe(([e,i])=>{this.cdr.markForCheck(),this.breadcrumbParts=[{name:i.title,link:u.show({show:e.show})},{name:mt(`Season ${e.season}`),link:u.season({show:e.show,season:e.season})}]}),(0,y.a)([this.seasons$,this.seasonProgress$]).pipe((0,g.R)(this.destroy$)).subscribe(([e,i])=>{if(!i)return;this.cdr.markForCheck();const s=e?.find(a=>a.number===i.number);this.seasonService.activeSeason$.next(s)}),(0,y.a)([this.params$,this.show$,this.seasonProgress$]).pipe((0,g.R)(this.destroy$)).subscribe(function(){var e=(0,Z.Z)(function*([i,s,a]){yield ve(),n.cdr.markForCheck(),n.title.setTitle(`${mt(a?.title??`Season ${i.season}`)}\n            - ${s.title}\n            - Trakify`)});return function(i){return e.apply(this,arguments)}}())}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0),this.seasonService.activeSeason$.next(void 0)}static#t=this.\u0275fac=function(e){return new(e||jt)(t.Y36(b.gz),t.Y36(J.ux),t.Y36(q.X),t.Y36(he.t),t.Y36(tt.V),t.Y36(de.Dx),t.Y36(K),t.Y36(at.e),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:jt,selectors:[["t-season"]],standalone:!0,features:[t.qOj,t.jDz],decls:3,vars:4,consts:[[3,"loadingState"],[4,"ngIf"],[3,"breadcrumbParts","seasonProgress","seasonNumber","showSlug","seasons"],[3,"isLoggedIn","episodes","show","seasonNumber","seasonProgress","addEpisode","removeEpisode"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,yo,9,22,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.params$)))},dependencies:[B.N,d.O5,Ht,qt,d.Ov],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"],changeDetection:0})}const So=M.z.object({show:M.z.string(),season:M.z.string()});function $e(o,n){if(!o)return"";const e=o?.title;return e||(n?`Episode ${n}`:"")}class Wt{transform(n,e){return $e(n,e)}static#t=this.\u0275fac=function(e){return new(e||Wt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeTitle",type:Wt,pure:!0,standalone:!0})}class Kt{transform(n,e,i){if(!n.episode||!n.season||!n.show)return"";const s=parseInt(n.episode);if(isNaN(s))throw Error("Episode number not found (EpisodeLinkWithCounterPipe)");const a=s+e,c=De(a,1,i??(Math.abs(a)||1));return(0,u.episode)({show:n.show,season:n.season,episode:c+""})}static#t=this.\u0275fac=function(e){return new(e||Kt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeLinkWithCounter",type:Kt,pure:!0,standalone:!0})}function Co(o,n){if(1&o&&(t.TgZ(0,"h2",8),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,null==e.episode?null:e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}const Qe=function(o,n,e){return{episode:o,season:n,show:e}},He=function(o){return{back:o}};class Vt{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||Vt)};static#e=this.\u0275cmp=t.Xpm({type:Vt,selectors:[["t-episode-header"]],inputs:{breadcrumbParts:"breadcrumbParts",episode:"episode",tmdbEpisode:"tmdbEpisode",episodeProgress:"episodeProgress",episodeNumber:"episodeNumber",seasonNumber:"seasonNumber",showSlug:"showSlug",episodes:"episodes"},standalone:!0,features:[t.jDz],decls:16,vars:31,consts:[[3,"parts"],[1,"title-wrapper"],[1,"left"],[1,"mat-headline-5","title"],["class","mat-body-2 subtitle",4,"ngIf"],[1,"right"],["mat-icon-button","","aria-label","Previous episode","data-test-id","previous-button",3,"routerLink","state","disabled"],["mat-icon-button","","aria-label","Next episode","data-test-id","next-button",3,"routerLink","state","disabled"],[1,"mat-body-2","subtitle"]],template:function(e,i){1&e&&(t._UZ(0,"t-breadcrumb",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.ALo(5,"episodeTitle"),t.qZA(),t.YNc(6,Co,3,4,"h2",4),t.qZA(),t.TgZ(7,"div",5)(8,"a",6),t.ALo(9,"episodeLinkWithCounter"),t.TgZ(10,"mat-icon"),t._uU(11,"navigate_before"),t.qZA()(),t.TgZ(12,"a",7),t.ALo(13,"episodeLinkWithCounter"),t.TgZ(14,"mat-icon"),t._uU(15,"navigate_next"),t.qZA()()()()),2&e&&(t.Q6J("parts",i.breadcrumbParts),t.xp6(4),t.hij(" ",t.xi3(5,9,i.episode,null==i.episodeProgress?null:i.episodeProgress.number)," "),t.xp6(2),t.Q6J("ngIf",null==i.episode?null:i.episode.first_aired),t.xp6(2),t.Q6J("routerLink",t.xi3(9,12,t.kEZ(19,Qe,i.episodeNumber,i.seasonNumber,i.showSlug),-1))("state",t.VKq(23,He,i.back))("disabled","1"===i.episodeNumber),t.xp6(4),t.Q6J("routerLink",t.Dn7(13,15,t.kEZ(25,Qe,i.episodeNumber,i.seasonNumber,i.showSlug),1,null==i.episodes?null:i.episodes.length))("state",t.VKq(29,He,i.back))("disabled",i.episodeNumber===(null==i.episodes?null:i.episodes.length)+""))},dependencies:[_t,Wt,d.uU,d.O5,A.ot,A.o6,b.rH,Kt,D.Ps,D.Hw],styles:[".title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:.5rem}}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--text-color-2);margin:0}.title-wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}function Io(o,n){if(1&o&&(t._UZ(0,"t-episode-header",3),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&o){const e=n.ngIf,i=t.oxw();t.Q6J("breadcrumbParts",i.breadcrumbParts)("episode",t.lcZ(1,8,i.episode$))("tmdbEpisode",t.lcZ(2,10,i.tmdbEpisode$))("episodeProgress",t.lcZ(3,12,i.episodeProgress$))("episodeNumber",e.episode)("seasonNumber",e.season)("showSlug",e.show)("episodes",t.lcZ(4,14,i.seasonEpisodes$))}}class Xt extends $.X{constructor(n,e,i,s,a,c,h,_,f,l,v,N){super(),this.route=n,this.tmdbService=e,this.snackBar=i,this.showService=s,this.episodeService=a,this.executeService=c,this.seasonService=h,this.title=_,this.paramService=f,this.authService=l,this.cdr=v,this.dialogService=N,this.pageState=new O.X(m.Gu.LOADING),this.episodeState=new O.X(m.Gu.LOADING),this.seenState=new O.X(m.Gu.SUCCESS),this.state=m.Gu,this.params$=this.paramService.params$(this.route.params,ko,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState),this.seasonEpisodes$=(0,y.a)([this.params$,this.show$]).pipe((0,Ye.x)((C,p)=>C[0].season===p[0].season),(0,I.w)(([C,p])=>(0,G.z)((0,S.of)(null),this.seasonService.getSeasonEpisodes$(p,parseInt(C.season),!1,!1))),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState)),this.showProgress$=this.show$.pipe((0,I.w)(C=>(0,G.z)((0,S.of)(null),this.showService.getShowProgress$(C))),(0,k.J)("showProgress",this.snackBar,this.pageState)),this.episodeProgress$=(0,y.a)([this.params$,this.show$]).pipe((0,I.w)(([C,p])=>(0,G.z)((0,S.of)(null),this.episodeService.getEpisodeProgress$(p,parseInt(C.season),parseInt(C.episode)))),(0,k.J)("episodeProgress",this.snackBar,this.pageState)),this.episode$=(0,y.a)([this.params$,this.show$]).pipe((0,I.w)(([C,p])=>(0,G.z)((0,S.of)(null),this.episodeService.getEpisode$(p,parseInt(C.season),parseInt(C.episode),{fetchAlways:!0}))),(0,Tt.b)(C=>C&&this.episodeState.next(m.Gu.SUCCESS)),(0,k.J)("episode",this.snackBar,this.pageState)),this.tmdbEpisode$=(0,y.a)([this.params$,this.show$]).pipe((0,I.w)(([C,p])=>(0,G.z)((0,S.of)(null),this.tmdbService.getTmdbEpisode$(p,parseInt(C.season),parseInt(C.episode),{fetchAlways:!0}))),(0,Tt.b)(()=>this.episodeState.next(m.Gu.SUCCESS)),(0,k.J)("tmdbEpisode",this.snackBar,this.pageState))}ngOnInit(){(0,y.a)([this.episode$,this.episodeProgress$,this.show$,this.params$]).pipe((0,g.R)(this.destroy$)).subscribe(([n,e,i,s])=>{this.cdr.markForCheck(),this.title.setTitle(`${$e(n,e?.number)}\n            - ${i.title}\n            - ${mt(`Season ${s.season}`)}\n            - Trakify`)}),(0,y.a)([this.params$,this.show$]).pipe((0,g.R)(this.destroy$)).subscribe(([n,e])=>{this.cdr.markForCheck(),this.pageState.next(m.Gu.SUCCESS),this.breadcrumbParts=[{name:e.title,link:u.show({show:n.show})},{name:mt(`Season ${n.season}`),link:u.season({show:n.show,season:n.season})},{name:`Episode ${n.episode}`,link:u.episode({show:n.show,season:n.season,episode:n.episode})}]})}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0)}static#t=this.\u0275fac=function(e){return new(e||Xt)(t.Y36(b.gz),t.Y36(j.U),t.Y36(J.ux),t.Y36(q.X),t.Y36(V.n),t.Y36(tt.V),t.Y36(he.t),t.Y36(de.Dx),t.Y36(K),t.Y36(at.e),t.Y36(t.sBO),t.Y36(oe.x))};static#e=this.\u0275cmp=t.Xpm({type:Xt,selectors:[["t-episode-page"]],standalone:!0,features:[t.qOj,t.jDz],decls:12,vars:26,consts:[[3,"loadingState"],[3,"breadcrumbParts","episode","tmdbEpisode","episodeProgress","episodeNumber","seasonNumber","showSlug","episodes",4,"ngIf"],[3,"isLoggedIn","show","episode","episodeProgress","isNewShow","tmdbEpisode","isSeenLoading","addEpisode","removeEpisode","showImage"],[3,"breadcrumbParts","episode","tmdbEpisode","episodeProgress","episodeNumber","seasonNumber","showSlug","episodes"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,Io,5,16,"t-episode-header",1),t.ALo(2,"async"),t.TgZ(3,"t-loading",0)(4,"t-episode",2),t.NdJ("addEpisode",function(a){return i.executeService.addEpisode(a.episode,a.show,i.seenState)})("removeEpisode",function(a){return i.executeService.removeEpisode(a.episode,a.show,i.seenState)})("showImage",function(a){return i.dialogService.showImage(a.url,a.name)}),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.qZA()()()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,10,i.params$)),t.xp6(2),t.Q6J("loadingState",i.episodeState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(5,12,i.authService.isLoggedIn$))("show",t.lcZ(6,14,i.show$))("episode",t.lcZ(7,16,i.episode$))("episodeProgress",t.lcZ(8,18,i.episodeProgress$))("isNewShow",void 0===t.lcZ(9,20,i.showProgress$))("tmdbEpisode",t.lcZ(10,22,i.tmdbEpisode$))("isSeenLoading",t.lcZ(11,24,i.seenState)===i.state.LOADING))},dependencies:[B.N,Vt,d.O5,d.Ov,lt],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"],changeDetection:0})}const ko=M.z.object({show:M.z.string(),season:M.z.string(),episode:M.z.string()});class gt{constructor(n){this.infoService=n}resolve(){return this.infoService.getShowsFilteredAndSorted$()}static#t=this.\u0275fac=function(e){return new(e||gt)(t.LFG(X))};static#e=this.\u0275prov=t.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"})}var U=r(923),te=r(9914);function le(){return(le=(0,Z.Z)(function*(){return!localStorage.getItem("access_token")||(yield(0,t.f3M)(b.F0).navigateByUrl(u.showsProgress({})),!1)})).apply(this,arguments)}const Eo=[{path:"",component:ht,canActivate:[function To(){return le.apply(this,arguments)}],title:"Shows - Trakify"},{path:(0,U.E)(u.showsProgress.pattern,u.shows.pattern),component:vt,title:"Shows - Trakify",canActivate:[te.P],resolve:{showInfos:gt}},{path:(0,U.E)(u.addShow.pattern,u.shows.pattern),component:ht,title:"Add Show - Trakify"},{path:(0,U.E)(u.show.pattern,u.shows.pattern),component:$t,title:"Show - Trakify"},{path:(0,U.E)(u.season.pattern,u.shows.pattern),component:jt,title:"Season - Trakify"},{path:(0,U.E)(u.episode.pattern,u.shows.pattern),component:Xt,title:"Episode - Trakify"},{path:(0,U.E)(u.search.pattern,u.shows.pattern),component:Ct,canActivate:[te.P],title:"Search - Trakify"},{path:(0,U.E)(u.upcoming.pattern,u.shows.pattern),component:It,canActivate:[te.P],title:"Upcoming - Trakify"},{path:(0,U.E)(u.watchlist.pattern,u.shows.pattern),component:kt,canActivate:[te.P],title:"Watchlist - Trakify"}]}}]);