<t-loading [loadingState]="pageState">
  <t-show-header
    [tmdbSeason]="tmdbSeason$ | async"
    [posterPrefix]="posterPrefix"
    [showWatched]="showWatched$ | async"
    [tmdbShow]="tmdbShow$ | async"
    [show]="show$ | async"
    [isFavorite]="isFavorite$ | async"
    [isSmall]="isSmall"
    (addFavorite)="showService.addFavorite($event)"
    (removeFavorite)="showService.removeFavorite($event)"
  ></t-show-header>

  <ng-container *ngIf="nextEpisode$ | async as nextEpisode">
    <t-show-next-episode
      [nextEpisodeTrakt]="nextEpisode[0]"
      [nextEpisodeTmdb]="nextEpisode[1]"
      [nextEpisodeProgress]="nextEpisode[2]"
      [showProgress]="showProgress$ | async"
      [tmdbShow]="tmdbShow$ | async"
      [show]="show$ | async"
      [seenLoading]="seenLoading | async"
      (addToHistory)="addToHistory($event)"
      [showWatched]="showWatched$ | async"
    ></t-show-next-episode>
  </ng-container>

  <t-show-seasons
    [showProgress]="showProgress$ | async"
    [tmdbShow]="tmdbShow$ | async"
  ></t-show-seasons>
</t-loading>
