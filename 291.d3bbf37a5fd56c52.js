"use strict";(self.webpackChunktrakify=self.webpackChunktrakify||[]).push([[291],{8291:(j,D,i)=>{i.d(D,{k:()=>H});var t=i(1135),g=i(9841),T=i(3900),I=i(9646),v=i(4004),S=i(2722),P=i(5492),f=i(975),w=i(5606),n=i(4650),p=i(1420),L=i(5046),A=i(858),a=i(5262),W=i(3608),Z=i(7009),R=i(6895),K=i(1455),N=i(8424),Y=i(7392),U=i(3848),G=i(4859);function u(m,C){if(1&m){const l=n.EpF();n.TgZ(0,"a",10),n.NdJ("click",function(){const h=n.CHM(l),b=h.$implicit,B=h.index,F=n.oxw(3);return F.router.navigate([],{queryParams:{slug:b.ids.slug}}),n.KtG(F.activeListIndex=B)}),n._uU(1),n.qZA()}if(2&m){const l=C.$implicit,d=C.index,h=n.oxw(3);n.Q6J("active",h.activeListIndex===d),n.xp6(1),n.hij(" ",l.name," ")}}function M(m,C){if(1&m&&(n.TgZ(0,"nav",8),n.YNc(1,u,2,2,"a",9),n.qZA()),2&m){const l=n.oxw(2),d=n.MAs(3);n.Q6J("tabPanel",d),n.xp6(1),n.Q6J("ngForOf",l.lists)}}function O(m,C){if(1&m&&(n.ynx(0),n.YNc(1,M,2,2,"nav",7),n.BQk()),2&m){const l=n.oxw(),d=n.MAs(7);n.xp6(1),n.Q6J("ngIf",l.lists.length)("ngIfElse",d)}}function E(m,C){if(1&m&&(n.TgZ(0,"t-loading",0),n._UZ(1,"t-shows",11),n.ALo(2,"async"),n.qZA()),2&m){const l=n.oxw();n.Q6J("loadingState",l.listItemsLoadingState),n.xp6(1),n.Q6J("showsInfos",l.showsInfos)("tmdbConfig",n.lcZ(2,3,l.tmdbService.tmdbConfig.$))}}function x(m,C){if(1&m){const l=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",function(){n.CHM(l);const h=n.oxw();return n.KtG(h.dialogService.manageListItems(null==h.lists?null:h.lists[h.activeListIndex]))}),n.TgZ(1,"mat-icon"),n._uU(2,"add"),n.qZA()()}}function y(m,C){1&m&&(n.TgZ(0,"div",2)(1,"h2",13),n._uU(2,"No list added."),n.qZA()())}let H=(()=>{class m extends P.H{constructor(l,d,h,b,B,F,o){super(),this.showService=l,this.tmdbService=d,this.router=h,this.route=b,this.listService=B,this.dialogService=F,this.snackBar=o,this.loadingState=new t.X(f.Gu.LOADING),this.listItemsLoadingState=new t.X(f.Gu.LOADING),this.activeListIndex=0}ngOnInit(){(0,g.a)([this.listService.lists.$,this.route.queryParams]).pipe((0,T.w)(([l,d])=>{if(this.loadingState.next(f.Gu.SUCCESS),this.lists=l,!this.lists||0===this.lists.length)return(0,I.of)([]);const h=d.slug,b=h&&this.lists.findIndex(B=>B.ids.slug===h);return this.activeListIndex=b>=0?b:0,h&&-1!==b?this.listService.getListItems$(h):(this.router.navigate([],{queryParamsHandling:"merge",queryParams:{slug:this.lists[this.activeListIndex].ids.slug}}),(0,I.of)([]))}),(0,T.w)(l=>(this.listItemsLoadingState.next(f.Gu.SUCCESS),l&&0!==l.length?(this.showsInfos=l.map(d=>({show:d.show})),(0,g.a)(l.map(d=>this.tmdbService.getTmdbShow$(d.show.ids)))):(this.showsInfos=[],(0,I.of)([])))),(0,v.U)(l=>{0!==l.length&&(this.showsInfos=this.showsInfos?.map((d,h)=>({...d,tmdbShow:l[h]})),this.showsInfos?.sort((d,h)=>d.show?h.show&&d.show.title>h.show.title?1:-1:1))}),(0,S.R)(this.destroy$)).subscribe({error:l=>(0,w.q)(l,this.snackBar,this.loadingState)})}}return m.\u0275fac=function(l){return new(l||m)(n.Y36(p.X),n.Y36(L.U),n.Y36(A.F0),n.Y36(A.gz),n.Y36(a.X),n.Y36(W.x),n.Y36(Z.ux))},m.\u0275cmp=n.Xpm({type:m,selectors:[["t-lists"]],features:[n.qOj],decls:8,vars:4,consts:[[3,"loadingState"],[4,"ngIf"],[1,"list"],["tabPanel",""],[3,"loadingState",4,"ngIf"],["mat-fab","","color","primary","class","fab","aria-label","Add list items",3,"click",4,"ngIf"],["noList",""],["mat-tab-nav-bar","","color","accent",3,"tabPanel",4,"ngIf","ngIfElse"],["mat-tab-nav-bar","","color","accent",3,"tabPanel"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","click"],[3,"showsInfos","tmdbConfig"],["mat-fab","","color","primary","aria-label","Add list items",1,"fab",3,"click"],[1,"mat-subheading-1"]],template:function(l,d){1&l&&(n.TgZ(0,"t-loading",0),n.YNc(1,O,2,2,"ng-container",1),n.TgZ(2,"mat-tab-nav-panel",2,3),n.YNc(4,E,3,5,"t-loading",4),n.qZA(),n.YNc(5,x,3,0,"button",5),n.qZA(),n.YNc(6,y,3,0,"ng-template",null,6,n.W1O)),2&l&&(n.Q6J("loadingState",d.loadingState),n.xp6(1),n.Q6J("ngIf",d.lists),n.xp6(3),n.Q6J("ngIf",null==d.lists?null:d.lists.length),n.xp6(1),n.Q6J("ngIf",void 0!==d.activeListIndex))},dependencies:[R.sg,R.O5,K.j,N.N,Y.Hw,U.BU,U.sW,U.Nj,G.lW,R.Ov],styles:[".list[_ngcontent-%COMP%]{display:block;max-width:50rem;margin:0 auto;padding:1rem}.list[_ngcontent-%COMP%]     .mat-list-base{margin-left:-1rem;margin-right:-1rem}"]}),m})()},8424:(j,D,i)=>{i.d(D,{N:()=>G});var t=i(7579),g=i(2722),T=i(3900),I=i(9646),v=i(515),S=i(6451),P=i(2805),f=i(4004),w=i(9841),n=i(8675),p=i(1884),L=i(975),A=i(5492),a=i(4650),W=i(6895),Z=i(1572);function R(u,M){1&u&&(a.ynx(0),a.Hsn(1),a.BQk())}function K(u,M){if(1&u&&(a.ynx(0),a.YNc(1,R,2,0,"ng-container",0),a.ALo(2,"async"),a.BQk()),2&u){const O=a.oxw(),E=a.MAs(3);let x;a.xp6(1),a.Q6J("ngIf",!1===a.lcZ(2,2,O.isLoadingDelayed))("ngIfElse",null!==(x=O.customLoading)&&void 0!==x?x:E)}}function N(u,M){1&u&&(a.TgZ(0,"div",3),a._UZ(1,"mat-spinner",4),a.qZA())}function Y(u,M){1&u&&(a.TgZ(0,"div"),a._uU(1,"An error occurred"),a.qZA())}const U=["*"];let G=(()=>{class u extends A.H{constructor(){super(...arguments),this.loadingDelay=400,this.minimumLoadingShown=600,this.loadingStateChanged=new t.x,this.loadingStateEnum=L.Gu}ngOnChanges(O){const E=O.loadingState?.currentValue;E&&(this.loadingStateChanged.next(),E.pipe((0,g.R)(this.loadingStateChanged),(0,g.R)(this.destroy$)).subscribe(()=>{const x=E.pipe((0,T.w)(y=>y!==L.Gu.LOADING?(0,I.of)(void 0):v.E));this.isLoadingDelayed=(0,S.T)((0,P.H)(this.loadingDelay).pipe((0,f.U)(()=>!0),(0,g.R)(x)),(0,w.a)([x,(0,P.H)(this.loadingDelay+this.minimumLoadingShown)]).pipe((0,f.U)(()=>!1))).pipe((0,n.O)(!1),(0,p.x)())}))}}return u.\u0275fac=function(){let M;return function(E){return(M||(M=a.n5z(u)))(E||u)}}(),u.\u0275cmp=a.Xpm({type:u,selectors:[["t-loading"]],inputs:{loadingState:"loadingState",customLoading:"customLoading",customError:"customError"},features:[a.qOj,a.TTD],ngContentSelectors:U,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"loading-wrapper"],["diameter","32"]],template:function(O,E){if(1&O&&(a.F$t(),a.YNc(0,K,3,4,"ng-container",0),a.ALo(1,"async"),a.YNc(2,N,2,0,"ng-template",null,1,a.W1O),a.YNc(4,Y,2,0,"ng-template",null,2,a.W1O)),2&O){const x=a.MAs(5);let y;a.Q6J("ngIf",a.lcZ(1,2,E.loadingState)!==E.loadingStateEnum.ERROR)("ngIfElse",null!==(y=E.customError)&&void 0!==y?y:x)}},dependencies:[W.O5,Z.Ou,W.Ov],styles:[".loading-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1rem}"]}),u})()},1455:(j,D,i)=>{i.d(D,{j:()=>F});var t=i(4650),g=i(6895),T=i(4633),I=i(858),v=i(3238),S=i(4859),P=i(3162),f=i(7392),w=i(8255),n=i(1800);let p=(()=>{class o{transform(e,s){if(!e)return"";const _=(new Date).getTime(),r=new Date(e).getTime();if(r<=_+864e5){const Q=(0,g.p6)(r-_,"H","en-US");return`In ${Q} ${"1"===Q?"hour":"hours"}`}if(r<=_+6048e5){const Q=(0,g.p6)(r-_,"d","en-US");return`In ${Q} ${"1"===Q?"day":"days"}`}return(0,g.p6)(e,s,"en-US")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"relativeDate",type:o,pure:!0}),o})();function L(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.tmdbShow.number_of_episodes," episodes ")}}function A(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.progress.aired-e.progress.completed," remaining ")}}function a(o,c){1&o&&(t.ynx(0),t._uU(1," \xb7 "),t.BQk())}function W(o,c){if(1&o&&(t.ynx(0),t.YNc(1,L,2,1,"ng-container",7),t.YNc(2,A,2,1,"ng-container",7),t.YNc(3,a,2,0,"ng-container",7),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.tmdbShow&&(!e.progress||0===e.progress.completed)),t.xp6(1),t.Q6J("ngIf",e.progress&&e.progress.completed>0&&e.progress.aired-e.progress.completed),t.xp6(1),t.Q6J("ngIf",e.tmdbShow&&(!e.progress||e.progress&&e.progress.aired-e.progress.completed))}}function Z(o,c){if(1&o&&(t.TgZ(0,"p",8),t.YNc(1,W,4,3,"ng-container",7),t._uU(2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.withEpisodesCount),t.xp6(1),t.hij(" ",null==e.tmdbShow||null==e.tmdbShow.networks||null==e.tmdbShow.networks[0]?null:e.tmdbShow.networks[0].name," ")}}function R(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"h2",10),t._uU(2),t.qZA(),t.TgZ(3,"button",11),t.NdJ("click",function(_){t.CHM(e);const r=t.oxw();return r.preventEvent(_),t.KtG(r.isFavorite?r.removeFavorite.emit(r.show):r.addFavorite.emit(r.show))}),t.TgZ(4,"mat-icon",12),t._uU(5),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.AsE(" ",(null==e.tmdbShow?null:e.tmdbShow.name)||e.show.title," ",e.withYear&&null!==e.show.year?" ("+e.show.year+")":""," "),t.xp6(1),t.ekj("remove",!e.isFavorite),t.xp6(2),t.Oqu(e.isFavorite?"star":"star_outline")}}function K(o,c){if(1&o&&t._UZ(0,"mat-progress-bar",13),2&o){const e=t.oxw();t.Q6J("value",e.progress.completed/e.progress.aired*100)}}function N(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"p",14),t._uU(2),t.ALo(3,"number"),t.ALo(4,"number"),t.qZA(),t.TgZ(5,"p",15),t._uU(6),t.ALo(7,"relativeDate"),t.ALo(8,"date"),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.lnq(" S",t.xi3(3,4,e.episode.season,"2.0-0"),"E",t.xi3(4,7,e.episode.number,"2.0-0")," ",e.episode.title," "),t.xp6(4),t.hij(" ",e.withRelativeDate&&e.episode.first_aired?t.xi3(7,10,e.episode.first_aired,"d. MMM. yyyy (E.)"):t.xi3(8,13,e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}function Y(o,c){1&o&&(t.TgZ(0,"button",18)(1,"mat-icon"),t._uU(2,"checkbox"),t.qZA()())}function U(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(_){t.CHM(e);const r=t.oxw(2);return r.preventEvent(_),t.KtG(r.isWatchlist?r.removeShow.emit(r.show.ids):r.addShow.emit(r.show.ids))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw(2);t.uIk("aria-label",e.isWatchlist?"Remove show":"Add show"),t.xp6(2),t.Oqu(e.isWatchlist?"remove":"add")}}function G(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Y,3,0,"button",16),t.YNc(2,U,3,2,"button",17),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.progress&&e.showWatched),t.xp6(1),t.Q6J("ngIf",!(e.progress&&e.showWatched))}}const u=function(o,c){return{show:o,isFavorite:c}};function M(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",20),t.NdJ("click",function(_){t.CHM(e);const r=t.oxw();return t.KtG(r.preventEvent(_))}),t.TgZ(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e.menu)("matMenuTriggerData",t.WLB(2,u,e.show,e.isFavorite))}}let O=(()=>{class o{constructor(){this.addFavorite=new t.vpe,this.removeFavorite=new t.vpe,this.addShow=new t.vpe,this.removeShow=new t.vpe,this.manageLists=new t.vpe,this.posterLoaded=!1}preventEvent(e){e.stopPropagation(),e.preventDefault()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["t-show-item"]],inputs:{show:"show",showWatched:"showWatched",progress:"progress",imgPrefix:"imgPrefix",tmdbShow:"tmdbShow",tmdbSeason:"tmdbSeason",isFavorite:"isFavorite",isWatchlist:"isWatchlist",episode:"episode",withYear:"withYear",withEpisode:"withEpisode",withAddButtons:"withAddButtons",withEpisodesCount:"withEpisodesCount",withProgressbar:"withProgressbar",withRelativeDate:"withRelativeDate",menu:"menu"},outputs:{addFavorite:"addFavorite",removeFavorite:"removeFavorite",addShow:"addShow",removeShow:"removeShow",manageLists:"manageLists"},decls:11,vars:12,consts:[[1,"poster-wrapper"],["width","185","height","278","loading","lazy","tImageFallback","assets/poster.png",3,"src","alt","load"],[1,"right"],[1,"left-wrapper"],["class","mat-small small-text",4,"ngIf"],["class","title-wrapper",4,"ngIf"],["class","progress-bar","mode","determinate","color","accent",3,"value",4,"ngIf"],[4,"ngIf"],[1,"mat-small","small-text"],[1,"title-wrapper"],[1,"mat-title","title"],["mat-icon-button","","aria-label","Favorite",1,"favorite-button",3,"click"],[1,"favorite-icon"],["mode","determinate","color","accent",1,"progress-bar",3,"value"],[1,"mat-small","next-episode-text"],[1,"mat-small","next-episode-date"],["mat-icon-button","","aria-label","Show added","disabled","",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Show added","disabled",""],["mat-icon-button","",3,"click"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor","matMenuTriggerData","click"]],template:function(e,s){if(1&e&&(t.TgZ(0,"div",0)(1,"img",1),t.NdJ("load",function(){return s.posterLoaded=!0}),t.qZA()(),t.TgZ(2,"div",2)(3,"div",3),t.YNc(4,Z,3,2,"p",4),t.YNc(5,R,6,5,"div",5),t.YNc(6,K,1,1,"mat-progress-bar",6),t.YNc(7,N,9,16,"ng-container",7),t.qZA(),t.TgZ(8,"div"),t.YNc(9,G,3,2,"ng-container",7),t.YNc(10,M,4,5,"ng-container",7),t.qZA()()),2&e){let _,r;t.ekj("not-loaded",!s.posterLoaded),t.xp6(1),t.Q6J("src",s.imgPrefix&&(s.tmdbSeason||s.tmdbShow)?s.imgPrefix+(null!==(_=null==s.tmdbSeason?null:s.tmdbSeason.poster_path)&&void 0!==_?_:null==s.tmdbShow?null:s.tmdbShow.poster_path):null,t.LSH)("alt",(null!==(r=s.tmdbShow)&&void 0!==r?r:s.show)?((null==s.tmdbShow?null:s.tmdbShow.name)||(null==s.show?null:s.show.title))+" Poster":"Poster"),t.xp6(1),t.ekj("without-gap",!s.withAddButtons),t.xp6(2),t.Q6J("ngIf",s.progress||s.tmdbShow),t.xp6(1),t.Q6J("ngIf",s.show),t.xp6(1),t.Q6J("ngIf",s.withProgressbar&&s.progress&&s.showWatched),t.xp6(1),t.Q6J("ngIf",s.withEpisode&&s.episode),t.xp6(2),t.Q6J("ngIf",s.withAddButtons&&s.show),t.xp6(1),t.Q6J("ngIf",!s.withAddButtons&&s.menu&&s.show)}},dependencies:[g.O5,S.lW,P.pW,f.Hw,w.p6,n.H,g.JJ,g.uU,p],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:5rem 1fr;align-items:center;gap:1rem;width:100%;height:100%}@media (min-width: 576px){[_nghost-%COMP%]{grid-template-columns:7rem 1fr}}@media (min-width: 1200px){[_nghost-%COMP%]{grid-template-columns:9.625rem 1fr}}.poster-wrapper[_ngcontent-%COMP%]{aspect-ratio:2/3;cursor:pointer;border-radius:var(--border-radius);overflow:hidden;display:flex;place-items:center}.poster-wrapper.not-loaded[_ngcontent-%COMP%]{background-color:var(--background-2)}.right[_ngcontent-%COMP%]{width:100%;overflow:hidden;display:grid;grid-template-columns:1fr auto;align-items:center;gap:1rem}.right.without-gap[_ngcontent-%COMP%]{gap:unset}.left-wrapper[_ngcontent-%COMP%]{overflow:hidden}.title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.125rem;--icon-size: 1rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]{margin-bottom:.75rem;--icon-size: 1.25rem}}.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;margin-bottom:0;margin-right:.25rem;font-size:1rem;font-weight:400;line-height:1.5rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;line-height:2rem}}.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:hover{cursor:pointer}.title-wrapper[_ngcontent-%COMP%]   .favorite-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:var(--icon-size);height:var(--icon-size)}.title-wrapper[_ngcontent-%COMP%]   .favorite-button.remove[_ngcontent-%COMP%]{display:none}.title-wrapper[_ngcontent-%COMP%]:hover   .favorite-button.remove[_ngcontent-%COMP%]{display:flex}.title-wrapper[_ngcontent-%COMP%]   .favorite-icon[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);line-height:var(--icon-size)}.progress-bar[_ngcontent-%COMP%]{margin-bottom:.25rem}@media (min-width: 576px){.progress-bar[_ngcontent-%COMP%]{margin-bottom:1rem}}.small-text[_ngcontent-%COMP%], .next-episode-text[_ngcontent-%COMP%], .next-episode-date[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.small-text[_ngcontent-%COMP%]{margin:0;color:var(--text-color-2)}@media (min-width: 576px){.small-text[_ngcontent-%COMP%]{margin-bottom:.5rem}}.next-episode-text[_ngcontent-%COMP%]{margin:0}@media (min-width: 576px){.next-episode-text[_ngcontent-%COMP%]{margin-bottom:.5rem}}.next-episode-date[_ngcontent-%COMP%]{margin:0;color:var(--text-color-2)}@media (min-width: 576px){.next-episode-date[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),o})();var E=i(1521);let x=(()=>{class o{constructor(e){this.ref=e,this.element=e.nativeElement}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275dir=t.lG2({type:o,selectors:[["","tTransitionGroupItem",""]]}),o})();var y=i(7579),H=i(4968),m=i(8372),C=i(2722);let l=(()=>{class o{constructor(){this.destroy$=new y.x,this.moveClass="move"}ngOnInit(){(0,H.R)(window,"scroll").pipe((0,m.b)(10),(0,C.R)(this.destroy$)).subscribe(()=>this.refreshPosition("previousPosition"))}ngAfterViewInit(){requestAnimationFrame(()=>this.refreshPosition("previousPosition")),this.items?.changes.pipe((0,C.R)(this.destroy$)).subscribe(e=>{e.forEach(r=>r.previousPosition=r.newPosition||r.previousPosition),e.forEach(r=>r.onMove?.()),this.refreshPosition("newPosition"),e.forEach(r=>r.previousPosition=r.previousPosition||r.newPosition);const s=()=>{e.forEach(this.applyTranslation),this._forceReflow=document.body.offsetHeight,this.items?.forEach(this.runTransition.bind(this))};e.some(r=>!(!r.previousPosition||!r.newPosition)&&(!!(r.previousPosition.left-r.newPosition.left)||!!(r.previousPosition.top-r.newPosition.top)))?s():requestAnimationFrame(()=>{this.refreshPosition("newPosition"),s()})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}runTransition(e){!e.moved||(e.element.classList.add(this.moveClass),e.element.style.transform=e.element.style.transitionDuration="",e.element.addEventListener("transitionend",e.onMove=s=>{(!s||/transform$/.test(s.propertyName))&&(e.element.removeEventListener("transitionend",e.onMove),e.onMove=null,e.element.classList.remove(this.moveClass))}))}refreshPosition(e){this.items?.forEach(s=>{s[e]=s.element.getBoundingClientRect()})}applyTranslation(e){if(e.moved=!1,!e.previousPosition||!e.newPosition)return;const s=e.previousPosition.left-e.newPosition.left,_=e.previousPosition.top-e.newPosition.top;(s||_)&&(e.moved=!0,e.element.style.transform="translate("+s+"px,"+_+"px)",e.element.style.transitionDuration="0s")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["","tTransitionGroup",""]],contentQueries:function(e,s,_){if(1&e&&t.Suo(_,x,4),2&e){let r;t.iGM(r=t.CRH())&&(s.items=r)}}}),o})();function d(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"a",5)(1,"mat-list-item")(2,"t-show-item",6),t.NdJ("addFavorite",function(_){t.CHM(e);const r=t.oxw(3);return t.KtG(r.addFavorite.emit(_))})("removeFavorite",function(_){t.CHM(e);const r=t.oxw(3);return t.KtG(r.removeFavorite.emit(_))})("addShow",function(_){t.CHM(e);const r=t.oxw(3);return t.KtG(r.add.emit(_))})("removeShow",function(_){t.CHM(e);const r=t.oxw(3);return t.KtG(r.remove.emit(_))})("manageLists",function(_){t.CHM(e);const r=t.oxw(3);return t.KtG(r.manageLists.emit(_))}),t.qZA()()()}if(2&o){const e=c.$implicit,s=t.oxw(3);t.Q6J("routerLink",e.show&&"/series/s/"+e.show.ids.slug+(s.withLinkToEpisode&&e.nextEpisode?"/season/"+e.nextEpisode.season+"/episode/"+e.nextEpisode.number:"")),t.xp6(2),t.Q6J("show",e.show)("showWatched",e.showWatched)("progress",e.showProgress)("imgPrefix",s.tmdbConfig?s.tmdbConfig.images.secure_base_url+s.tmdbConfig.images.poster_sizes[1]:void 0)("tmdbShow",e.tmdbShow)("tmdbSeason",e.tmdbSeason)("episode",e.nextEpisode)("isFavorite",e.isFavorite)("isWatchlist",!!e.isWatchlist)("withYear",s.withYear)("withEpisode",s.withEpisode)("withAddButtons",s.withAddButtons)("withEpisodesCount",s.withEpisodesCount)("withProgressbar",s.withProgressbar)("withRelativeDate",s.withRelativeDate)("menu",s.menu)}}function h(o,c){if(1&o&&(t.TgZ(0,"mat-list",3),t.YNc(1,d,3,17,"a",4),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.showsInfos)("ngForTrackBy",e.showId)}}function b(o,c){if(1&o&&(t.ynx(0),t.YNc(1,h,2,2,"mat-list",2),t.BQk()),2&o){const e=t.oxw(),s=t.MAs(2);t.xp6(1),t.Q6J("ngIf",e.showsInfos.length)("ngIfElse",s)}}function B(o,c){1&o&&(t.TgZ(0,"h2",7),t._uU(1,"No shows in the list."),t.qZA(),t.TgZ(2,"p")(3,"a",8),t._uU(4,"Add"),t.qZA(),t._uU(5," one show."),t.qZA())}let F=(()=>{class o{constructor(){this.addFavorite=new t.vpe,this.removeFavorite=new t.vpe,this.add=new t.vpe,this.remove=new t.vpe,this.manageLists=new t.vpe}showId(e,s){return s.show?.ids.trakt}ngOnChanges(e){console.debug("ShowsComponent changes",e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["t-shows"]],inputs:{showsInfos:"showsInfos",tmdbConfig:"tmdbConfig",withYear:"withYear",withEpisode:"withEpisode",withAddButtons:"withAddButtons",withLinkToEpisode:"withLinkToEpisode",withEpisodesCount:"withEpisodesCount",withProgressbar:"withProgressbar",withRelativeDate:"withRelativeDate",menu:"menu"},outputs:{addFavorite:"addFavorite",removeFavorite:"removeFavorite",add:"add",remove:"remove",manageLists:"manageLists"},features:[t.TTD],decls:3,vars:1,consts:[[4,"ngIf"],["noShows",""],["class","shows","tTransitionGroup","",4,"ngIf","ngIfElse"],["tTransitionGroup","",1,"shows"],["class","show link","tTransitionGroupItem","","matRipple","","tHideRippleOnScroll","",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],["tTransitionGroupItem","","matRipple","","tHideRippleOnScroll","",1,"show","link",3,"routerLink"],[3,"show","showWatched","progress","imgPrefix","tmdbShow","tmdbSeason","episode","isFavorite","isWatchlist","withYear","withEpisode","withAddButtons","withEpisodesCount","withProgressbar","withRelativeDate","menu","addFavorite","removeFavorite","addShow","removeShow","manageLists"],[1,"mat-subheading-1"],["routerLink","/series/add-series"]],template:function(e,s){1&e&&(t.YNc(0,b,2,2,"ng-container",0),t.YNc(1,B,6,0,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",s.showsInfos)},dependencies:[g.sg,g.O5,T.i$,T.Tg,I.yS,v.wG,O,E.g,x,l],styles:[".shows[_ngcontent-%COMP%]{margin-top:-1rem}.shows[_ngcontent-%COMP%]   .show.move[_ngcontent-%COMP%]{transition:transform .3s}mat-list-item.show[_ngcontent-%COMP%]{padding:.5rem 0}.loading-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loading-title[_ngcontent-%COMP%]{margin-bottom:0}"]}),o})()},1521:(j,D,i)=>{i.d(D,{g:()=>P});var t=i(5861),g=i(7579),T=i(5698),I=i(2722),v=i(4650),S=i(3238);let P=(()=>{class f{constructor(n,p,L){this.el=n,this.matRipple=p,this.ngZone=L,this.destroy$=new g.x,this.touchTapDelay=100,this.isClick=new g.x,this.isNearThreshold=10,this.pointerDownEvents=["mousedown","touchstart"],this.pointerUpEvents=["mouseup","mouseleave","touchend","touchcancel","dragstart"],this.pointerMoveEvents=["pointermove","touchmove"],this.pointerUpEventsRegistered=!1,this.pointerMoveEventsRegistered=!1,this.isPointerDown=!1,this.isTouch=!1,this.matRipple.disabled=!0}ngOnDestroy(){this.removeEvents(),clearTimeout(this.timeoutId),this.destroy$.next(),this.destroy$.complete()}onPointerDown(n){0===n.button&&(this.isTouch="touch"===n.pointerType,this.isPointerDown=!0,this.downPosition={x:n.clientX,y:n.clientY},this.currentPosition={x:n.clientX,y:n.clientY},this.isClick.pipe((0,T.q)(1),(0,I.R)(this.destroy$)).subscribe(()=>{this.matRipple.launch(n.x,n.y,{persistent:!0}),clearTimeout(this.timeoutId)}),this.pointerUpEventsRegistered||(this.registerEvents(this.pointerUpEvents),this.pointerUpEventsRegistered=!0),this.isTouch?(clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.isNear(this.currentPosition,this.downPosition)&&this.isClick.next(void 0)},this.touchTapDelay),this.pointerMoveEventsRegistered||(this.registerEvents(this.pointerMoveEvents),this.pointerMoveEventsRegistered=!0)):this.isClick.next(void 0))}registerEvents(n){this.ngZone.runOutsideAngular(()=>{n.forEach(p=>{this.el.nativeElement.addEventListener(p,this,{passive:!0})})})}removeEvents(){this.el&&(this.pointerDownEvents.forEach(n=>{this.el.nativeElement.removeEventListener(n,this,{passive:!0})}),this.pointerUpEventsRegistered&&this.pointerUpEvents.forEach(n=>{this.el.nativeElement.removeEventListener(n,this,{passive:!0})}),this.pointerMoveEventsRegistered&&this.pointerMoveEvents.forEach(n=>{this.el.nativeElement.removeEventListener(n,this,{passive:!0})}))}handleEvent(n){var p=this;return(0,t.Z)(function*(){"pointermove"===n.type?p.onPointerMove(n):"touchmove"===n.type?p.onTouchMove(n):yield p.onPointerUp()})()}onPointerMove(n){this.currentPosition={x:n.clientX,y:n.clientY}}onTouchMove(n){this.currentPosition={x:n.touches[0].clientX,y:n.touches[0].clientY}}onPointerUp(){!this.isPointerDown||(this.isPointerDown=!1,this.isNear(this.currentPosition,this.downPosition)&&(this.isClick.next(void 0),clearTimeout(this.timeoutId)),this.matRipple.fadeOutAll())}isNear(n,p){return!(!n||!p)&&Math.abs(n.x-p.x)<this.isNearThreshold&&Math.abs(n.y-p.y)<this.isNearThreshold}}return f.\u0275fac=function(n){return new(n||f)(v.Y36(v.SBq),v.Y36(S.wG),v.Y36(v.R0b))},f.\u0275dir=v.lG2({type:f,selectors:[["","tHideRippleOnScroll",""]],hostBindings:function(n,p){1&n&&v.NdJ("pointerdown",function(A){return p.onPointerDown(A)})}}),f})()},1800:(j,D,i)=>{i.d(D,{H:()=>S});var t=i(975),g=i(7579),T=i(1135),I=i(2722),v=i(4650);let S=(()=>{class P{constructor(w){this.el=w,this.destroy$=new g.x,this.state=new T.X(t.Gu.LOADING)}ngOnInit(){this.state?.pipe((0,I.R)(this.destroy$)).subscribe(w=>{w===t.Gu.ERROR&&this.tImageFallback&&(this.el.nativeElement.src=this.tImageFallback)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onLoad(){this.state?.next(t.Gu.SUCCESS)}onError(){this.state?.next(t.Gu.ERROR)}}return P.\u0275fac=function(w){return new(w||P)(v.Y36(v.SBq))},P.\u0275dir=v.lG2({type:P,selectors:[["","tImageFallback",""]],hostBindings:function(w,n){1&w&&v.NdJ("load",function(){return n.onLoad()})("error",function(){return n.onError()})},inputs:{tImageFallback:"tImageFallback"}}),P})()}}]);