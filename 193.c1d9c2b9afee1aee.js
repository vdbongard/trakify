"use strict";(self.webpackChunktrakify=self.webpackChunktrakify||[]).push([[193],{5193:(D,u,i)=>{i.r(u),i.d(u,{ListsModule:()=>X});var c=i(6895),m=i(858),v=i(1135),p=i(9841),x=i(3900),f=i(9646),S=i(4004),C=i(2722),y=i(5492),d=i(975),T=i(5606),t=i(4650),b=i(1420),Z=i(5046),A=i(5262),M=i(3608),J=i(7009),N=i(1481),Y=i(1455),w=i(8424),L=i(7392),g=i(3848),I=i(4859);function O(s,e){if(1&s){const n=t.EpF();t.TgZ(0,"a",10),t.NdJ("click",function(){const o=t.CHM(n),l=o.$implicit,r=o.index,h=t.oxw(3);return h.router.navigate([],{queryParams:{slug:l.ids.slug}}),t.KtG(h.activeListIndex=r)}),t._uU(1),t.qZA()}if(2&s){const n=e.$implicit,a=e.index,o=t.oxw(3);t.Q6J("active",o.activeListIndex===a),t.xp6(1),t.hij(" ",n.name," ")}}function P(s,e){if(1&s&&(t.TgZ(0,"nav",8),t.YNc(1,O,2,2,"a",9),t.qZA()),2&s){const n=t.oxw(2),a=t.MAs(3);t.Q6J("tabPanel",a),t.xp6(1),t.Q6J("ngForOf",n.lists)}}function Q(s,e){if(1&s&&(t.ynx(0),t.YNc(1,P,2,2,"nav",7),t.BQk()),2&s){const n=t.oxw(),a=t.MAs(7);t.xp6(1),t.Q6J("ngIf",n.lists.length)("ngIfElse",a)}}function U(s,e){if(1&s&&(t.TgZ(0,"t-loading",0),t._UZ(1,"t-shows",11),t.ALo(2,"async"),t.qZA()),2&s){const n=t.oxw();t.Q6J("loadingState",n.listItemsLoadingState),t.xp6(1),t.Q6J("showsInfos",n.showsInfos)("tmdbConfig",t.lcZ(2,3,n.tmdbService.tmdbConfig.$))}}function B(s,e){if(1&s){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.dialogService.manageListItems(null==o.lists?null:o.lists[o.activeListIndex]))}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA()()}}function F(s,e){1&s&&(t.TgZ(0,"div",2)(1,"h2",13),t._uU(2,"No list added."),t.qZA()())}const G=[{path:"",component:(()=>{class s extends y.H{constructor(n,a,o,l,r,h,z,R){super(),this.showService=n,this.tmdbService=a,this.router=o,this.route=l,this.listService=r,this.dialogService=h,this.snackBar=z,this.title=R,this.loadingState=new v.X(d.Gu.LOADING),this.listItemsLoadingState=new v.X(d.Gu.LOADING),this.activeListIndex=0}ngOnInit(){(0,p.a)([this.listService.lists.$,this.route.queryParamMap]).pipe((0,x.w)(([n,a])=>{if(this.loadingState.next(d.Gu.SUCCESS),this.title.setTitle("Lists - Trakify"),this.lists=n,!this.lists||0===this.lists.length)return(0,f.of)([]);const o=a.get("slug"),l=null!==o?this.lists.findIndex(r=>r.ids.slug===o):-1;return this.activeListIndex=l>=0?l:0,this.title.setTitle(`${this.lists[this.activeListIndex].name} - Trakify`),o&&-1!==l?this.listService.getListItems$(o):(this.router.navigate([],{queryParamsHandling:"merge",queryParams:{slug:this.lists[this.activeListIndex].ids.slug}}),(0,f.of)([]))}),(0,x.w)(n=>{if(this.listItemsLoadingState.next(d.Gu.SUCCESS),!n||0===n.length)return this.showsInfos=[],(0,f.of)([]);const a=n.map(o=>({show:o.show}));return a?.sort((o,l)=>o.show?l.show&&o.show.title>l.show.title?1:-1:1),this.showsInfos=a,(0,p.a)(this.showsInfos.map(o=>this.tmdbService.getTmdbShow$(o.show?.ids,{fetch:!0})))}),(0,S.U)(n=>{0!==n.length&&(this.showsInfos=this.showsInfos?.map((a,o)=>({...a,tmdbShow:n[o]})))}),(0,C.R)(this.destroy$)).subscribe({error:n=>(0,T.q)(n,this.snackBar,this.loadingState)})}}return s.\u0275fac=function(n){return new(n||s)(t.Y36(b.X),t.Y36(Z.U),t.Y36(m.F0),t.Y36(m.gz),t.Y36(A.X),t.Y36(M.x),t.Y36(J.ux),t.Y36(N.Dx))},s.\u0275cmp=t.Xpm({type:s,selectors:[["t-lists"]],features:[t.qOj],decls:8,vars:4,consts:[[3,"loadingState"],[4,"ngIf"],[1,"list"],["tabPanel",""],[3,"loadingState",4,"ngIf"],["mat-fab","","color","primary","class","fab","aria-label","Add list items",3,"click",4,"ngIf"],["noList",""],["mat-tab-nav-bar","","color","accent",3,"tabPanel",4,"ngIf","ngIfElse"],["mat-tab-nav-bar","","color","accent",3,"tabPanel"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","click"],[3,"showsInfos","tmdbConfig"],["mat-fab","","color","primary","aria-label","Add list items",1,"fab",3,"click"],[1,"mat-subheading-1"]],template:function(n,a){1&n&&(t.TgZ(0,"t-loading",0),t.YNc(1,Q,2,2,"ng-container",1),t.TgZ(2,"mat-tab-nav-panel",2,3),t.YNc(4,U,3,5,"t-loading",4),t.qZA(),t.YNc(5,B,3,0,"button",5),t.qZA(),t.YNc(6,F,3,0,"ng-template",null,6,t.W1O)),2&n&&(t.Q6J("loadingState",a.loadingState),t.xp6(1),t.Q6J("ngIf",a.lists),t.xp6(3),t.Q6J("ngIf",null==a.lists?null:a.lists.length),t.xp6(1),t.Q6J("ngIf",void 0!==a.activeListIndex))},dependencies:[c.sg,c.O5,Y.j,w.N,L.Hw,g.BU,g.sW,g.Nj,I.lW,c.Ov],styles:[".list[_ngcontent-%COMP%]{display:block;max-width:50rem;margin:0 auto;padding:1rem}.list[_ngcontent-%COMP%]     .mat-list-base{margin-left:-1rem;margin-right:-1rem}"]}),s})()}];let $=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[m.Bz.forChild(G),m.Bz]}),s})();var j=i(4466),E=i(6709),H=i(5412);let X=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.ez,$,j.m,L.Ps,g.Nh,I.ot,E.p9,H.Is]}),s})()}}]);