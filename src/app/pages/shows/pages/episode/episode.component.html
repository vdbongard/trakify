<t-loading [loadingState]="pageState">
  @if (params()) {
    <t-episode-header
      [breadcrumbParts]="breadcrumbParts"
      [episode]="episode"
      [tmdbEpisode]="tmdbEpisode"
      [episodeProgress]="episodeProgress"
      [episodeNumber]="episodeNumber"
      [seasonNumber]="seasonNumber"
      [showSlug]="showSlug"
      [episodes]="seasonEpisodes()"
    />
  }

  <t-loading [loadingState]="episodeState">
    <t-episode
      [isLoggedIn]="authService.isLoggedIn()"
      [show]="show"
      [episode]="episode"
      [episodeProgress]="episodeProgress()"
      [isNewShow]="showProgress() === undefined"
      [tmdbEpisode]="tmdbEpisode()"
      [isSeenLoading]="seenState() === state.LOADING"
      (addEpisode)="executeService.addEpisode($event.episode, $event.show, seenState)"
      (removeEpisode)="executeService.removeEpisode($event.episode, $event.show, seenState)"
    />
  </t-loading>
</t-loading>
