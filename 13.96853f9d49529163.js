"use strict";(self.webpackChunktrakify=self.webpackChunktrakify||[]).push([[13],{4013:(Vo,fe,c)=>{c.r(fe),c.d(fe,{ShowsModule:()=>ee});var d=c(6895),v=c(858),P=c(5861),L=c(1135),_=c(2722),J=c(1850),l=c(975),$=c(5606),m=c(3261),t=c(4650),R=c(6592),x=c(9841),M=c(4004),ne=c(8930),oe=c(6321),G=c(5507),ve=c(251),st=c(2042);class K{constructor(o,e,i,a){this.showService=o,this.tmdbService=e,this.configService=i,this.episodeService=a}getShowsFilteredAndSorted$(){return(0,x.a)([this.showService.getShowsWatched$(),this.showService.showsProgress.$,this.episodeService.getEpisodes$(),this.showService.showsHidden.$,this.showService.favorites.$,this.configService.config.$,this.tmdbService.getTmdbShows$(),this.tmdbService.tmdbSeasons.$]).pipe((0,M.U)(([o,e,i,a,s,r,h,u])=>{if(!o.length)return[];const f=[];return o.forEach(p=>{const C=e[p.show.ids.trakt],at=p.show.ids.tmdb?h[p.show.ids.tmdb]:void 0,S=C?.next_episode?i[(0,oe.d)(p.show.ids.trakt,C.next_episode.season,C.next_episode.number)]:void 0;if((0,ne.Ll)(r,p.show,C,at,a))return;const F=C?.next_episode&&u[(0,oe.u)(p.show.ids.tmdb,C.next_episode.season)];f.push({showWatched:p,show:p.show,showProgress:C,tmdbShow:at,tmdbSeason:F,nextEpisode:S,isFavorite:this.showService.isFavorite(p.show,s),isHidden:this.showService.isHidden(p.show)})}),(0,ne.TD)(r,f,i),f}))}static#t=this.\u0275fac=function(e){return new(e||K)(t.LFG(R.X),t.LFG(G.U),t.LFG(ve.E),t.LFG(st.n))};static#e=this.\u0275prov=t.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"})}var ae=c(5381),Y=c(7009),rt=c(6578),X=c(9450),ct=c(629),N=c(4859),V=c(7392),U=c(8255),D=c(8424),tt=c(4602),q=c(4754);function Ue(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).show,s=t.oxw();return t.KtG(s.dialogService.manageLists(a.ids.trakt))}),t._uU(1," Manage lists "),t.qZA()}}function qe(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ue,2,0,"button",7),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function ze(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),s=a.isFavorite,r=a.show,h=t.oxw();return t.KtG(s?h.showService.removeFavorite(r):h.showService.addFavorite(r))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2).isFavorite;t.xp6(1),t.hij(" ",e?"Remove favorite":"Add favorite"," ")}}function je(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),s=a.isHidden,r=a.show,h=t.oxw();return t.KtG(s?h.executeService.removeShowHidden(r):h.executeService.addShowHidden(r))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2).isHidden;t.xp6(1),t.hij(" ",e?"Unhide show":"Hide show"," ")}}function We(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,qe,2,1,"ng-container",5),t.ALo(2,"async"),t.TgZ(3,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().show,s=t.oxw();return t.KtG(s.executeService.addShow(a,{showConfirm:!0}))}),t._uU(4," Mark as seen "),t.qZA(),t.YNc(5,ze,2,1,"button",7),t.YNc(6,je,2,1,"button",7),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().show,s=t.oxw();return t.KtG(s.executeService.removeShow(a))}),t._uU(8,"Remove show"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(),i=e.isFavorite,a=e.isHidden,s=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,s.listService.lists.$)),t.xp6(4),t.Q6J("ngIf",void 0!==i),t.xp6(1),t.Q6J("ngIf",void 0!==a)}}function Ke(n,o){1&n&&t.YNc(0,We,9,5,"ng-container",5),2&n&&t.Q6J("ngIf",o.show)}const Xe=function(){return{}};class yt extends J.X{constructor(o,e,i,a,s,r,h,u,f,p,C){super(),this.showService=o,this.infoService=e,this.tmdbService=i,this.dialogService=a,this.snackBar=s,this.listService=r,this.executeService=h,this.activatedRoute=u,this.router=f,this.authService=p,this.cdr=C,this.pageState=new L.X(l.Gu.LOADING),this.paths=m}ngOnInit(){var e,o=this;this.activatedRoute.data.pipe((0,_.R)(this.destroy$)).subscribe(({showInfos:e})=>{this.cdr.markForCheck(),this.showsInfos=e}),this.infoService.getShowsFilteredAndSorted$().pipe((0,_.R)(this.destroy$)).subscribe({next:(e=(0,P.Z)(function*(i){o.cdr.markForCheck(),o.pageState.next(l.Gu.SUCCESS),o.showsInfos=i,console.debug("showsInfos",o.showsInfos)}),function(a){return e.apply(this,arguments)}),error:e=>(0,$.q)(e,this.snackBar,this.pageState)})}static#t=this.\u0275fac=function(e){return new(e||yt)(t.Y36(R.X),t.Y36(K),t.Y36(G.U),t.Y36(ae.x),t.Y36(Y.ux),t.Y36(rt.X),t.Y36(X.V),t.Y36(v.gz),t.Y36(v.F0),t.Y36(ct.e),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:yt,selectors:[["t-shows-page"]],features:[t.qOj],decls:10,vars:15,consts:[[3,"loadingState"],[3,"isLoggedIn","showsInfos","withEpisode","withEpisodesCount","withProgressbar","menu","back","addFavorite","removeFavorite"],["mat-fab","","color","primary","aria-label","Add show to watchlist",1,"fab",3,"routerLink"],["menu","matMenu"],["matMenuContent",""],[4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0)(1,"t-shows",1),t.NdJ("addFavorite",function(s){return i.showService.addFavorite(s)})("removeFavorite",function(s){return i.showService.removeFavorite(s)}),t.ALo(2,"async"),t.qZA()(),t.TgZ(3,"a",2),t.ALo(4,"ngGenericPipe"),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()(),t.TgZ(7,"mat-menu",null,3),t.YNc(9,Ke,1,1,"ng-template",4),t.qZA()),2&e){const a=t.MAs(8);t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(2,9,i.authService.isLoggedIn$))("showsInfos",i.showsInfos)("withEpisode",!0)("withEpisodesCount",!0)("withProgressbar",!0)("menu",a)("back",i.router.url),t.xp6(2),t.Q6J("routerLink",t.xi3(4,11,t.DdM(14,Xe),i.paths.addShow))}},dependencies:[d.O5,v.rH,N.EX,V.Hw,U.VK,U.OP,U.KA,D.N,tt.j,d.Ov,q.a],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}"],changeDetection:0})}var dt=c(7579),Ve=c(3151),I=c(3900),y=c(9646),se=c(6451),ht=c(262);function we(n=0){return new Promise(o=>{window.setTimeout(()=>{o()},n)})}var A=c(5022),T=c(4006),z=c(9549),re=c(4144),O=c(1281),w=c(3238),pt=c(2687),ti=c(5698),Ct=c(8675),E=c(9521),be=c(445);function ei(n,o){1&n&&(t.TgZ(0,"span",8),t.Hsn(1,1),t.qZA())}function ii(n,o){1&n&&(t.TgZ(0,"span",9),t.Hsn(1,2),t.qZA())}const ni=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],oi=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"],ce=["*"],Ce=new t.OlP("mat-chips-default-options"),Se=new t.OlP("MatChipAvatar"),Ie=new t.OlP("MatChipTrailingIcon"),ke=new t.OlP("MatChipRemove"),St=new t.OlP("MatChip");class fi{}const vi=(0,w.sb)(fi,-1);let et=(()=>{class n extends vi{constructor(e,i){super(),this._elementRef=e,this._parentChip=i,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this._allowFocusWhenDisabled=!1,"BUTTON"===e.nativeElement.nodeName&&e.nativeElement.setAttribute("type","button")}get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=(0,O.Ig)(e)}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===E.K5||e.keyCode===E.L_)&&!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(St))},n.\u0275dir=t.lG2({type:n,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(e,i){1&e&&t.NdJ("click",function(s){return i._handleClick(s)})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(t.uIk("tabindex",i._getTabindex())("disabled",i._getDisabledAttribute())("aria-disabled",i.disabled),t.ekj("mdc-evolution-chip__action--primary",i._isPrimary)("mdc-evolution-chip__action--presentational",i._isPrimary)("mdc-evolution-chip__action--trailing",!i._isPrimary))},inputs:{disabled:"disabled",tabIndex:"tabIndex",isInteractive:"isInteractive",_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},features:[t.qOj]}),n})(),yi=0;const Ci=(0,w.sb)((0,w.pj)((0,w.Kr)((0,w.Id)(class{constructor(n){this._elementRef=n}})),"primary"),-1);let j=(()=>{class n extends Ci{constructor(e,i,a,s,r,h,u,f){super(i),this._changeDetectorRef=e,this._ngZone=a,this._focusMonitor=s,this._globalRippleOptions=u,this._isRippleCentered=!1,this._onFocus=new dt.x,this._onBlur=new dt.x,this.role=null,this._hasFocusInternal=!1,this.id="mat-mdc-chip-"+yi++,this.ariaLabel=null,this._removable=!0,this._highlighted=!1,this.removed=new t.vpe,this.destroyed=new t.vpe,this.basicChipAttrName="mat-basic-chip";const p=i.nativeElement;this._document=r,this._animationsDisabled="NoopAnimations"===h,this._isBasicChip=p.hasAttribute(this.basicChipAttrName)||p.tagName.toLowerCase()===this.basicChipAttrName,null!=f&&(this.tabIndex=parseInt(f)??this.defaultTabIndex),this._monitorFocus()}_hasFocus(){return this._hasFocusInternal}get value(){return void 0!==this._value?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get removable(){return this._removable}set removable(e){this._removable=(0,O.Ig)(e)}get highlighted(){return this._highlighted}set highlighted(e){this._highlighted=(0,O.Ig)(e)}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!(!this.trailingIcon&&!this.removeIcon)}_handleKeydown(e){(e.keyCode===E.ZH||e.keyCode===E.yY)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(i=>{const a=i._elementRef.nativeElement;return a===e||a.contains(e)})}_getActions(){const e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const i=null!==e;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):this._ngZone.onStable.pipe((0,ti.q)(1)).subscribe(()=>this._ngZone.run(()=>this._onBlur.next({chip:this}))))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(pt.tE),t.Y36(d.K0),t.Y36(t.QbO,8),t.Y36(w.Y2,8),t.$8M("tabindex"))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-basic-chip"],["mat-chip"]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,Se,5),t.Suo(a,Ie,5),t.Suo(a,ke,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.leadingIcon=s.first),t.iGM(s=t.CRH())&&(i.trailingIcon=s.first),t.iGM(s=t.CRH())&&(i.removeIcon=s.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(w.wG,5),t.Gf(et,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.ripple=a.first),t.iGM(a=t.CRH())&&(i.primaryAction=a.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:30,hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(s){return i._handleKeydown(s)}),2&e&&(t.Ikx("id",i.id),t.uIk("role",i.role)("tabindex",i.role?i.tabIndex:null)("aria-label",i.ariaLabel),t.ekj("mdc-evolution-chip",!i._isBasicChip)("mdc-evolution-chip--disabled",i.disabled)("mdc-evolution-chip--with-trailing-action",i._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",i.leadingIcon)("mdc-evolution-chip--with-primary-icon",i.leadingIcon)("mdc-evolution-chip--with-avatar",i.leadingIcon)("mat-mdc-chip-with-avatar",i.leadingIcon)("mat-mdc-chip-highlighted",i.highlighted)("mat-mdc-chip-disabled",i.disabled)("mat-mdc-basic-chip",i._isBasicChip)("mat-mdc-standard-chip",!i._isBasicChip)("mat-mdc-chip-with-trailing-icon",i._hasTrailingIcon())("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",id:"id",ariaLabel:["aria-label","ariaLabel"],value:"value",removable:"removable",highlighted:"highlighted"},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[t._Bn([{provide:St,useExisting:n}]),t.qOj],ngContentSelectors:oi,decls:9,vars:6,consts:[["matRipple","",1,"mat-mdc-chip-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],["class","mdc-evolution-chip__graphic mat-mdc-chip-graphic",4,"ngIf"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],["class","mdc-evolution-chip__cell mdc-evolution-chip__cell--trailing",4,"ngIf"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(e,i){1&e&&(t.F$t(ni),t._UZ(0,"span",0)(1,"span",1),t.TgZ(2,"span",2)(3,"div",3),t.YNc(4,ei,2,0,"span",4),t.TgZ(5,"span",5),t.Hsn(6),t._UZ(7,"span",6),t.qZA()()(),t.YNc(8,ii,2,0,"span",7)),2&e&&(t.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i._isRippleCentered)("matRippleTrigger",i._elementRef.nativeElement),t.xp6(3),t.Q6J("isInteractive",!1),t.xp6(1),t.Q6J("ngIf",i.leadingIcon),t.xp6(4),t.Q6J("ngIf",i._hasTrailingIcon()))},dependencies:[d.O5,w.wG,et],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{overflow-x:hidden}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mdc-evolution-chip__action--primary:before{box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1}.mdc-evolution-chip--touch{margin-top:8px;margin-bottom:8px}.mdc-evolution-chip__action-touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-evolution-chip__text-label{white-space:nowrap;user-select:none;text-overflow:ellipsis;overflow:hidden}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mdc-evolution-chip__checkmark-background{opacity:0}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__graphic{transition:width 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark{transition:opacity 50ms 0ms linear,transform 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-50%, -50%)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@keyframes mdc-evolution-chip-enter{from{transform:scale(0.8);opacity:.4}to{transform:scale(1);opacity:1}}.mdc-evolution-chip--enter{animation:mdc-evolution-chip-enter 100ms 0ms cubic-bezier(0, 0, 0.2, 1)}@keyframes mdc-evolution-chip-exit{from{opacity:1}to{opacity:0}}.mdc-evolution-chip--exit{animation:mdc-evolution-chip-exit 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-evolution-chip--hidden{opacity:0;pointer-events:none;transition:width 150ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-standard-chip .mdc-evolution-chip__checkmark{height:20px;width:20px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:24px}.mdc-evolution-chip--with-avatar .mdc-evolution-chip__graphic{height:24px;width:24px;font-size:24px}.mdc-evolution-chip--with-avatar .mdc-evolution-chip__icon--primary{height:24px;width:24px;font-size:24px}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px);height:var(--mdc-chip-container-height, 32px)}.mat-mdc-standard-chip .mdc-evolution-chip__ripple{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius, 14px 14px 14px 14px)}.mat-mdc-standard-chip.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:var(--mdc-chip-with-avatar-avatar-size, 28px)}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{height:var(--mdc-chip-with-avatar-avatar-size, 28px);width:var(--mdc-chip-with-avatar-avatar-size, 28px);font-size:var(--mdc-chip-with-avatar-avatar-size, 28px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-outline-width, 1px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-outline-width, 1px)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-selected-outline-width, 0)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--selected) .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-unselected-outline-width, 1px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color, transparent)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color, currentColor)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{height:var(--mdc-chip-with-icon-icon-size, 18px);width:var(--mdc-chip-with-icon-icon-size, 18px);font-size:var(--mdc-chip-with-icon-icon-size, 18px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, currentColor)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, currentColor)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-mdc-standard-chip .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:.4}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary{width:100%}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{opacity:.04}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{opacity:.12}.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative}.mat-mdc-chip-action-label{text-align:left}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-chip-remove{opacity:.54}.mat-mdc-chip-remove:focus{opacity:1}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px) * -1);left:8px;right:8px}.mat-mdc-chip-remove .mat-icon{width:inherit;height:inherit;font-size:inherit;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})();class Si{constructor(o){}}const Ii=(0,w.sb)(Si);let kt=(()=>{class n extends Ii{constructor(e,i,a){super(e),this._elementRef=e,this._changeDetectorRef=i,this._dir=a,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new dt.x,this._defaultRole="presentation",this._disabled=!1,this._explicitRole=null,this._chipActions=new t.n_E}get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,O.Ig)(e),this._syncChipsState()}get empty(){return 0===this._chips.length}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(e=>{e.disabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){const e=this.tabIndex;-1!==this.tabIndex&&(this.tabIndex=-1,setTimeout(()=>{this.tabIndex=e,this._changeDetectorRef.markForCheck()}))}_getChipStream(e){return this._chips.changes.pipe((0,Ct.O)(null),(0,I.w)(()=>(0,se.T)(...this._chips.map(e))))}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList&&i.classList.contains("mdc-evolution-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe((0,Ct.O)(this._chips)).subscribe(e=>{const i=[];e.forEach(a=>a._getActions().forEach(s=>i.push(s))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new pt.Em(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe((0,_.R)(this._destroyed)).subscribe(({chip:e})=>{const i=e._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe((0,_.R)(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe((0,Ct.O)(null),(0,_.R)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe((0,_.R)(this._destroyed)).subscribe(e=>{const a=this._chips.toArray().indexOf(e.chip);this._isValidIndex(a)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=a)})}_redirectDestroyedChipFocus(){if(null!=this._lastDestroyedFocusedChipIndex){if(this._chips.length){const e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[e];i.disabled?1===this._chips.length?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(be.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-chip-set"]],contentQueries:function(e,i,a){if(1&e&&t.Suo(a,j,5),2&e){let s;t.iGM(s=t.CRH())&&(i._chips=s)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(s){return i._handleKeydown(s)}),2&e&&t.uIk("role",i.role)},inputs:{disabled:"disabled",role:"role"},features:[t.qOj],ngContentSelectors:ce,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"span",0),t.Hsn(1),t.qZA())},styles:[".mdc-evolution-chip-set{display:flex}.mdc-evolution-chip-set:focus{outline:none}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mdc-evolution-chip-set--overflow .mdc-evolution-chip-set__chips{flex-flow:nowrap}.mdc-evolution-chip-set .mdc-evolution-chip-set__chips{margin-left:-8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip-set__chips,.mdc-evolution-chip-set .mdc-evolution-chip-set__chips[dir=rtl]{margin-left:0;margin-right:-8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-left:8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip,.mdc-evolution-chip-set .mdc-evolution-chip[dir=rtl]{margin-left:0;margin-right:8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-top:4px;margin-bottom:4px}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0}),n})(),Oi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[w.rD,{provide:Ce,useValue:{separatorKeyCodes:[E.K5]}}],imports:[w.BQ,d.ez,w.si,w.BQ]}),n})();function Fi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.changeShowsSelection(s))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("highlighted",e.slug===i.activeSlug),t.xp6(1),t.hij(" ",e.name," ")}}function Ni(n,o){if(1&n&&(t.TgZ(0,"mat-chip-set",7),t.YNc(1,Fi,2,2,"mat-chip",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chips)}}class lt extends J.X{constructor(o,e,i,a,s,r,h,u,f){super(),this.showService=o,this.tmdbService=e,this.router=i,this.route=a,this.listService=s,this.snackBar=r,this.executeService=h,this.authService=u,this.cdr=f,this.pageState=new L.X(l.Gu.LOADING),this.searchValue=null,this.chips=[{name:"Trending",slug:"trending",fetch:this.showService.fetchTrendingShows().pipe((0,M.U)(p=>p.map(C=>C.show)))},{name:"Popular",slug:"popular",fetch:this.showService.fetchPopularShows()},{name:"Recommended",slug:"recommended",fetch:this.showService.fetchRecommendedShows().pipe((0,M.U)(p=>p.map(C=>C.show)))}],this.defaultSlug="trending",this.activeSlug="trending",this.nextShows$=new dt.x}ngOnInit(){var o=this;return(0,P.Z)(function*(){o.route.queryParams.pipe((0,M.U)(e=>Di.parse(e)),(0,_.R)(o.destroy$)).subscribe(function(){var e=(0,P.Z)(function*(i){o.cdr.markForCheck(),o.searchValue=i.q??null,o.activeSlug=i.slug??o.defaultSlug,o.searchValue?yield o.searchForShow(o.searchValue):yield o.getShowInfos(o.chips.find(a=>a.slug===o.activeSlug)?.fetch)});return function(i){return e.apply(this,arguments)}}())})()}ngOnDestroy(){super.ngOnDestroy(),this.nextShows$.complete()}searchForShow(o){var e=this;return(0,P.Z)(function*(){const i=e.showService.fetchSearchForShows(o).pipe((0,M.U)(a=>a.map(s=>s.show)));yield e.getShowInfos(i)})()}getShowInfos(o){var e=this;return(0,P.Z)(function*(){if(!o)return;e.nextShows$.next(),e.pageState.next(l.Gu.LOADING),e.showsInfos=void 0,yield we();const i=o.pipe((0,Ve.d)());i.pipe((0,I.w)(a=>(0,x.a)([e.showService.showsProgress.$,e.showService.getShowsWatched$(),e.listService.watchlist.$,(0,y.of)(a)])),(0,M.U)(([a,s,r,h])=>{e.showsInfos=e.showsInfos?e.showsInfos.map(u=>e.getShowInfo(u,a,s,r,void 0)):h.map(u=>e.getShowInfo(void 0,a,s,r,u)),console.debug("showsInfos",e.showsInfos),e.pageState.next(l.Gu.SUCCESS)}),(0,_.R)(e.nextShows$),(0,_.R)(e.destroy$)).subscribe({next:()=>e.cdr.markForCheck(),error:a=>(0,$.q)(a,e.snackBar,e.pageState)}),i.pipe((0,I.w)(a=>(0,se.T)(...a.map(s=>e.tmdbService.getTmdbShow$(s,{fetch:!0}).pipe((0,ht.K)(()=>(0,y.of)(void 0)))))),(0,M.U)(a=>{!a||!e.showsInfos||(e.showsInfos=e.showsInfos.map(s=>s.show?.ids.tmdb!==a.id?s:{...s,tmdbShow:a}))}),(0,_.R)(e.nextShows$),(0,_.R)(e.destroy$)).subscribe({next:()=>e.cdr.markForCheck(),error:a=>(0,$.q)(a,e.snackBar,e.pageState)})})()}getShowInfo(o,e,i,a,s){const r=s??o?.show;return{...o,show:r,showProgress:r&&e[r.ids.trakt],showWatched:i.find(h=>h.show.ids.trakt===r?.ids.trakt),isWatchlist:!!a?.find(h=>h.show.ids.trakt===r?.ids.trakt)}}searchSubmitted(o){var e=this;return(0,P.Z)(function*(){const i=o.target?.querySelector('input[type="search"]')?.value;yield e.router.navigate([],{queryParamsHandling:"merge",queryParams:i?{q:i}:void 0})})()}changeShowsSelection(o){var e=this;return(0,P.Z)(function*(){yield e.router.navigate([],{queryParamsHandling:"merge",queryParams:{slug:o.slug}})})()}static#t=this.\u0275fac=function(e){return new(e||lt)(t.Y36(R.X),t.Y36(G.U),t.Y36(v.F0),t.Y36(v.gz),t.Y36(rt.X),t.Y36(Y.ux),t.Y36(X.V),t.Y36(ct.e),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:lt,selectors:[["t-add-show"]],features:[t.qOj],decls:10,vars:11,consts:[[1,"search-form",3,"ngSubmit"],["appearance","fill","color","accent",1,"form-field"],["matInput","","type","search","enterkeyhint","search","name","search","data-test-id","add-show-search",3,"value","keyup.enter"],["searchInput",""],["aria-label","Show selection","class","show-selection",4,"ngIf"],[3,"loadingState"],[3,"isLoggedIn","showsInfos","withYear","withEpisodesCount","withAddButtons","back","add","remove"],["aria-label","Show selection",1,"show-selection"],["color","accent",3,"highlighted","click",4,"ngFor","ngForOf"],["color","accent",3,"highlighted","click"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(r){return i.searchSubmitted(r)}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search shows..."),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("keyup.enter",function(){t.CHM(a);const r=t.MAs(5);return t.KtG(r.blur())}),t.qZA()()(),t.YNc(6,Ni,2,1,"mat-chip-set",4),t.TgZ(7,"t-loading",5)(8,"t-shows",6),t.NdJ("add",function(r){return i.executeService.addToWatchlist(r)})("remove",function(r){return i.executeService.removeFromWatchlist(r)}),t.ALo(9,"async"),t.qZA()()}2&e&&(t.xp6(4),t.Q6J("value",i.searchValue),t.xp6(2),t.Q6J("ngIf",!i.searchValue),t.xp6(1),t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(9,9,i.authService.isLoggedIn$))("showsInfos",i.showsInfos)("withYear",!0)("withEpisodesCount",!0)("withAddButtons",!0)("back",i.router.url))},dependencies:[d.sg,d.O5,T._Y,T.JL,T.F,z.KE,z.hX,re.Nt,j,kt,D.N,tt.j,d.Ov],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}.search-form[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]{width:100%}.show-selection[_ngcontent-%COMP%]{margin-top:-1.34375rem;margin-bottom:.75rem;display:inline-block}"],changeDetection:0})}const Di=A.z.object({q:A.z.string().optional(),slug:A.z.string().optional()}),Yi=["searchInput"];class Tt extends J.X{constructor(o,e,i,a,s,r){super(),this.showService=o,this.tmdbService=e,this.router=i,this.route=a,this.snackBar=s,this.cdr=r,this.pageState=new L.X(l.Gu.LOADING)}ngOnInit(){var e,o=this;this.tmdbService.getTmdbShows$().pipe((0,_.R)(this.destroy$)).subscribe(e=>{this.cdr.markForCheck(),this.tmdbShows=e}),this.route.queryParams.pipe((0,M.U)(e=>Ji.parse(e)),(0,_.R)(this.destroy$)).subscribe({next:(e=(0,P.Z)(function*(i){o.cdr.markForCheck(),o.showsInfos=void 0,o.searchValue=i.q,o.search(o.searchValue),o.pageState.next(l.Gu.SUCCESS),o.searchValue||o.searchInput?.focus?.()}),function(a){return e.apply(this,arguments)}),error:e=>(0,$.q)(e,this.snackBar,this.pageState)})}search(o){var i,e=this;!o||(this.showsInfos=void 0,this.showService.searchForAddedShows$(o).subscribe({next:(i=(0,P.Z)(function*(a){e.cdr.markForCheck(),a.forEach(s=>{e.showsInfos||(e.showsInfos=[]),e.showsInfos.push({show:s,tmdbShow:s.ids.tmdb?e.tmdbShows?.[s.ids.tmdb]:void 0})}),console.debug("showsInfos",e.showsInfos),e.pageState.next(l.Gu.SUCCESS)}),function(s){return i.apply(this,arguments)}),error:i=>(0,$.q)(i,this.snackBar,this.pageState)}))}searchByNavigating(){var o=this;return(0,P.Z)(function*(){yield o.router.navigate([],{queryParams:{q:o.searchValue??null},replaceUrl:!0})})()}static#t=this.\u0275fac=function(e){return new(e||Tt)(t.Y36(R.X),t.Y36(G.U),t.Y36(v.F0),t.Y36(v.gz),t.Y36(Y.ux),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:Tt,selectors:[["t-search"]],viewQuery:function(e,i){if(1&e&&t.Gf(Yi,5),2&e){let a;t.iGM(a=t.CRH())&&(i.searchInput=a.first)}},features:[t.qOj],decls:8,vars:5,consts:[[1,"search-form"],["appearance","fill","color","accent",1,"form-field"],["matInput","","type","search","enterkeyhint","search","name","searchValue","cdkTrapFocus","","autocomplete","off","data-test-id","search",3,"ngModel","cdkTrapFocusAutoCapture","ngModelChange","keyup.enter"],["searchInput",""],[3,"loadingState"],[3,"showsInfos","back"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search added shows..."),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("ngModelChange",function(r){return i.searchValue=r})("keyup.enter",function(){t.CHM(a);const r=t.MAs(5);return t.KtG(r.blur())})("ngModelChange",function(){return i.searchByNavigating()}),t.qZA()()(),t.TgZ(6,"t-loading",4),t._UZ(7,"t-shows",5),t.qZA()}2&e&&(t.xp6(4),t.Q6J("ngModel",i.searchValue)("cdkTrapFocusAutoCapture",!0),t.xp6(2),t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("back",i.router.url))},dependencies:[T._Y,T.Fj,T.JJ,T.JL,T.On,T.F,z.KE,z.hX,re.Nt,pt.mK,D.N,tt.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}.search-form[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}const Ji=A.z.object({q:A.z.string().optional()});var $i=c(101);class Mt extends J.X{constructor(o,e,i,a,s,r){super(),this.episodeService=o,this.snackBar=e,this.listService=i,this.configService=a,this.router=s,this.cdr=r,this.pageState=new L.X(l.Gu.LOADING),this.showsInfosAll=new L.X(void 0)}ngOnInit(){this.episodeService.getUpcomingEpisodeInfos$(198).pipe((0,_.R)(this.destroy$)).subscribe({next:o=>{this.cdr.markForCheck();let e=this.showsInfosAll.value;e||(e=[]),e.push(...o),this.showsInfosAll.next(e),this.pageState.next(l.Gu.SUCCESS)},error:o=>(0,$.q)(o,this.snackBar,this.pageState)}),(0,x.a)([this.configService.config.$,this.listService.getWatchlistItems$(),this.showsInfosAll]).subscribe(([o,e,i])=>{if(!i)return;const a=i?.filter(s=>{if(!s.show)return!0;const r=this.listService.isWatchlistItem(e,s.show),h=!!o.upcomingFilters.find(p=>!(p.name!==l.ZR.WATCHLIST_ITEM||!p.value)&&("hide"===p.category?r:!r)),u=0===s.nextEpisode?.season,f=!!o.upcomingFilters.find(p=>!(p.name!==l.ZR.SPECIALS||!p.value)&&("hide"===p.category?u:!u));return!(h||f)});(0,$i.Q)(a,this.showsInfos)||(this.cdr.markForCheck(),this.showsInfos=a,console.debug("showsInfos",this.showsInfos))})}static#t=this.\u0275fac=function(e){return new(e||Mt)(t.Y36(st.n),t.Y36(Y.ux),t.Y36(rt.X),t.Y36(ve.E),t.Y36(v.F0),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:Mt,selectors:[["t-upcoming"]],features:[t.qOj],decls:2,vars:6,consts:[[3,"loadingState"],[3,"showsInfos","withEpisode","withLinkToEpisode","withRelativeDate","back"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t._UZ(1,"t-shows",1),t.qZA()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("withEpisode",!0)("withLinkToEpisode",!0)("withRelativeDate",!0)("back",i.router.url))},dependencies:[D.N,tt.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}"],changeDetection:0})}function Bi(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().show,s=t.oxw();return t.KtG(s.executeService.removeFromWatchlist(a))}),t._uU(2," Remove from watchlist "),t.qZA(),t.BQk()}}function Qi(n,o){1&n&&t.YNc(0,Bi,3,0,"ng-container",5),2&n&&t.Q6J("ngIf",o.show)}const Hi=function(){return{}};class At extends J.X{constructor(o,e,i,a,s,r,h){super(),this.tmdbService=o,this.listService=e,this.snackBar=i,this.episodeService=a,this.executeService=s,this.router=r,this.cdr=h,this.pageState=new L.X(l.Gu.LOADING),this.paths=m}ngOnInit(){var e,o=this;(0,x.a)([this.listService.getWatchlistItems$(),this.tmdbService.getTmdbShows$(),this.episodeService.getEpisodes$()]).pipe((0,_.R)(this.destroy$)).subscribe({next:(e=(0,P.Z)(function*([i,a,s]){const r=i.map(h=>({show:h.show,tmdbShow:h.show.ids.tmdb?a[h.show.ids.tmdb]:void 0,isWatchlist:!0,nextEpisode:s[(0,oe.d)(h.show.ids.trakt,1,1)]}));(0,ne.TD)({sort:{by:l.PE.OLDEST_EPISODE},sortOptions:[{}]},r,s),o.cdr.markForCheck(),o.showsInfos=r,console.debug("showsInfos",o.showsInfos),o.pageState.next(l.Gu.SUCCESS)}),function(a){return e.apply(this,arguments)}),error:e=>(0,$.q)(e,this.snackBar,this.pageState)})}static#t=this.\u0275fac=function(e){return new(e||At)(t.Y36(G.U),t.Y36(rt.X),t.Y36(Y.ux),t.Y36(st.n),t.Y36(X.V),t.Y36(v.F0),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:At,selectors:[["t-watchlist"]],features:[t.qOj],decls:9,vars:11,consts:[[3,"loadingState"],[3,"showsInfos","withEpisodesCount","withEpisode","menu","back"],["mat-fab","","color","primary","aria-label","Add show to watchlist",1,"fab",3,"routerLink"],["menu","matMenu"],["matMenuContent",""],[4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0),t._UZ(1,"t-shows",1),t.qZA(),t.TgZ(2,"a",2),t.ALo(3,"ngGenericPipe"),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()(),t.TgZ(6,"mat-menu",null,3),t.YNc(8,Qi,1,1,"ng-template",4),t.qZA()),2&e){const a=t.MAs(7);t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("withEpisodesCount",!0)("withEpisode",!0)("menu",a)("back",i.router.url),t.xp6(1),t.Q6J("routerLink",t.xi3(3,7,t.DdM(10,Hi),i.paths.addShow))}},dependencies:[d.O5,v.rH,N.EX,V.Hw,U.VK,U.OP,U.KA,D.N,tt.j,q.a],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}"],changeDetection:0})}var Et=c(8505),Ri=c(9300),Ee=c(4128),mt=c(136),de=c(3022),k=c(4880),Gi=c(2289),he=c(1481),Ze=c(1884);class W{constructor(o){this.snackBar=o}params$(o,e,i){return o.pipe((0,M.U)(a=>e.parse(a)),(0,Ze.x)(),(0,k.J)("params",this.snackBar,i))}static#t=this.\u0275fac=function(e){return new(e||W)(t.LFG(Y.ux))};static#e=this.\u0275prov=t.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"})}var pe=c(5137);function Ui(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Website"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href",null==e.tmdbShow?null:e.tmdbShow.homepage,t.LSH)}}function qi(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Trakt"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://trakt.tv/shows/"+(null==e.show||null==e.show.ids?null:e.show.ids.slug),t.LSH)}}function zi(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"TMDB"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.themoviedb.org/tv/"+(null==e.show||null==e.show.ids?null:e.show.ids.tmdb),t.LSH)}}function ji(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"IMDB"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://imdb.com/title/"+(null==e.show||null==e.show.ids?null:e.show.ids.imdb),t.LSH)}}function Wi(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"TVDB"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.thetvdb.com/dereferrer/series/"+(null==e.show||null==e.show.ids?null:e.show.ids.tvdb),t.LSH)}}function Ki(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Twitter"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.twitter.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.twitter_id),t.LSH)}}function Xi(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Instagram"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.instagram.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.instagram_id),t.LSH)}}function Vi(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Facebook"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.facebook.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.facebook_id),t.LSH)}}class ut{static#t=this.\u0275fac=function(e){return new(e||ut)};static#e=this.\u0275cmp=t.Xpm({type:ut,selectors:[["t-show-links"]],inputs:{show:"show",tmdbShow:"tmdbShow"},standalone:!0,features:[t.jDz],decls:11,vars:8,consts:[[1,"mat-subtitle-1"],[1,"links"],["mat-stroked-button","","target","_blank","rel","noopener norefferer",3,"href",4,"ngIf"],["mat-stroked-button","","target","_blank","rel","noopener norefferer",3,"href"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Links"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,Ui,2,1,"a",2),t.YNc(4,qi,2,1,"a",2),t.YNc(5,zi,2,1,"a",2),t.YNc(6,ji,2,1,"a",2),t.YNc(7,Wi,2,1,"a",2),t.YNc(8,Ki,2,1,"a",2),t.YNc(9,Xi,2,1,"a",2),t.YNc(10,Vi,2,1,"a",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",null==i.tmdbShow?null:i.tmdbShow.homepage),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.slug),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.tmdb),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.imdb),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.tvdb),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.twitter_id),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.instagram_id),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.facebook_id))},dependencies:[d.ez,d.O5,N.ot,N.zs],styles:[".links[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}"],changeDetection:0})}class Zt{transform(o){return o.map(e=>e.name).join(", ")}static#t=this.\u0275fac=function(e){return new(e||Zt)};static#e=this.\u0275pipe=t.Yjl({name:"genre",type:Zt,pure:!0,standalone:!0})}class Pt{transform(o){return o.map(e=>e.name).join(", ")}static#t=this.\u0275fac=function(e){return new(e||Pt)};static#e=this.\u0275pipe=t.Yjl({name:"createdBy",type:Pt,pure:!0,standalone:!0})}class it{transform(o){return void 0!==o&&(null===o||new Date(o)>new Date)}static#t=this.\u0275fac=function(e){return new(e||it)};static#e=this.\u0275pipe=t.Yjl({name:"isInFuture",type:it,pure:!0,standalone:!0})}function tn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"genre"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Genre: ",t.lcZ(2,1,e.tmdbShow.genres),"")}}function en(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"createdBy"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Created by: ",t.lcZ(2,1,e.tmdbShow.created_by)," ")}}function nn(n,o){1&n&&(t.ynx(0),t._uU(1," First airing "),t.BQk())}function on(n,o){1&n&&t._uU(0,"First aired")}function an(n,o){if(1&n&&(t.TgZ(0,"p",5),t.YNc(1,nn,2,0,"ng-container",2),t.ALo(2,"isInFuture"),t.YNc(3,on,1,0,"ng-template",null,6,t.W1O),t._uU(5),t.ALo(6,"date"),t.qZA()),2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,i.tmdbShow.first_air_date))("ngIfElse",e),t.xp6(4),t.hij(": ",t.xi3(6,5,i.tmdbShow.first_air_date,"d. MMM. yyyy")," ")}}function sn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"number"),t.TgZ(3,"span",7),t._uU(4),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Rating: ",t.xi3(2,2,e.tmdbShow.vote_average,"1.0-1")," "),t.xp6(3),t.hij("(",e.tmdbShow.vote_count," votes)")}}function rn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Runtime: ",e.tmdbShow.episode_run_time[0]+"min"," ")}}function cn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Type: ",e.tmdbShow.type,"")}}function dn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,tn,3,3,"p",4),t.YNc(2,en,3,3,"p",4),t.YNc(3,an,7,8,"p",4),t.YNc(4,sn,5,5,"p",4),t.YNc(5,rn,2,1,"p",4),t.YNc(6,cn,2,1,"p",4),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.tmdbShow.genres.length),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.created_by.length),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.first_air_date),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.vote_count),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.episode_run_time.length),t.xp6(1),t.Q6J("ngIf","Scripted"!==e.tmdbShow.type)}}function hn(n,o){1&n&&(t.TgZ(0,"p",5),t._uU(1,"No details available."),t.qZA())}class gt{constructor(){this.hasDetails=!1}ngOnChanges(o){o.tmdbShow&&(this.hasDetails=Boolean(this.tmdbShow&&(this.tmdbShow.genres.length||this.tmdbShow.created_by.length||this.tmdbShow.first_air_date||this.tmdbShow.vote_count||this.tmdbShow.episode_run_time.length||"Scripted"!==this.tmdbShow.type)))}static#t=this.\u0275fac=function(e){return new(e||gt)};static#e=this.\u0275cmp=t.Xpm({type:gt,selectors:[["t-show-details"]],inputs:{tmdbShow:"tmdbShow"},standalone:!0,features:[t.TTD,t.jDz],decls:6,vars:2,consts:[[1,"mat-subtitle-1"],[1,"details"],[4,"ngIf","ngIfElse"],["noDetails",""],["class","mat-body",4,"ngIf"],[1,"mat-body"],["isInPast",""],[1,"votes"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Details"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,dn,7,6,"ng-container",2),t.YNc(4,hn,2,0,"ng-template",null,3,t.W1O),t.qZA()),2&e){const a=t.MAs(5);t.xp6(3),t.Q6J("ngIf",i.tmdbShow&&i.hasDetails)("ngIfElse",a)}},dependencies:[d.ez,d.O5,d.JJ,d.uU,Zt,Pt,it],styles:[".details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.5rem}@media (min-width: 576px){.details[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:1rem}}.details[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.votes[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}var Pe=c(1629);function pn(n,o){if(1&n&&t._UZ(0,"img",8),2&n){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("ngSrc",i.posterPrefix+e.profile_path)("alt",e.name)}}function ln(n,o){if(1&n&&t._UZ(0,"img",9),2&n){const e=t.oxw().$implicit;t.Q6J("alt",e.name)}}function mn(n,o){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,pn,1,2,"img",4),t.YNc(2,ln,1,1,"ng-template",null,5,t.W1O),t.TgZ(4,"p",6),t._uU(5),t.qZA(),t.TgZ(6,"p",7),t._uU(7),t.qZA()()),2&n){const e=o.$implicit,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.profile_path)("ngIfElse",i),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.roles[0].character)}}class _t{constructor(){this.posterPrefix=mt.m0}static#t=this.\u0275fac=function(e){return new(e||_t)};static#e=this.\u0275cmp=t.Xpm({type:_t,selectors:[["t-show-cast"]],inputs:{cast:"cast"},standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"mat-subtitle-1"],[1,"cast-wrapper"],["class","cast",4,"ngFor","ngForOf"],[1,"cast"],["width","185","height","278","class","cast-profile",3,"ngSrc","alt",4,"ngIf","ngIfElse"],["imgFallback",""],["ticker","",1,"mat-body","cast-name"],["ticker","",1,"mat-body","cast-character"],["width","185","height","278",1,"cast-profile",3,"ngSrc","alt"],["ngSrc","assets/poster.png","width","185","height","278",3,"alt"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Cast"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,mn,8,4,"div",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",i.cast))},dependencies:[d.ez,d.sg,d.O5,d.Zd,Pe.d],styles:[".cast-wrapper[_ngcontent-%COMP%]{display:flex;gap:1rem;overflow:auto}.cast-wrapper[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-shrink:0;width:6rem}@media (min-width: 576px){.cast-wrapper[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]{width:11rem}}.cast-wrapper[_ngcontent-%COMP%]   .cast-profile[_ngcontent-%COMP%]{aspect-ratio:2/3;border-radius:var(--border-radius)}.cast-wrapper[_ngcontent-%COMP%]   .cast-name[_ngcontent-%COMP%], .cast-wrapper[_ngcontent-%COMP%]   .cast-character[_ngcontent-%COMP%]{margin:0}.cast-wrapper[_ngcontent-%COMP%]   .cast-name[_ngcontent-%COMP%]{margin-top:.75rem}.cast-wrapper[_ngcontent-%COMP%]   .cast-character[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}class Lt{transform(o){if(!o)return"...";let e=o.status;return o.networks?.[0]&&(e+=" \xb7 "+o.networks[0].name),e}static#t=this.\u0275fac=function(e){return new(e||Lt)};static#e=this.\u0275pipe=t.Yjl({name:"showSubheading",type:Lt,pure:!0,standalone:!0})}class Ot{transform(o){return function un(n){if(!n.videos)return;const o=[...n.videos.results];return[...n.videos.results].reverse().find(a=>"YouTube"===a.site&&"Trailer"===a.type)||o.find(a=>"YouTube"===a.site&&"Teaser"===a.type)}(o)}static#t=this.\u0275fac=function(e){return new(e||Ot)};static#e=this.\u0275pipe=t.Yjl({name:"getTrailer",type:Ot,pure:!0,standalone:!0})}function gn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",11),t.NdJ("load",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.posterLoaded=!0)})("click",function(){const s=t.CHM(e).ngIf,r=t.oxw(2);return t.KtG(r.showImageFunction(s))})("keyup",function(){const s=t.CHM(e).ngIf,r=t.oxw(2);return t.KtG(r.showImageFunction(s))}),t.qZA()}if(2&n){const e=o.ngIf,i=t.oxw(2);let a;t.Q6J("src",i.posterPrefix+e,t.LSH)("alt",i.tmdbShow||i.show?(null!==(a=null==i.tmdbShow?null:i.tmdbShow.name)&&void 0!==a?a:null==i.show?null:i.show.title)+" Poster":"Poster")}}function _n(n,o){if(1&n&&(t.ynx(0),t.YNc(1,gn,1,2,"img",10),t.BQk()),2&n){const e=t.oxw(),i=t.MAs(4);let a;t.xp6(1),t.Q6J("ngIf",e.posterPrefix&&(e.showWatched&&null!==(a=null==e.tmdbSeason?null:e.tmdbSeason.poster_path)&&void 0!==a?a:null==e.tmdbShow?null:e.tmdbShow.poster_path))("ngIfElse",i)}}function fn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",12),t.NdJ("load",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.posterLoaded=!0)}),t.qZA()}}function vn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isFavorite?a.removeFavorite.emit(a.show):a.addFavorite.emit(a.show))}),t.TgZ(1,"mat-icon",14),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.ekj("remove",!e.isFavorite),t.xp6(2),t.hij(" ",e.isFavorite?"star":"star_outline"," ")}}function wn(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(2),t.Oqu(e)}}function bn(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.ALo(3,"slice"),t.ALo(4,"slice"),t.qZA(),t.TgZ(5,"button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.isMoreOverviewShown=!a.isMoreOverviewShown)}),t._uU(6),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().ngIf,i=t.oxw();t.xp6(2),t.hij(" ",i.isMoreOverviewShown?e:(i.isSmall?t.Dn7(3,2,e,0,i.maxSmallOverviewLength):t.Dn7(4,6,e,0,i.maxLargeOverviewLength))+"..."," "),t.xp6(4),t.hij(" ",i.isMoreOverviewShown?"less":"more"," ")}}function xn(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,wn,3,1,"ng-container",2),t.YNc(2,bn,7,10,"ng-container",2),t.qZA()),2&n){const e=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.isSmall?e.length<i.maxSmallOverviewLength:e.length<i.maxLargeOverviewLength),t.xp6(1),t.Q6J("ngIf",i.isSmall?e.length>=i.maxSmallOverviewLength:e.length>=i.maxLargeOverviewLength)}}function yn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const s=t.CHM(e).ngIf,r=t.oxw(2);return t.KtG(r.showTrailer.emit(s))}),t._uU(1," Trailer "),t.qZA()}}function Cn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.addShow.emit(a.show))}),t._uU(1," Mark show as seen "),t.qZA()}}function Sn(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,Cn,2,0,"button",18),t.ALo(2,"isInFuture"),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.isWatchlist?a.removeFromWatchlist.emit(a.show):a.addToWatchlist.emit(a.show))}),t._uU(4),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.nextEpisode&&!t.lcZ(2,2,e.nextEpisode.first_aired)),t.xp6(3),t.hij(" ",e.isWatchlist?"Remove from watchlist":"Add to watchlist"," ")}}function In(n,o){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,yn,2,0,"button",18),t.ALo(2,"getTrailer"),t.YNc(3,Sn,5,4,"ng-container",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.tmdbShow)),t.xp6(2),t.Q6J("ngIf",e.isLoggedIn&&e.isNewShow)}}class Ft{constructor(){this.addFavorite=new t.vpe,this.removeFavorite=new t.vpe,this.addToWatchlist=new t.vpe,this.removeFromWatchlist=new t.vpe,this.addShow=new t.vpe,this.showTrailer=new t.vpe,this.showImage=new t.vpe,this.posterLoaded=!1,this.isMoreOverviewShown=!1,this.maxSmallOverviewLength=96,this.maxLargeOverviewLength=504}showImageFunction(o){this.showImage.emit({url:this.posterPrefixOriginal+o,name:this.tmdbShow||this.show?(this.tmdbShow?.name??this.show?.title)+" Poster":"Poster"})}static#t=this.\u0275fac=function(e){return new(e||Ft)};static#e=this.\u0275cmp=t.Xpm({type:Ft,selectors:[["t-show-header"]],inputs:{isLoggedIn:"isLoggedIn",tmdbSeason:"tmdbSeason",posterPrefix:"posterPrefix",posterPrefixOriginal:"posterPrefixOriginal",showWatched:"showWatched",tmdbShow:"tmdbShow",nextEpisode:"nextEpisode",show:"show",isFavorite:"isFavorite",isSmall:"isSmall",isNewShow:"isNewShow",isWatchlist:"isWatchlist"},outputs:{addFavorite:"addFavorite",removeFavorite:"removeFavorite",addToWatchlist:"addToWatchlist",removeFromWatchlist:"removeFromWatchlist",addShow:"addShow",showTrailer:"showTrailer",showImage:"showImage"},decls:15,vars:8,consts:[[1,"header"],[1,"poster-wrapper"],[4,"ngIf"],["imgFallback",""],[1,"right"],[1,"mat-body-2","small-text"],[1,"title-wrapper"],[1,"mat-headline-5","title"],["mat-icon-button","","aria-label","Favorite","class","favorite-button",3,"remove","click",4,"ngIf"],["class","button-container",4,"ngIf"],["width","185","height","278","fetchpriority","high","data-test-id","poster-image",3,"src","alt","load","click","keyup",4,"ngIf","ngIfElse"],["width","185","height","278","fetchpriority","high","data-test-id","poster-image",3,"src","alt","load","click","keyup"],["ngSrc","assets/poster.png","width","154","height","231","priority","","alt","Poster",3,"load"],["mat-icon-button","","aria-label","Favorite",1,"favorite-button",3,"click"],[1,"favorite-icon"],[1,"mat-body","overview"],["mat-button","",3,"click"],[1,"button-container"],["class","button","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"button",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,_n,2,2,"ng-container",2),t.YNc(3,fn,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"div",4)(6,"h4",5),t._uU(7),t.ALo(8,"showSubheading"),t.qZA(),t.TgZ(9,"div",6)(10,"h1",7),t._uU(11),t.qZA(),t.YNc(12,vn,3,3,"button",8),t.qZA(),t.YNc(13,xn,3,2,"div",2),t.YNc(14,In,4,4,"div",9),t.qZA()()),2&e){let a;t.xp6(2),t.Q6J("ngIf",i.posterPrefix&&(i.showWatched?null!==(null!==(a=i.tmdbSeason)&&void 0!==a?a:i.tmdbShow):null!==i.tmdbShow)),t.xp6(5),t.Oqu(t.lcZ(8,6,i.tmdbShow)),t.xp6(4),t.Oqu(null==i.tmdbShow?null:i.tmdbShow.name),t.xp6(1),t.Q6J("ngIf",i.tmdbShow&&i.showWatched),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow?null:i.tmdbShow.overview),t.xp6(1),t.Q6J("ngIf",i.show&&i.tmdbShow)}},dependencies:[d.O5,N.lW,N.RK,V.Hw,d.Zd,d.OU,Lt,Ot,it],styles:[".header[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 1fr;gap:1rem}@media (min-width: 576px){.header[_ngcontent-%COMP%]{grid-template-columns:13rem 1fr;gap:3rem}}.poster-wrapper[_ngcontent-%COMP%]{aspect-ratio:2/3;border-radius:var(--border-radius);overflow:hidden;display:flex;place-items:center}.right[_ngcontent-%COMP%]{overflow:hidden}.small-text[_ngcontent-%COMP%]{color:var(--text-color-2);margin-bottom:.5rem;margin-top:0}@media (min-width: 576px){.small-text[_ngcontent-%COMP%]{margin-bottom:1rem}}.title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;margin-bottom:.67em;--icon-size: 1.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]{font-size:2rem;--icon-size: 1.5rem}}.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0;margin-right:.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:.5rem}}.title-wrapper[_ngcontent-%COMP%]   .favorite-button[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);padding:0}.title-wrapper[_ngcontent-%COMP%]   .favorite-button.remove[_ngcontent-%COMP%]{display:none}.title-wrapper[_ngcontent-%COMP%]:hover   .favorite-button.remove[_ngcontent-%COMP%]{display:flex}.title-wrapper[_ngcontent-%COMP%]   .favorite-icon[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);line-height:var(--icon-size)}.overview[_ngcontent-%COMP%]{margin-bottom:.25rem}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1rem}"],changeDetection:0})}var ft=c(4633),Le=c(1521),kn=c(953),Tn=c(833),le=c(3162);function vt(n){if(!n)throw Error("Empty season title");return"Season 0"===n?"Specials":n}class wt{transform(o){return vt(o)}static#t=this.\u0275fac=function(e){return new(e||wt)};static#e=this.\u0275pipe=t.Yjl({name:"seasonTitle",type:wt,pure:!0})}function An(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" (",e.seasonProgress.completed,"/",e.episodesAired,") ")}}function En(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" (",e.season.episode_count," episodes) ")}}function Zn(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"seasonTitle"),t.TgZ(4,"span",2),t.YNc(5,An,2,2,"ng-container",0),t.YNc(6,En,2,1,"ng-container",0),t.qZA()(),t._UZ(7,"mat-progress-bar",3),t.BQk()),2&n){const e=t.oxw();let i;t.xp6(2),t.hij(" ",t.lcZ(3,4,"Season "+(null!==(i=null==e.seasonProgress?null:e.seasonProgress.number)&&void 0!==i?i:null==e.season?null:e.season.season_number))," "),t.xp6(3),t.Q6J("ngIf",e.seasonProgress),t.xp6(1),t.Q6J("ngIf",!e.seasonProgress&&e.season),t.xp6(1),t.Q6J("value",e.seasonProgress&&e.episodesAired?e.seasonProgress.completed/e.episodesAired*100:0)}}class Nt{ngOnChanges(o){(o.seasonProgress||o.seasonEpisodes)&&(this.episodesAired=this.seasonProgress?.aired)}getEpisodesAiredCount(o){return o?o.filter(i=>function Mn(n){return(0,Tn.Z)(1,arguments),(0,kn.Z)(n).getTime()<Date.now()}(new Date(i.first_aired+""))).length:0}static#t=this.\u0275fac=function(e){return new(e||Nt)};static#e=this.\u0275cmp=t.Xpm({type:Nt,selectors:[["t-show-season-item"]],inputs:{seasonProgress:"seasonProgress",seasonsEpisodes:"seasonsEpisodes",season:"season"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mat-body-2","title"],[1,"episodes-text"],["mode","determinate","color","accent","aria-label","Season episodes watched percentage of all season episodes",3,"value"]],template:function(e,i){1&e&&t.YNc(0,Zn,8,6,"ng-container",0),2&e&&t.Q6J("ngIf",i.seasonProgress||i.season)},dependencies:[d.O5,le.pW,wt],styles:["[_nghost-%COMP%]{width:100%;height:100%}.title[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:0}@media (min-width: 576px){.title[_ngcontent-%COMP%]{margin-bottom:1rem}}.episodes-text[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}var me=c(3322);const Oe=function(n,o){return{show:n,season:o}},Fe=function(n){return{back:n}};function Pn(n,o){if(1&n&&(t.TgZ(0,"a",4),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t._UZ(4,"t-show-season-item",5),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,4,t.WLB(9,Oe,t.lcZ(2,7,i.show),e.number+""),i.paths.season))("state",t.VKq(12,Fe,i.back)),t.xp6(4),t.Q6J("seasonProgress",e)("seasonsEpisodes",i.seasonsEpisodes)}}function Ln(n,o){if(1&n&&(t.TgZ(0,"mat-list",2),t.YNc(1,Pn,5,14,"a",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.showProgress.seasons)}}function On(n,o){if(1&n&&(t.TgZ(0,"a",4),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t._UZ(4,"t-show-season-item",6),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,3,t.WLB(8,Oe,t.lcZ(2,6,i.show),e.season_number+""),i.paths.season))("state",t.VKq(11,Fe,i.back)),t.xp6(4),t.Q6J("season",e)}}function Fn(n,o){if(1&n&&(t.TgZ(0,"mat-list"),t.YNc(1,On,5,13,"a",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tmdbShow.seasons)}}class Dt{constructor(){this.paths=m}static#t=this.\u0275fac=function(e){return new(e||Dt)};static#e=this.\u0275cmp=t.Xpm({type:Dt,selectors:[["t-show-seasons"]],inputs:{show:"show",showProgress:"showProgress",seasonsEpisodes:"seasonsEpisodes",tmdbShow:"tmdbShow",back:"back"},decls:2,vars:2,consts:[["class","seasons-list",4,"ngIf"],[4,"ngIf"],[1,"seasons-list"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state",4,"ngFor","ngForOf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state"],[3,"seasonProgress","seasonsEpisodes"],[3,"season"]],template:function(e,i){1&e&&(t.YNc(0,Ln,2,1,"mat-list",0),t.YNc(1,Fn,2,1,"mat-list",1)),2&e&&(t.Q6J("ngIf",i.showProgress),t.xp6(1),t.Q6J("ngIf",i.tmdbShow&&!i.showProgress))},dependencies:[d.sg,d.O5,v.rH,ft.i$,ft.Tg,w.wG,Le.g,Nt,q.a,me.v],styles:[".seasons-list[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"],changeDetection:0})}var Ne=c(1572);function Nn(n,o){1&n&&t.GkF(0)}const De=function(n,o,e){return{show:n,season:o,episode:e}},Ye=function(n){return{back:n}};function Dn(n,o){if(1&n&&(t.TgZ(0,"a",5),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.YNc(3,Nn,1,0,"ng-container",6),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(3);t.Q6J("routerLink",e.show&&e.episode?t.xi3(1,4,t.kEZ(9,De,t.lcZ(2,7,e.show),e.episode.season+"",e.episode.number+""),e.paths.episode):null)("state",t.VKq(13,Ye,e.back)),t.xp6(3),t.Q6J("ngIf",!1)("ngIfElse",i)}}function Yn(n,o){1&n&&t.GkF(0)}function Jn(n,o){if(1&n&&(t.TgZ(0,"div",7),t.YNc(1,Yn,1,0,"ng-container",6),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.withLink)("ngIfElse",i)}}function $n(n,o){if(1&n&&(t.TgZ(0,"span",9),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" \xb7 ",t.xi3(2,1,e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}function Bn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.ALo(3,"number"),t.YNc(4,$n,3,4,"span",8),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.lnq(" S",t.xi3(2,4,e.episode.season,"2.0-0"),"E",t.xi3(3,7,e.episode.number,"2.0-0")," ",e.episode.title," "),t.xp6(3),t.Q6J("ngIf",e.episode.first_aired)}}function Qn(n,o){1&n&&(t.ynx(0),t._uU(1,"\xa0"),t.BQk())}function Hn(n,o){1&n&&(t.TgZ(0,"div",13),t._UZ(1,"mat-spinner",14),t.qZA())}function Rn(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",10),t.YNc(2,Hn,2,0,"div",11),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.episode?null!=a.episodeProgress&&a.episodeProgress.completed?a.removeEpisode.emit({episode:a.episode,show:a.show}):a.addEpisode.emit({episode:a.episode,show:a.show}):null)}),t.ALo(4,"isInFuture"),t._uU(5),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.isSeenLoading),t.xp6(1),t.Q6J("disabled",e.isSeenLoading||!e.episode||t.lcZ(4,3,e.episode.first_aired)),t.xp6(2),t.hij(" ",null!=e.episodeProgress&&e.episodeProgress.completed?"Mark as unseen":"Mark as seen"," ")}}function Gn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Dn,4,15,"a",2),t.YNc(2,Jn,2,2,"div",3),t.TgZ(3,"a",4),t.ALo(4,"ngGenericPipe"),t.ALo(5,"showSlug"),t.YNc(6,Bn,5,10,"ng-container",0),t.YNc(7,Qn,2,0,"ng-container",0),t.qZA(),t.YNc(8,Rn,6,5,"ng-container",0),t.ALo(9,"isInFuture"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.withLink),t.xp6(1),t.Q6J("ngIf",!e.withLink),t.xp6(1),t.Q6J("routerLink",e.show&&e.episode?t.xi3(4,7,t.kEZ(14,De,t.lcZ(5,10,e.show),e.episode.season+"",e.episode.number+""),e.paths.episode):null)("state",t.VKq(18,Ye,e.back)),t.xp6(3),t.Q6J("ngIf",e.episode),t.xp6(1),t.Q6J("ngIf",!e.episode),t.xp6(1),t.Q6J("ngIf",e.isLoggedIn&&(!e.isNewShow||e.isNewShow&&!t.lcZ(9,12,null==e.episode?null:e.episode.first_aired)))}}function Un(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.qZA(),t.TgZ(3,"p",16),t._uU(4,"Source: TMDB"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.episode.overview||"No episode description."," ")}}function qn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",19),t.NdJ("load",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.stillLoaded=!0)})("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showImageFunction())})("keyup",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showImageFunction())}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("src",e.stillPrefix+(null==e.tmdbEpisode?null:e.tmdbEpisode.still_path),t.LSH)}}function zn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,qn,1,1,"img",18),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.tmdbEpisode?null:e.tmdbEpisode.still_path)}}function jn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",20),t.NdJ("load",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.stillLoaded=!0)}),t.qZA()}}function Wn(n,o){if(1&n&&(t.YNc(0,zn,2,1,"ng-container",6),t.YNc(1,jn,1,0,"ng-template",null,17,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.stillPrefix&&(void 0===i.tmdbEpisode||(null==i.tmdbEpisode?null:i.tmdbEpisode.still_path)))("ngIfElse",e)}}class nt{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.showImage=new t.vpe,this.stillLoaded=!1,this.stillPrefix=mt.YY,this.paths=m,this.back=history.state.back}showImageFunction(){this.withLink||this.showImage.emit({url:this.stillPrefix+this.tmdbEpisode?.still_path,name:"Episode still"})}static#t=this.\u0275fac=function(e){return new(e||nt)};static#e=this.\u0275cmp=t.Xpm({type:nt,selectors:[["t-episode"]],inputs:{isLoggedIn:"isLoggedIn",show:"show",episode:"episode",isNewShow:"isNewShow",episodeProgress:"episodeProgress",tmdbEpisode:"tmdbEpisode",isSeenLoading:"isSeenLoading",withLink:"withLink"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode",showImage:"showImage"},standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[4,"ngIf"],["image",""],["class","still-wrapper",3,"routerLink","state",4,"ngIf"],["class","still-wrapper",4,"ngIf"],[1,"mat-body-2","title",3,"routerLink","state"],[1,"still-wrapper",3,"routerLink","state"],[4,"ngIf","ngIfElse"],[1,"still-wrapper"],["class","subtitle",4,"ngIf"],[1,"subtitle"],[1,"button","button-container"],["class","spinner-container",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"spinner-container"],["diameter","24"],[1,"mat-body","description"],[1,"mat-body","source"],["imgFallback",""],["width","1920","height","1080","fetchpriority","high","alt","Episode still","class","still",3,"src","load","click","keyup",4,"ngIf"],["width","1920","height","1080","fetchpriority","high","alt","Episode still",1,"still",3,"src","load","click","keyup"],["ngSrc","assets/still.png","width","800","height","450","priority","","alt","Still",3,"load"]],template:function(e,i){1&e&&(t.YNc(0,Gn,10,20,"ng-container",0),t.YNc(1,Un,5,1,"ng-container",0),t.YNc(2,Wn,3,2,"ng-template",null,1,t.W1O)),2&e&&(t.Q6J("ngIf",null!==i.episode&&i.show),t.xp6(1),t.Q6J("ngIf",i.episode))},dependencies:[d.O5,v.Bz,v.rH,me.v,q.r,q.a,d.uU,d.JJ,it,Ne.Cq,Ne.Ou,d.Zd,N.ot,N.lW],styles:[".still-wrapper[_ngcontent-%COMP%]{aspect-ratio:16/9;margin-bottom:.5rem;overflow:hidden;display:flex;place-items:center}@media (min-width: 576px){.still-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}}.button[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.button.button-container[_ngcontent-%COMP%]{display:inline-block;position:relative;height:2.25rem}.spinner-container[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1;display:flex;align-items:center;justify-content:center}.spinner-container[_ngcontent-%COMP%]     circle{stroke:#e5e5e5}.source[_ngcontent-%COMP%]{color:var(--text-color-2);font-style:italic;margin-bottom:0}.subtitle[_ngcontent-%COMP%]{color:var(--text-color-2)}.description[_ngcontent-%COMP%]{margin-top:.5rem}"],changeDetection:0})}function Kn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" \xb7 ",e.tmdbShow.number_of_episodes," episodes ")}}function Xn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" \xb7 ",e.showProgress.aired-e.showProgress.completed," remaining ")}}function Vn(n,o){if(1&n&&(t.TgZ(0,"span",7),t.YNc(1,Kn,2,1,"ng-container",2),t.YNc(2,Xn,2,1,"ng-container",2),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.tmdbShow&&(!e.showProgress||0===e.showProgress.completed)),t.xp6(1),t.Q6J("ngIf",e.showProgress&&e.showProgress.completed>0&&e.showProgress.aired-e.showProgress.completed)}}function to(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"t-episode",8),t.NdJ("addEpisode",function(a){t.CHM(e);const s=t.oxw(3);return t.KtG(s.addEpisode.emit(a))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("isLoggedIn",e.isLoggedIn)("show",e.show)("episode",e.nextEpisodeTrakt)("tmdbEpisode",e.nextEpisodeTmdb)("episodeProgress",e.nextEpisodeProgress)("isNewShow",e.isNewShow)("isSeenLoading",e.seenLoading===e.state.LOADING)("withLink",!0)}}function eo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"h2",4),t._uU(2," Next episode "),t.YNc(3,Vn,3,2,"span",5),t.qZA(),t.YNc(4,to,1,8,"t-episode",6),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.showProgress||e.tmdbShow),t.xp6(1),t.Q6J("ngIf",e.show&&e.tmdbShow)}}function io(n,o){1&n&&(t.TgZ(0,"h3",9),t._uU(1," No next episode. "),t.qZA())}function no(n,o){if(1&n&&(t.ynx(0),t.YNc(1,eo,5,2,"ng-container",2),t.YNc(2,io,2,0,"h3",3),t.ALo(3,"isShowEnded"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null!==e.nextEpisodeTrakt),t.xp6(1),t.Q6J("ngIf",e.showWatched&&null===e.nextEpisodeTrakt&&!t.lcZ(3,2,e.tmdbShow))}}function oo(n,o){1&n&&(t.TgZ(0,"div",10),t._uU(1,"..."),t.qZA())}class Yt{constructor(){this.addEpisode=new t.vpe,this.state=l.Gu}static#t=this.\u0275fac=function(e){return new(e||Yt)};static#e=this.\u0275cmp=t.Xpm({type:Yt,selectors:[["t-show-next-episode"]],inputs:{isLoggedIn:"isLoggedIn",isLoading:"isLoading",nextEpisodeTrakt:"nextEpisodeTrakt",nextEpisodeTmdb:"nextEpisodeTmdb",nextEpisodeProgress:"nextEpisodeProgress",showProgress:"showProgress",isNewShow:"isNewShow",tmdbShow:"tmdbShow",show:"show",showWatched:"showWatched",seenLoading:"seenLoading"},outputs:{addEpisode:"addEpisode"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nextEpisodeLoading",""],[4,"ngIf"],["class","mat-subtitle-1",4,"ngIf"],[1,"mat-subtitle-1","next-text"],["class","subtitle",4,"ngIf"],[3,"isLoggedIn","show","episode","tmdbEpisode","episodeProgress","isNewShow","isSeenLoading","withLink","addEpisode",4,"ngIf"],[1,"subtitle"],[3,"isLoggedIn","show","episode","tmdbEpisode","episodeProgress","isNewShow","isSeenLoading","withLink","addEpisode"],[1,"mat-subtitle-1"],[1,"loading"]],template:function(e,i){if(1&e&&(t.YNc(0,no,4,4,"ng-container",0),t.YNc(1,oo,2,0,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",!i.isLoading)("ngIfElse",a)}},dependencies:[d.O5,nt,de.t],styles:[".loading[_ngcontent-%COMP%]{background:var(--background-2);padding:1rem;border-radius:var(--border-radius);opacity:.5}.subtitle[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}class Jt{transform(o){return o===l.Gu.ERROR}static#t=this.\u0275fac=function(e){return new(e||Jt)};static#e=this.\u0275pipe=t.Yjl({name:"isError",type:Jt,pure:!0,standalone:!0})}function ao(n,o){1&n&&t._UZ(0,"t-show-cast",7),2&n&&t.Q6J("cast",o.ngIf)}function so(n,o){if(1&n&&(t._UZ(0,"t-show-details",8),t.ALo(1,"async")),2&n){const e=t.oxw();t.Q6J("tmdbShow",t.lcZ(1,1,e.tmdbShow$))}}function ro(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"t-show-next-episode",9),t.NdJ("addEpisode",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.addToHistory(a.episode,a.show))}),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"isError"),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.ALo(12,"async"),t.ALo(13,"async"),t.qZA()}if(2&n){const e=t.oxw();let i,a,s;t.Q6J("isLoggedIn",t.lcZ(1,11,e.authService.isLoggedIn$))("isLoading",null===t.lcZ(2,13,e.nextEpisode$)&&!t.lcZ(3,15,t.lcZ(4,17,e.pageState)))("nextEpisodeTrakt",null==(i=t.lcZ(5,19,e.nextEpisode$))?null:i[0])("nextEpisodeTmdb",null==(a=t.lcZ(6,21,e.nextEpisode$))?null:a[1])("nextEpisodeProgress",null==(s=t.lcZ(7,23,e.nextEpisode$))?null:s[2])("showProgress",t.lcZ(8,25,e.showProgress$))("isNewShow",void 0===t.lcZ(9,27,e.showProgress$))("tmdbShow",t.lcZ(10,29,e.tmdbShow$))("show",t.lcZ(11,31,e.show$))("showWatched",t.lcZ(12,33,e.showWatched$))("seenLoading",t.lcZ(13,35,e.seenLoading))}}function co(n,o){if(1&n&&(t._UZ(0,"t-show-seasons",10),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&n){const e=t.oxw();t.Q6J("show",t.lcZ(1,5,e.show$))("showProgress",t.lcZ(2,7,e.showProgress$))("seasonsEpisodes",t.lcZ(3,9,e.seasonEpisodes$))("tmdbShow",t.lcZ(4,11,e.tmdbShow$))("back",e.back)}}function ho(n,o){if(1&n&&(t._UZ(0,"t-show-links",11),t.ALo(1,"async"),t.ALo(2,"async")),2&n){const e=t.oxw();t.Q6J("show",t.lcZ(1,2,e.show$))("tmdbShow",t.lcZ(2,4,e.tmdbShow$))}}class $t extends J.X{constructor(o,e,i,a,s,r,h,u,f,p,C,at,S,F){super(),this.route=o,this.showService=e,this.tmdbService=i,this.episodeService=a,this.snackBar=s,this.executeService=r,this.observer=h,this.title=u,this.paramService=f,this.seasonService=p,this.listService=C,this.authService=at,this.dialogService=S,this.cdr=F,this.pageState=new L.X(l.Gu.LOADING),this.seenLoading=new L.X(l.Gu.SUCCESS),this.isSmall=!1,this.posterPrefixW185=mt.m0,this.posterPrefixOriginal=mt.YY,this.back=history.state.back,this.params$=this.paramService.params$(this.route.params,po,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState).pipe((0,Et.b)(g=>{this.pageState.next(l.Gu.SUCCESS),this.title.setTitle(`${g.title} - Trakify`)})),this.isWatchlist$=(0,x.a)([this.show$,this.listService.watchlist.$]).pipe((0,M.U)(([g,b])=>!!b?.find(Z=>Z.show.ids.trakt===g.ids.trakt)),(0,k.J)("isWatchlist",this.snackBar,this.pageState)),this.showWatched$=this.show$.pipe((0,I.w)(g=>this.showService.getShowWatched$(g)),(0,k.J)("showWatched",this.snackBar,this.pageState)),this.showProgress$=this.show$.pipe((0,I.w)(g=>this.showService.getShowProgress$(g)),(0,M.U)(g=>{if(g)return{...g,seasons:[...g.seasons].reverse()}}),(0,k.J)("showProgress",this.snackBar,this.pageState)),this.tmdbShow$=this.show$.pipe((0,I.w)(g=>this.tmdbService.getTmdbShow$(g,{fetchAlways:!0})),(0,M.U)(g=>{if(!g)return;const b={...g},Z=b.seasons.findIndex(ie=>0===ie.season_number);return Z>=0&&b.seasons.push(b.seasons.splice(Z,1)[0]),b}),(0,k.J)("tmdbShow",this.snackBar,this.pageState,"An error occurred while fetching the tmdb show")),this.isFavorite$=(0,x.a)([this.show$,this.showService.favorites.$]).pipe((0,M.U)(([g,b])=>!!b?.includes(g.ids.trakt)),(0,k.J)("isFavorite",this.snackBar,this.pageState)),this.nextEpisode$=(0,x.a)([this.tmdbShow$,this.showProgress$,this.showWatched$,this.show$]).pipe((0,I.w)(([g,b,Z,ie])=>{const Ge=(0,de.D)(g),H=b&&null!==b?.next_episode?b?.next_episode?.season:(Ge||null===b?.next_episode)&&Z?null:1,xt=b&&null!==b?.next_episode?b?.next_episode?.number:(Ge||null===b?.next_episode)&&Z?null:1,ge=void 0!==H&&void 0!==xt&&null!==H&&null!==xt;return(0,x.a)([ge?this.episodeService.getEpisode$(ie,H,xt,{sync:!0,fetchAlways:!0}).pipe((0,ht.K)(()=>(0,y.of)(void 0))):(0,y.of)(H),ge?this.tmdbService.getTmdbEpisode$(ie,H,xt,{sync:!0,fetchAlways:!0}).pipe((0,ht.K)(()=>(0,y.of)(void 0))):(0,y.of)(H),ge?(0,y.of)(b?.seasons.find(_e=>_e.number===H)?.episodes?.find(_e=>_e.number===xt)).pipe((0,ht.K)(()=>(0,y.of)(void 0))):(0,y.of)(H)])}),(0,k.J)("nextEpisode",this.snackBar,this.pageState)),this.tmdbSeason$=(0,x.a)([this.show$,this.nextEpisode$]).pipe((0,I.w)(([g,b])=>{const Z=b[0];return Z?this.tmdbService.getTmdbSeason$(g,Z.season,!1,!0):(0,y.of)(void 0)}),(0,k.J)("tmdbSeason",this.snackBar,this.pageState)),this.seasonEpisodes$=(0,x.a)([this.show$,this.tmdbShow$]).pipe((0,Ri.h)(g=>!(0,de.D)(g[1])),(0,I.w)(([g,b])=>b?(0,Ee.D)([...b.seasons.map(Z=>(0,Ee.D)([(0,y.of)(Z.season_number),this.seasonService.getSeasonEpisodes$(g,Z.season_number)]).pipe((0,ht.K)(()=>(0,y.of)([Z.season_number,[]]))))]):(0,y.of)([])),(0,M.U)(g=>Object.fromEntries(g)),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState))}ngOnInit(){this.observer.observe([`(max-width: ${mt.SM})`]).pipe((0,_.R)(this.destroy$)).subscribe(o=>{this.cdr.markForCheck(),this.isSmall=o.matches})}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0)}addToHistory(o,e){var i=this;return(0,P.Z)(function*(){if(!o)throw Error("Episode is empty (addToHistory)");try{yield i.executeService.addEpisode(o,e)}catch(a){(0,$.q)(a,i.snackBar,i.seenLoading)}})()}static#t=this.\u0275fac=function(e){return new(e||$t)(t.Y36(v.gz),t.Y36(R.X),t.Y36(G.U),t.Y36(st.n),t.Y36(Y.ux),t.Y36(X.V),t.Y36(Gi.Yg),t.Y36(he.Dx),t.Y36(W),t.Y36(pe.t),t.Y36(rt.X),t.Y36(ct.e),t.Y36(ae.x),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:$t,selectors:[["t-show"]],features:[t.qOj],decls:22,vars:48,consts:[[1,"container",3,"loadingState"],[3,"isLoggedIn","tmdbSeason","posterPrefix","posterPrefixOriginal","showWatched","tmdbShow","show","nextEpisode","isFavorite","isSmall","isNewShow","isWatchlist","addFavorite","removeFavorite","addToWatchlist","removeFromWatchlist","addShow","showTrailer","showImage"],[3,"cast",4,"ngIf"],[3,"tmdbShow",4,"ngIf"],[3,"isLoggedIn","isLoading","nextEpisodeTrakt","nextEpisodeTmdb","nextEpisodeProgress","showProgress","isNewShow","tmdbShow","show","showWatched","seenLoading","addEpisode",4,"ngIf"],[3,"show","showProgress","seasonsEpisodes","tmdbShow","back",4,"ngIf"],[3,"show","tmdbShow",4,"ngIf"],[3,"cast"],[3,"tmdbShow"],[3,"isLoggedIn","isLoading","nextEpisodeTrakt","nextEpisodeTmdb","nextEpisodeProgress","showProgress","isNewShow","tmdbShow","show","showWatched","seenLoading","addEpisode"],[3,"show","showProgress","seasonsEpisodes","tmdbShow","back"],[3,"show","tmdbShow"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0)(1,"t-show-header",1),t.NdJ("addFavorite",function(s){return i.showService.addFavorite(s)})("removeFavorite",function(s){return i.showService.removeFavorite(s)})("addToWatchlist",function(s){return i.executeService.addToWatchlist(s)})("removeFromWatchlist",function(s){return i.executeService.removeFromWatchlist(s)})("addShow",function(s){return i.executeService.addShow(s)})("showTrailer",function(s){return i.dialogService.showTrailer(s)})("showImage",function(s){return i.dialogService.showImage(s.url,s.name)}),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.qZA(),t.YNc(11,ao,1,1,"t-show-cast",2),t.ALo(12,"async"),t.YNc(13,so,2,3,"t-show-details",3),t.ALo(14,"async"),t.YNc(15,ro,14,37,"t-show-next-episode",4),t.ALo(16,"async"),t.YNc(17,co,5,13,"t-show-seasons",5),t.ALo(18,"async"),t.ALo(19,"async"),t.YNc(20,ho,3,6,"t-show-links",6),t.ALo(21,"async"),t.qZA()),2&e){let a,s,r,h,u,f;t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(2,18,i.authService.isLoggedIn$))("tmdbSeason",t.lcZ(3,20,i.tmdbSeason$))("posterPrefix",i.posterPrefixW185)("posterPrefixOriginal",i.posterPrefixOriginal)("showWatched",t.lcZ(4,22,i.showWatched$))("tmdbShow",t.lcZ(5,24,i.tmdbShow$))("show",t.lcZ(6,26,i.show$))("nextEpisode",null==(a=t.lcZ(7,28,i.nextEpisode$))?null:a[0])("isFavorite",t.lcZ(8,30,i.isFavorite$))("isSmall",i.isSmall)("isNewShow",void 0===t.lcZ(9,32,i.showProgress$))("isWatchlist",t.lcZ(10,34,i.isWatchlist$)),t.xp6(10),t.Q6J("ngIf",null==(s=t.lcZ(12,36,i.tmdbShow$))||null==s.aggregate_credits?null:s.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",null==(r=t.lcZ(14,38,i.tmdbShow$))||null==r.aggregate_credits?null:r.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",null==(h=t.lcZ(16,40,i.tmdbShow$))||null==h.aggregate_credits?null:h.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",(null==(u=t.lcZ(18,42,i.tmdbShow$))||null==u.aggregate_credits?null:u.aggregate_credits.cast)&&t.lcZ(19,44,i.nextEpisode$)),t.xp6(3),t.Q6J("ngIf",null==(f=t.lcZ(21,46,i.tmdbShow$))||null==f.aggregate_credits?null:f.aggregate_credits.cast)}},dependencies:[d.O5,D.N,ut,gt,_t,Ft,Dt,Yt,d.Ov,Jt],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}@media (min-width: 576px){.container[_ngcontent-%COMP%]{gap:3rem}}"],changeDetection:0})}const po=A.z.object({show:A.z.string()});var B=c(7272);function lo(n,o){1&n&&(t.TgZ(0,"h2",6),t._uU(1,"/"),t.qZA())}const mo=function(n){return{back:n}};function uo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"a",4),t._uU(2),t.qZA(),t.YNc(3,lo,2,0,"h2",5),t.BQk()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2);t.xp6(1),t.Q6J("routerLink",e.link)("state",t.VKq(5,mo,a.back))("tickerIf",0===i),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",i!==a.parts.length-1)}}function go(n,o){if(1&n&&(t.ynx(0),t.YNc(1,uo,4,7,"ng-container",3),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.parts)}}function _o(n,o){1&n&&(t.TgZ(0,"span",7),t._uU(1,"\xa0"),t.qZA())}class ot{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||ot)};static#e=this.\u0275cmp=t.Xpm({type:ot,selectors:[["t-breadcrumb"]],inputs:{parts:"parts"},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[1,"breadcrumb-wrapper"],[4,"ngIf"],["class","mat-subtitle-1 part",4,"ngIf"],[4,"ngFor","ngForOf"],["ticker","",1,"mat-subtitle-1","part",3,"routerLink","state","tickerIf"],["class","mat-subtitle-1 divider",4,"ngIf"],[1,"mat-subtitle-1","divider"],[1,"mat-subtitle-1","part"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0),t.YNc(1,go,2,1,"ng-container",1),t.YNc(2,_o,2,0,"span",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.parts),t.xp6(1),t.Q6J("ngIf",!i.parts))},dependencies:[d.O5,d.sg,v.Bz,v.rH,Pe.d],styles:[".breadcrumb-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;white-space:nowrap}.part[_ngcontent-%COMP%]{display:inline-block;margin:0}.divider[_ngcontent-%COMP%]{display:inline-block;margin:0 .5rem;cursor:default}"],changeDetection:0})}function Je(n,o,e){return Math.min(Math.max(n,o),e)}class Bt{transform(o,e,i){if(!o.season||!o.show||!i[0])return"";const a=parseInt(o.season);if(isNaN(a))throw Error("Season number not found (EpisodeLinkWithCounterPipe)");const r=Je(a+e,i.at(0).number,i.at(-1).number);return(0,m.season)({show:o.show,season:r+""})}static#t=this.\u0275fac=function(e){return new(e||Bt)};static#e=this.\u0275pipe=t.Yjl({name:"seasonLinkWithCounter",type:Bt,pure:!0,standalone:!0})}const $e=function(n,o){return{season:n,show:o}},Be=function(n){return{back:n}};class Qt{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||Qt)};static#e=this.\u0275cmp=t.Xpm({type:Qt,selectors:[["t-season-header"]],inputs:{breadcrumbParts:"breadcrumbParts",seasonNumber:"seasonNumber",showSlug:"showSlug",seasonProgress:"seasonProgress",seasons:"seasons"},decls:16,vars:29,consts:[[3,"parts"],[1,"title-wrapper"],[1,"left"],[1,"mat-headline-6","title"],[1,"right"],["mat-icon-button","","aria-label","Previous season","data-test-id","previous-button",3,"routerLink","state","disabled"],["mat-icon-button","","aria-label","Next season","data-test-id","next-button",3,"routerLink","state","disabled"],["mode","determinate","color","accent","aria-label","Season episodes watched percentage",1,"progress-bar",3,"value"]],template:function(e,i){if(1&e&&(t._UZ(0,"t-breadcrumb",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.ALo(5,"seasonTitle"),t.qZA()(),t.TgZ(6,"div",4)(7,"a",5),t.ALo(8,"seasonLinkWithCounter"),t.TgZ(9,"mat-icon"),t._uU(10,"navigate_before"),t.qZA()(),t.TgZ(11,"a",6),t.ALo(12,"seasonLinkWithCounter"),t.TgZ(13,"mat-icon"),t._uU(14,"navigate_next"),t.qZA()()()(),t._UZ(15,"mat-progress-bar",7)),2&e){let a;t.Q6J("parts",i.breadcrumbParts),t.xp6(4),t.hij(" ",t.lcZ(5,9,null!==(a=null==i.seasonProgress?null:i.seasonProgress.title)&&void 0!==a?a:"Season "+i.seasonNumber)," "),t.xp6(3),t.Q6J("routerLink",i.seasons?t.Dn7(8,11,t.WLB(19,$e,i.seasonNumber,i.showSlug),-1,i.seasons):null)("state",t.VKq(22,Be,i.back))("disabled",!!i.seasons&&i.seasonNumber===i.seasons[0].number+""),t.xp6(4),t.Q6J("routerLink",i.seasons?t.Dn7(12,15,t.WLB(24,$e,i.seasonNumber,i.showSlug),1,i.seasons):null)("state",t.VKq(27,Be,i.back))("disabled",!!i.seasons&&i.seasonNumber===i.seasons[i.seasons.length-1].number+""),t.xp6(4),t.Q6J("value",i.seasonProgress?i.seasonProgress.completed/i.seasonProgress.aired*100:0)}},dependencies:[v.rH,le.pW,N.o6,V.Hw,ot,Bt,wt],styles:[".title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0}.title-wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex}.progress-bar[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0})}var ue=c(6709);class Ht{transform(o){return new Date(o?.first_aired+"")}static#t=this.\u0275fac=function(e){return new(e||Ht)};static#e=this.\u0275pipe=t.Yjl({name:"airDate",type:Ht,pure:!0})}class Rt{transform(o,e){return o?.title&&void 0!==o?.number?o.title+" ("+o.number+")":"Episode "+((o?.number??e)+1)}static#t=this.\u0275fac=function(e){return new(e||Rt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeTitleWithIndex",type:Rt,pure:!0})}function fo(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-checkbox",5),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.onClick(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("checked",null==e.episodeProgress?null:e.episodeProgress.completed)}}function vo(n,o){if(1&n&&(t.TgZ(0,"h3",6),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.episode.first_aired,"d. MMM. yyyy")," ")}}class Gt{constructor(){this.i=0,this.add=new t.vpe,this.remove=new t.vpe,this.currentDate=new Date}onClick(o){o.preventDefault(),o.stopPropagation(),this.checkbox?.checked?this.remove.emit(this.episode):this.add.emit(this.episode)}static#t=this.\u0275fac=function(e){return new(e||Gt)};static#e=this.\u0275cmp=t.Xpm({type:Gt,selectors:[["t-season-episode-item"]],viewQuery:function(e,i){if(1&e&&t.Gf(ue.oG,5),2&e){let a;t.iGM(a=t.CRH())&&(i.checkbox=a.first)}},inputs:{isLoggedIn:"isLoggedIn",i:"i",episodeProgress:"episodeProgress",episode:"episode"},outputs:{add:"add",remove:"remove"},decls:8,vars:10,consts:[[1,"wrapper"],["class","checkbox",3,"checked","click",4,"ngIf"],[1,"right-wrapper"],[1,"mat-body-2","title"],["class","mat-body-2 subtitle",4,"ngIf"],[1,"checkbox",3,"checked","click"],[1,"mat-body-2","subtitle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,fo,1,1,"mat-checkbox",1),t.TgZ(2,"div",2),t.ALo(3,"airDate"),t.TgZ(4,"h3",3),t._uU(5),t.ALo(6,"episodeTitleWithIndex"),t.qZA(),t.YNc(7,vo,3,4,"h3",4),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isLoggedIn),t.xp6(1),t.ekj("not-aired",t.lcZ(3,5,i.episode)>i.currentDate),t.xp6(3),t.hij(" ",t.xi3(6,7,i.episode,i.i)," "),t.xp6(2),t.Q6J("ngIf",i.episode&&i.episode.first_aired))},dependencies:[d.O5,ue.oG,d.uU,Ht,Rt],styles:["[_nghost-%COMP%]{width:100%;height:100%}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.right-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}@media (min-width: 576px){.right-wrapper[_ngcontent-%COMP%]{gap:.5rem}}.title[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.subtitle[_ngcontent-%COMP%], .not-aired[_ngcontent-%COMP%]{color:var(--text-color-2)}"],changeDetection:0})}class Ut{transform(o,e){if(o&&e)return o.find(i=>i.number===e.number)}static#t=this.\u0275fac=function(e){return new(e||Ut)};static#e=this.\u0275pipe=t.Yjl({name:"episodeProgress",type:Ut,pure:!0,standalone:!0})}function wo(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"t-season-episode-item",5),t.NdJ("add",function(a){t.CHM(e);const s=t.oxw(3);return t.KtG(s.addEpisode.emit({episode:a,show:s.show}))})("remove",function(a){t.CHM(e);const s=t.oxw(3);return t.KtG(s.removeEpisode.emit({episode:a,show:s.show}))}),t.ALo(1,"episodeProgress"),t.qZA()}if(2&n){const e=t.oxw(),i=e.index,a=e.$implicit,s=t.oxw(2);t.Q6J("i",i)("isLoggedIn",s.isLoggedIn)("episodeProgress",t.xi3(1,4,null==s.seasonProgress?null:s.seasonProgress.episodes,a))("episode",a)}}const bo=function(n,o,e){return{show:n,season:o,episode:e}},xo=function(n){return{back:n}};function yo(n,o){if(1&n&&(t.TgZ(0,"a",3),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t.YNc(4,wo,2,7,"t-season-episode-item",4),t.qZA()()),2&n){const e=o.index,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,3,t.kEZ(8,bo,t.lcZ(2,6,i.show),i.seasonNumber,e+1+""),i.paths.episode))("state",t.VKq(12,xo,i.back)),t.xp6(4),t.Q6J("ngIf",i.show)}}function Co(n,o){if(1&n&&(t.TgZ(0,"mat-list"),t.YNc(1,yo,5,14,"a",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.episodes)}}class qt{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.episodesLoadingState=new L.X(l.Gu.LOADING),this.paths=m,this.back=history.state.back}ngOnChanges(){this.episodes&&this.episodesLoadingState.value===l.Gu.LOADING&&this.episodesLoadingState.next(l.Gu.SUCCESS)}static#t=this.\u0275fac=function(e){return new(e||qt)};static#e=this.\u0275cmp=t.Xpm({type:qt,selectors:[["t-season-episodes"]],inputs:{isLoggedIn:"isLoggedIn",show:"show",seasonNumber:"seasonNumber",seasonProgress:"seasonProgress",episodes:"episodes"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode"},features:[t.TTD],decls:2,vars:2,consts:[[3,"loadingState"],[4,"ngIf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state",4,"ngFor","ngForOf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state"],[3,"i","isLoggedIn","episodeProgress","episode","add","remove",4,"ngIf"],[3,"i","isLoggedIn","episodeProgress","episode","add","remove"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,Co,2,1,"mat-list",1),t.qZA()),2&e&&(t.Q6J("loadingState",i.episodesLoadingState),t.xp6(1),t.Q6J("ngIf",i.episodes&&i.seasonNumber))},dependencies:[d.sg,d.O5,v.rH,ft.i$,ft.Tg,w.wG,D.N,Le.g,Gt,q.a,me.v,Ut],changeDetection:0})}function So(n,o){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"t-season-header",2),t.ALo(2,"async"),t.ALo(3,"async"),t.TgZ(4,"t-season-episodes",3),t.NdJ("addEpisode",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.executeService.addEpisode(a.episode,a.show))})("removeEpisode",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.executeService.removeEpisode(a.episode,a.show))}),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.qZA(),t.BQk()}if(2&n){const e=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("breadcrumbParts",i.breadcrumbParts)("seasonProgress",t.lcZ(2,10,i.seasonProgress$))("seasonNumber",e.season)("showSlug",e.show)("seasons",t.lcZ(3,12,i.seasons$)),t.xp6(3),t.Q6J("isLoggedIn",t.lcZ(5,14,i.authService.isLoggedIn$))("episodes",t.lcZ(6,16,i.seasonEpisodes$))("show",t.lcZ(7,18,i.show$))("seasonNumber",e.season)("seasonProgress",t.lcZ(8,20,i.seasonProgress$))}}class zt extends J.X{constructor(o,e,i,a,s,r,h,u,f){super(),this.route=o,this.snackBar=e,this.showService=i,this.seasonService=a,this.executeService=s,this.title=r,this.paramService=h,this.authService=u,this.cdr=f,this.pageState=new L.X(l.Gu.LOADING),this.paths=m,this.params$=this.paramService.params$(this.route.params,Io,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState),this.seasonProgress$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([p,C])=>(0,B.z)((0,y.of)(null),this.seasonService.getSeasonProgress$(C,parseInt(p.season)))),(0,Et.b)(()=>this.pageState.next(l.Gu.SUCCESS)),(0,k.J)("seasonProgress",this.snackBar,this.pageState)),this.seasons$=this.show$.pipe((0,I.w)(p=>(0,B.z)((0,y.of)(null),this.seasonService.fetchSeasons(p))),(0,k.J)("seasons",this.snackBar,this.pageState)),this.seasonEpisodes$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([p,C])=>(0,B.z)((0,y.of)(null),this.seasonService.getSeasonEpisodes$(C,parseInt(p.season)))),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState))}ngOnInit(){var o=this;(0,x.a)([this.params$,this.show$]).pipe((0,_.R)(this.destroy$)).subscribe(([e,i])=>{this.cdr.markForCheck(),this.breadcrumbParts=[{name:i.title,link:m.show({show:e.show})},{name:vt(`Season ${e.season}`),link:m.season({show:e.show,season:e.season})}]}),(0,x.a)([this.seasons$,this.seasonProgress$]).pipe((0,_.R)(this.destroy$)).subscribe(([e,i])=>{if(!i)return;this.cdr.markForCheck();const a=e?.find(s=>s.number===i.number);this.seasonService.activeSeason$.next(a)}),(0,x.a)([this.params$,this.show$,this.seasonProgress$]).pipe((0,_.R)(this.destroy$)).subscribe(function(){var e=(0,P.Z)(function*([i,a,s]){yield we(),o.cdr.markForCheck(),o.title.setTitle(`${vt(s?.title??`Season ${i.season}`)}\n            - ${a.title}\n            - Trakify`)});return function(i){return e.apply(this,arguments)}}())}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0),this.seasonService.activeSeason$.next(void 0)}static#t=this.\u0275fac=function(e){return new(e||zt)(t.Y36(v.gz),t.Y36(Y.ux),t.Y36(R.X),t.Y36(pe.t),t.Y36(X.V),t.Y36(he.Dx),t.Y36(W),t.Y36(ct.e),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:zt,selectors:[["t-season"]],features:[t.qOj],decls:3,vars:4,consts:[[3,"loadingState"],[4,"ngIf"],[3,"breadcrumbParts","seasonProgress","seasonNumber","showSlug","seasons"],[3,"isLoggedIn","episodes","show","seasonNumber","seasonProgress","addEpisode","removeEpisode"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,So,9,22,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.params$)))},dependencies:[d.O5,D.N,Qt,qt,d.Ov],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}"],changeDetection:0})}const Io=A.z.object({show:A.z.string(),season:A.z.string()});function Qe(n,o){if(!n)return"";const e=n?.title;return e||(o?`Episode ${o}`:"")}class jt{transform(o,e){return Qe(o,e)}static#t=this.\u0275fac=function(e){return new(e||jt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeTitle",type:jt,pure:!0})}class Wt{transform(o,e,i){if(!o.episode||!o.season||!o.show)return"";const a=parseInt(o.episode);if(isNaN(a))throw Error("Episode number not found (EpisodeLinkWithCounterPipe)");const s=a+e,r=Je(s,1,i??(Math.abs(s)||1));return(0,m.episode)({show:o.show,season:o.season,episode:r+""})}static#t=this.\u0275fac=function(e){return new(e||Wt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeLinkWithCounter",type:Wt,pure:!0,standalone:!0})}function ko(n,o){if(1&n&&(t.TgZ(0,"h2",8),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,null==e.episode?null:e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}const He=function(n,o,e){return{episode:n,season:o,show:e}},Re=function(n){return{back:n}};class Kt{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||Kt)};static#e=this.\u0275cmp=t.Xpm({type:Kt,selectors:[["t-episode-header"]],inputs:{breadcrumbParts:"breadcrumbParts",episode:"episode",tmdbEpisode:"tmdbEpisode",episodeProgress:"episodeProgress",episodeNumber:"episodeNumber",seasonNumber:"seasonNumber",showSlug:"showSlug",episodes:"episodes"},decls:16,vars:31,consts:[[3,"parts"],[1,"title-wrapper"],[1,"left"],[1,"mat-headline-5","title"],["class","mat-body-2 subtitle",4,"ngIf"],[1,"right"],["mat-icon-button","","aria-label","Previous episode","data-test-id","previous-button",3,"routerLink","state","disabled"],["mat-icon-button","","aria-label","Next episode","data-test-id","next-button",3,"routerLink","state","disabled"],[1,"mat-body-2","subtitle"]],template:function(e,i){1&e&&(t._UZ(0,"t-breadcrumb",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.ALo(5,"episodeTitle"),t.qZA(),t.YNc(6,ko,3,4,"h2",4),t.qZA(),t.TgZ(7,"div",5)(8,"a",6),t.ALo(9,"episodeLinkWithCounter"),t.TgZ(10,"mat-icon"),t._uU(11,"navigate_before"),t.qZA()(),t.TgZ(12,"a",7),t.ALo(13,"episodeLinkWithCounter"),t.TgZ(14,"mat-icon"),t._uU(15,"navigate_next"),t.qZA()()()()),2&e&&(t.Q6J("parts",i.breadcrumbParts),t.xp6(4),t.hij(" ",t.xi3(5,9,i.episode,null==i.episodeProgress?null:i.episodeProgress.number)," "),t.xp6(2),t.Q6J("ngIf",null==i.episode?null:i.episode.first_aired),t.xp6(2),t.Q6J("routerLink",t.xi3(9,12,t.kEZ(19,He,i.episodeNumber,i.seasonNumber,i.showSlug),-1))("state",t.VKq(23,Re,i.back))("disabled","1"===i.episodeNumber),t.xp6(4),t.Q6J("routerLink",t.Dn7(13,15,t.kEZ(25,He,i.episodeNumber,i.seasonNumber,i.showSlug),1,null==i.episodes?null:i.episodes.length))("state",t.VKq(29,Re,i.back))("disabled",i.episodeNumber===(null==i.episodes?null:i.episodes.length)+""))},dependencies:[d.O5,v.rH,N.o6,V.Hw,ot,d.uU,Wt,jt],styles:[".title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:.5rem}}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--text-color-2);margin:0}.title-wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}function To(n,o){if(1&n&&(t._UZ(0,"t-episode-header",3),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&n){const e=o.ngIf,i=t.oxw();t.Q6J("breadcrumbParts",i.breadcrumbParts)("episode",t.lcZ(1,8,i.episode$))("tmdbEpisode",t.lcZ(2,10,i.tmdbEpisode$))("episodeProgress",t.lcZ(3,12,i.episodeProgress$))("episodeNumber",e.episode)("seasonNumber",e.season)("showSlug",e.show)("episodes",t.lcZ(4,14,i.seasonEpisodes$))}}class Xt extends J.X{constructor(o,e,i,a,s,r,h,u,f,p,C,at){super(),this.route=o,this.tmdbService=e,this.snackBar=i,this.showService=a,this.episodeService=s,this.executeService=r,this.seasonService=h,this.title=u,this.paramService=f,this.authService=p,this.cdr=C,this.dialogService=at,this.pageState=new L.X(l.Gu.LOADING),this.episodeState=new L.X(l.Gu.LOADING),this.seenState=new L.X(l.Gu.SUCCESS),this.state=l.Gu,this.params$=this.paramService.params$(this.route.params,Mo,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState),this.seasonEpisodes$=(0,x.a)([this.params$,this.show$]).pipe((0,Ze.x)((S,F)=>S[0].season===F[0].season),(0,I.w)(([S,F])=>(0,B.z)((0,y.of)(null),this.seasonService.getSeasonEpisodes$(F,parseInt(S.season),!1,!1))),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState)),this.showProgress$=this.show$.pipe((0,I.w)(S=>(0,B.z)((0,y.of)(null),this.showService.getShowProgress$(S))),(0,k.J)("showProgress",this.snackBar,this.pageState)),this.episodeProgress$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([S,F])=>(0,B.z)((0,y.of)(null),this.episodeService.getEpisodeProgress$(F,parseInt(S.season),parseInt(S.episode)))),(0,k.J)("episodeProgress",this.snackBar,this.pageState)),this.episode$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([S,F])=>(0,B.z)((0,y.of)(null),this.episodeService.getEpisode$(F,parseInt(S.season),parseInt(S.episode),{fetchAlways:!0}))),(0,Et.b)(S=>S&&this.episodeState.next(l.Gu.SUCCESS)),(0,k.J)("episode",this.snackBar,this.pageState)),this.tmdbEpisode$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([S,F])=>(0,B.z)((0,y.of)(null),this.tmdbService.getTmdbEpisode$(F,parseInt(S.season),parseInt(S.episode),{fetchAlways:!0}))),(0,Et.b)(()=>this.episodeState.next(l.Gu.SUCCESS)),(0,k.J)("tmdbEpisode",this.snackBar,this.pageState))}ngOnInit(){(0,x.a)([this.episode$,this.episodeProgress$,this.show$,this.params$]).pipe((0,_.R)(this.destroy$)).subscribe(([o,e,i,a])=>{this.cdr.markForCheck(),this.title.setTitle(`${Qe(o,e?.number)}\n            - ${i.title}\n            - ${vt(`Season ${a.season}`)}\n            - Trakify`)}),(0,x.a)([this.params$,this.show$]).pipe((0,_.R)(this.destroy$)).subscribe(([o,e])=>{this.cdr.markForCheck(),this.pageState.next(l.Gu.SUCCESS),this.breadcrumbParts=[{name:e.title,link:m.show({show:o.show})},{name:vt(`Season ${o.season}`),link:m.season({show:o.show,season:o.season})},{name:`Episode ${o.episode}`,link:m.episode({show:o.show,season:o.season,episode:o.episode})}]})}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0)}static#t=this.\u0275fac=function(e){return new(e||Xt)(t.Y36(v.gz),t.Y36(G.U),t.Y36(Y.ux),t.Y36(R.X),t.Y36(st.n),t.Y36(X.V),t.Y36(pe.t),t.Y36(he.Dx),t.Y36(W),t.Y36(ct.e),t.Y36(t.sBO),t.Y36(ae.x))};static#e=this.\u0275cmp=t.Xpm({type:Xt,selectors:[["t-episode-page"]],features:[t.qOj],decls:12,vars:26,consts:[[3,"loadingState"],[3,"breadcrumbParts","episode","tmdbEpisode","episodeProgress","episodeNumber","seasonNumber","showSlug","episodes",4,"ngIf"],[3,"isLoggedIn","show","episode","episodeProgress","isNewShow","tmdbEpisode","isSeenLoading","addEpisode","removeEpisode","showImage"],[3,"breadcrumbParts","episode","tmdbEpisode","episodeProgress","episodeNumber","seasonNumber","showSlug","episodes"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,To,5,16,"t-episode-header",1),t.ALo(2,"async"),t.TgZ(3,"t-loading",0)(4,"t-episode",2),t.NdJ("addEpisode",function(s){return i.executeService.addEpisode(s.episode,s.show,i.seenState)})("removeEpisode",function(s){return i.executeService.removeEpisode(s.episode,s.show,i.seenState)})("showImage",function(s){return i.dialogService.showImage(s.url,s.name)}),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.qZA()()()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,10,i.params$)),t.xp6(2),t.Q6J("loadingState",i.episodeState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(5,12,i.authService.isLoggedIn$))("show",t.lcZ(6,14,i.show$))("episode",t.lcZ(7,16,i.episode$))("episodeProgress",t.lcZ(8,18,i.episodeProgress$))("isNewShow",void 0===t.lcZ(9,20,i.showProgress$))("tmdbEpisode",t.lcZ(10,22,i.tmdbEpisode$))("isSeenLoading",t.lcZ(11,24,i.seenState)===i.state.LOADING))},dependencies:[d.O5,D.N,nt,Kt,d.Ov],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}[_nghost-%COMP%]     .mat-mdc-list-base{margin-left:-1rem;margin-right:-1rem}"],changeDetection:0})}const Mo=A.z.object({show:A.z.string(),season:A.z.string(),episode:A.z.string()});class bt{constructor(o){this.infoService=o}resolve(){return this.infoService.getShowsFilteredAndSorted$()}static#t=this.\u0275fac=function(e){return new(e||bt)(t.LFG(K))};static#e=this.\u0275prov=t.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"})}var Q=c(923),Vt=c(9914),Ao=c(6912);const Eo=[{path:"",component:lt,canActivate:[Ao.y],title:"Shows - Trakify"},{path:(0,Q.E)(m.showsProgress.pattern,m.shows.pattern),component:yt,title:"Shows - Trakify",canActivate:[Vt.e],resolve:{showInfos:bt}},{path:(0,Q.E)(m.addShow.pattern,m.shows.pattern),component:lt,title:"Add Show - Trakify"},{path:(0,Q.E)(m.show.pattern,m.shows.pattern),component:$t,title:"Show - Trakify"},{path:(0,Q.E)(m.season.pattern,m.shows.pattern),component:zt,title:"Season - Trakify"},{path:(0,Q.E)(m.episode.pattern,m.shows.pattern),component:Xt,title:"Episode - Trakify"},{path:(0,Q.E)(m.search.pattern,m.shows.pattern),component:Tt,canActivate:[Vt.e],title:"Search - Trakify"},{path:(0,Q.E)(m.upcoming.pattern,m.shows.pattern),component:Mt,canActivate:[Vt.e],title:"Upcoming - Trakify"},{path:(0,Q.E)(m.watchlist.pattern,m.shows.pattern),component:At,canActivate:[Vt.e],title:"Watchlist - Trakify"}];class te{static#t=this.\u0275fac=function(e){return new(e||te)};static#e=this.\u0275mod=t.oAB({type:te});static#i=this.\u0275inj=t.cJS({imports:[v.Bz.forChild(Eo),v.Bz]})}let Ko=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[w.BQ,d.ez,w.BQ]}),n})();var Xo=c(3848);class ee{static#t=this.\u0275fac=function(e){return new(e||ee)};static#e=this.\u0275mod=t.oAB({type:ee});static#i=this.\u0275inj=t.cJS({imports:[d.ez,te,T.u5,le.Cv,N.ot,Ko,ft.ie,w.si,V.Ps,U.Tx,ue.p9,z.lN,re.c,Xo.Nh,Oi,pt.rt,q.r,D.N,tt.j,nt,ot,ut,gt,_t]})}}}]);