"use strict";(self.webpackChunkseries_tracker=self.webpackChunkseries_tracker||[]).push([[291],{8291:(W,I,i)=>{i.d(I,{k:()=>J});var t=i(5861),h=i(1135),O=i(9841),y=i(2722),g=i(5698),L=i(3900),x=i(2557),w=i(9646),f=i(4128),a=i(5492),p=i(975),S=i(6124),R=i(5606),n=i(4650),B=i(1420),K=i(5046),F=i(858),Z=i(5262),Y=i(5374),j=i(7009),U=i(6895),N=i(1455),u=i(8424),D=i(7392),C=i(3848),E=i(4859);function T(P,A){if(1&P){const _=n.EpF();n.TgZ(0,"a",8),n.NdJ("click",function(){const m=n.CHM(_),v=m.$implicit,M=m.index,o=n.oxw(2);return o.router.navigate([],{queryParams:{slug:v.ids.slug}}),n.KtG(o.activeListIndex=M)}),n._uU(1),n.qZA()}if(2&P){const _=A.$implicit,c=A.index,m=n.oxw(2);n.Q6J("active",m.activeListIndex===c),n.xp6(1),n.hij(" ",_.name," ")}}function b(P,A){if(1&P&&(n.TgZ(0,"nav",6),n.YNc(1,T,2,2,"a",7),n.qZA()),2&P){const _=n.oxw(),c=n.MAs(2);n.Q6J("tabPanel",c),n.xp6(1),n.Q6J("ngForOf",_.lists)}}function Q(P,A){if(1&P){const _=n.EpF();n.TgZ(0,"button",9),n.NdJ("click",function(){n.CHM(_);const m=n.oxw();return n.KtG(m.dialogService.manageListItemsViaDialog(null==m.lists?null:m.lists[m.activeListIndex]))}),n.TgZ(1,"mat-icon"),n._uU(2,"add"),n.qZA()()}}let J=(()=>{class P extends a.H{constructor(_,c,m,v,M,o,l){super(),this.showService=_,this.tmdbService=c,this.router=m,this.route=v,this.listService=M,this.dialogService=o,this.snackBar=l,this.loadingState=new h.X(p.Gu.LOADING)}ngOnInit(){var _=this;(0,O.a)([this.route.queryParams,this.listService.updated]).pipe((0,y.R)(this.destroy$)).subscribe(function(){var c=(0,t.Z)(function*([m]){const v=m.slug;_.lists||_.getLists(v),v&&(yield _.getListItems(v))});return function(m){return c.apply(this,arguments)}}())}getLists(_){var m,c=this;return this.listService.lists$.pipe((0,g.q)(1)).subscribe({next:(m=(0,t.Z)(function*(v){c.lists=v,c.activeListIndex=_&&c.lists.findIndex(M=>M.ids.slug===_)||0,c.activeListIndex>=0&&(yield c.router.navigate([],{queryParamsHandling:"merge",queryParams:{slug:c.lists[c.activeListIndex].ids.slug}})),yield(0,S.D)()}),function(M){return m.apply(this,arguments)}),error:m=>(0,R.q)(m,this.snackBar,this.loadingState)})}getListItems(_){var c=this;return(0,t.Z)(function*(){var m;!_||(c.loadingState.next(p.Gu.LOADING),c.showsInfos=void 0,yield(0,S.D)(),c.listService.getListItems$(_).pipe((0,L.w)(m=>{const v=m?.map(M=>c.tmdbService.getTmdbShow$(M.show.ids).pipe((0,g.q)(1)))??[];return(0,x.$)([(0,w.of)(m),(0,f.D)(v)])}),(0,g.q)(1)).subscribe({next:(m=(0,t.Z)(function*([v,M]){c.showsInfos=v?.map((o,l)=>({show:o.show,tmdbShow:M[l]})),c.loadingState.next(p.Gu.SUCCESS)}),function(M){return m.apply(this,arguments)}),error:m=>(0,R.q)(m,c.snackBar,c.loadingState)}))})()}}return P.\u0275fac=function(_){return new(_||P)(n.Y36(B.X),n.Y36(K.U),n.Y36(F.F0),n.Y36(F.gz),n.Y36(Z.X),n.Y36(Y.x),n.Y36(j.ux))},P.\u0275cmp=n.Xpm({type:P,selectors:[["app-lists"]],features:[n.qOj],decls:7,vars:7,consts:[["mat-tab-nav-bar","",3,"tabPanel",4,"ngIf"],[1,"list"],["tabPanel",""],[3,"loadingState"],[3,"showsInfos","tmdbConfig"],["mat-fab","","color","primary","class","fab","aria-label","Add list items",3,"click",4,"ngIf"],["mat-tab-nav-bar","",3,"tabPanel"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","click"],["mat-fab","","color","primary","aria-label","Add list items",1,"fab",3,"click"]],template:function(_,c){1&_&&(n.YNc(0,b,2,2,"nav",0),n.TgZ(1,"mat-tab-nav-panel",1,2)(3,"app-loading",3),n._UZ(4,"app-shows",4),n.ALo(5,"async"),n.qZA()(),n.YNc(6,Q,3,0,"button",5)),2&_&&(n.Q6J("ngIf",c.lists),n.xp6(3),n.Q6J("loadingState",c.loadingState),n.xp6(1),n.Q6J("showsInfos",c.showsInfos)("tmdbConfig",n.lcZ(5,5,c.tmdbService.tmdbConfig$)),n.xp6(2),n.Q6J("ngIf",void 0!==c.activeListIndex))},dependencies:[U.sg,U.O5,N.j,u.N,D.Hw,C.BU,C.sW,C.Nj,E.lW,U.Ov],styles:[".list[_ngcontent-%COMP%]{display:block;max-width:50rem;margin:0 auto;padding:1rem}.list[_ngcontent-%COMP%]     .mat-list-base{margin-left:-1rem;margin-right:-1rem}"]}),P})()},8424:(W,I,i)=>{i.d(I,{N:()=>N});var t=i(7579),h=i(2722),O=i(3900),y=i(9646),g=i(515),L=i(6451),x=i(2805),w=i(4004),f=i(9841),a=i(8675),p=i(1884),S=i(975),R=i(5492),n=i(4650),B=i(6895),K=i(1572);function F(u,D){1&u&&(n.ynx(0),n.Hsn(1),n.BQk())}function Z(u,D){if(1&u&&(n.ynx(0),n.YNc(1,F,2,0,"ng-container",0),n.ALo(2,"async"),n.BQk()),2&u){const C=n.oxw(),E=n.MAs(3);let T;n.xp6(1),n.Q6J("ngIf",!1===n.lcZ(2,2,C.isLoadingDelayed))("ngIfElse",null!==(T=C.customLoading)&&void 0!==T?T:E)}}function Y(u,D){1&u&&(n.TgZ(0,"div",3),n._UZ(1,"mat-spinner",4),n.qZA())}function j(u,D){1&u&&(n.TgZ(0,"div"),n._uU(1,"An error occurred"),n.qZA())}const U=["*"];let N=(()=>{class u extends R.H{constructor(){super(...arguments),this.loadingDelay=400,this.minimumLoadingShown=600,this.loadingStateChanged=new t.x,this.loadingStateEnum=S.Gu}ngOnChanges(C){const E=C.loadingState?.currentValue;E&&(this.loadingStateChanged.next(),E.pipe((0,h.R)(this.loadingStateChanged),(0,h.R)(this.destroy$)).subscribe(()=>{const T=E.pipe((0,O.w)(b=>b!==S.Gu.LOADING?(0,y.of)(void 0):g.E));this.isLoadingDelayed=(0,L.T)((0,x.H)(this.loadingDelay).pipe((0,w.U)(()=>!0),(0,h.R)(T)),(0,f.a)([T,(0,x.H)(this.loadingDelay+this.minimumLoadingShown)]).pipe((0,w.U)(()=>!1))).pipe((0,a.O)(!1),(0,p.x)())}))}}return u.\u0275fac=function(){let D;return function(E){return(D||(D=n.n5z(u)))(E||u)}}(),u.\u0275cmp=n.Xpm({type:u,selectors:[["app-loading"]],inputs:{loadingState:"loadingState",customLoading:"customLoading",customError:"customError"},features:[n.qOj,n.TTD],ngContentSelectors:U,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["error",""],[1,"loading-wrapper"],["diameter","32"]],template:function(C,E){if(1&C&&(n.F$t(),n.YNc(0,Z,3,4,"ng-container",0),n.ALo(1,"async"),n.YNc(2,Y,2,0,"ng-template",null,1,n.W1O),n.YNc(4,j,2,0,"ng-template",null,2,n.W1O)),2&C){const T=n.MAs(5);let b;n.Q6J("ngIf",n.lcZ(1,2,E.loadingState)!==E.loadingStateEnum.ERROR)("ngIfElse",null!==(b=E.customError)&&void 0!==b?b:T)}},dependencies:[B.O5,K.Ou,B.Ov],styles:[".loading-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1rem}"]}),u})()},1455:(W,I,i)=>{i.d(I,{j:()=>M});var t=i(4650),h=i(6895),O=i(4633),y=i(858),g=i(3238),L=i(4859),x=i(3162),w=i(7392),f=i(8255),a=i(1800);let p=(()=>{class o{transform(e,s){if(!e)return"";const d=(new Date).getTime(),r=new Date(e).getTime();if(r<=d+864e5){const G=(0,h.p6)(r-d,"H","en-US");return`In ${G} ${"1"===G?"hour":"hours"}`}if(r<=d+6048e5){const G=(0,h.p6)(r-d,"d","en-US");return`In ${G} ${"1"===G?"day":"days"}`}return(0,h.p6)(e,s,"en-US")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"relativeDate",type:o,pure:!0}),o})();function S(o,l){if(1&o&&t._UZ(0,"img",7),2&o){const e=t.oxw();let s;t.Q6J("src",e.imgPrefix+(null!==(s=null==e.tmdbSeason?null:e.tmdbSeason.poster_path)&&void 0!==s?s:e.tmdbShow.poster_path),t.LSH)("alt",e.tmdbShow.name+" Poster")}}function R(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.tmdbShow.number_of_episodes," episodes ")}}function n(o,l){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.progress.aired-e.progress.completed," remaining ")}}function B(o,l){1&o&&(t.ynx(0),t._uU(1," \xb7 "),t.BQk())}function K(o,l){if(1&o&&(t.ynx(0),t.YNc(1,R,2,1,"ng-container",6),t.YNc(2,n,2,1,"ng-container",6),t.YNc(3,B,2,0,"ng-container",6),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.tmdbShow&&(!e.progress||0===e.progress.completed)),t.xp6(1),t.Q6J("ngIf",e.progress&&e.progress.completed>0&&e.progress.aired-e.progress.completed),t.xp6(1),t.Q6J("ngIf",e.tmdbShow&&(!e.progress||e.progress&&e.progress.aired-e.progress.completed))}}function F(o,l){if(1&o&&(t.TgZ(0,"p",8),t.YNc(1,K,4,3,"ng-container",6),t._uU(2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.withEpisodesCount),t.xp6(1),t.hij(" ",null==e.tmdbShow||null==e.tmdbShow.networks||null==e.tmdbShow.networks[0]?null:e.tmdbShow.networks[0].name," ")}}function Z(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(d){t.CHM(e);const r=t.oxw(2);return r.preventEvent(d),t.KtG(r.isFavorite?r.removeFavorite.emit(r.show.ids.trakt):r.addFavorite.emit(r.show.ids.trakt))}),t.TgZ(1,"mat-icon",13),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw(2);t.ekj("remove",!e.isFavorite),t.xp6(2),t.Oqu(e.isFavorite?"star":"star_outline")}}function Y(o,l){if(1&o&&(t.TgZ(0,"div",9)(1,"h2",10),t._uU(2),t.qZA(),t.YNc(3,Z,3,3,"button",11),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.AsE("",e.tmdbShow.name,"",e.withYear&&" ("+e.show.year+")",""),t.xp6(1),t.Q6J("ngIf",void 0!==e.isFavorite)}}function j(o,l){if(1&o&&t._UZ(0,"mat-progress-bar",14),2&o){const e=t.oxw();t.Q6J("value",e.progress.completed/e.progress.aired*100)}}function U(o,l){if(1&o&&(t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.ALo(3,"number"),t.ALo(4,"number"),t.qZA(),t.TgZ(5,"p",16),t._uU(6),t.ALo(7,"relativeDate"),t.ALo(8,"date"),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.lnq(" S",t.xi3(3,4,e.episode.season,"2.0-0"),"E",t.xi3(4,7,e.episode.number,"2.0-0")," ",e.episode.title," "),t.xp6(4),t.hij(" ",e.withRelativeDate?t.xi3(7,10,e.episode.first_aired,"d. MMM. yyyy (E.)"):t.xi3(8,13,e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}function N(o,l){1&o&&(t.TgZ(0,"button",19)(1,"mat-icon"),t._uU(2,"checkbox"),t.qZA()())}function u(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(d){t.CHM(e);const r=t.oxw(2);return r.preventEvent(d),t.KtG(r.isWatchlist?r.removeShow.emit(r.show.ids):r.addShow.emit(r.show.ids))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw(2);t.uIk("aria-label",e.isWatchlist?"Remove show":"Add show"),t.xp6(2),t.Oqu(e.isWatchlist?"remove":"add")}}function D(o,l){if(1&o&&(t.ynx(0),t.YNc(1,N,3,0,"button",17),t.YNc(2,u,3,2,"button",18),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.progress&&e.showWatched),t.xp6(1),t.Q6J("ngIf",!(e.progress&&e.showWatched))}}const C=function(o,l){return{show:o,isFavorite:l}};function E(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",21),t.NdJ("click",function(d){t.CHM(e);const r=t.oxw();return t.KtG(r.preventEvent(d))}),t.TgZ(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e.menu)("matMenuTriggerData",t.WLB(2,C,e.show,e.isFavorite))}}let T=(()=>{class o{constructor(){this.addFavorite=new t.vpe,this.removeFavorite=new t.vpe,this.addShow=new t.vpe,this.removeShow=new t.vpe,this.manageLists=new t.vpe}preventEvent(e){e.stopPropagation(),e.preventDefault()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-show-item"]],inputs:{show:"show",showWatched:"showWatched",progress:"progress",imgPrefix:"imgPrefix",tmdbShow:"tmdbShow",tmdbSeason:"tmdbSeason",isFavorite:"isFavorite",isWatchlist:"isWatchlist",episode:"episode",withYear:"withYear",withEpisode:"withEpisode",withAddButtons:"withAddButtons",withEpisodesCount:"withEpisodesCount",withProgressbar:"withProgressbar",withRelativeDate:"withRelativeDate",menu:"menu"},outputs:{addFavorite:"addFavorite",removeFavorite:"removeFavorite",addShow:"addShow",removeShow:"removeShow",manageLists:"manageLists"},decls:10,vars:9,consts:[["width","185","height","278","class","poster","loading","lazy","appImageFallback","","imageFallback","assets/poster.png",3,"src","alt",4,"ngIf"],[1,"right"],[1,"left-wrapper"],["class","mat-small small-text",4,"ngIf"],["class","title-wrapper",4,"ngIf"],["class","progress-bar","mode","determinate",3,"value",4,"ngIf"],[4,"ngIf"],["width","185","height","278","loading","lazy","appImageFallback","","imageFallback","assets/poster.png",1,"poster",3,"src","alt"],[1,"mat-small","small-text"],[1,"title-wrapper"],[1,"mat-title","title"],["mat-icon-button","","aria-label","Favorite","class","favorite-button",3,"remove","click",4,"ngIf"],["mat-icon-button","","aria-label","Favorite",1,"favorite-button",3,"click"],[1,"favorite-icon"],["mode","determinate",1,"progress-bar",3,"value"],[1,"mat-small","next-episode-text"],[1,"mat-small","next-episode-date"],["mat-icon-button","","aria-label","Show added","disabled","",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Show added","disabled",""],["mat-icon-button","",3,"click"],["mat-icon-button","","aria-label","Menu",3,"matMenuTriggerFor","matMenuTriggerData","click"]],template:function(e,s){1&e&&(t.YNc(0,S,1,2,"img",0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,F,3,2,"p",3),t.YNc(4,Y,4,3,"div",4),t.YNc(5,j,1,1,"mat-progress-bar",5),t.YNc(6,U,9,16,"ng-container",6),t.qZA(),t.TgZ(7,"div"),t.YNc(8,D,3,2,"ng-container",6),t.YNc(9,E,4,5,"ng-container",6),t.qZA()()),2&e&&(t.Q6J("ngIf",s.imgPrefix&&s.tmdbShow&&s.tmdbShow.poster_path&&s.show),t.xp6(1),t.ekj("without-gap",!s.withAddButtons),t.xp6(2),t.Q6J("ngIf",s.progress||s.tmdbShow),t.xp6(1),t.Q6J("ngIf",s.show&&s.tmdbShow),t.xp6(1),t.Q6J("ngIf",s.withProgressbar&&s.progress&&s.showWatched),t.xp6(1),t.Q6J("ngIf",s.withEpisode&&s.episode),t.xp6(2),t.Q6J("ngIf",s.withAddButtons&&s.show),t.xp6(1),t.Q6J("ngIf",!s.withAddButtons&&s.menu&&s.show))},dependencies:[h.O5,L.lW,x.pW,w.Hw,f.p6,a.H,h.JJ,h.uU,p],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:5rem 1fr;align-items:center;gap:1rem;width:100%;height:100%}@media (min-width: 576px){[_nghost-%COMP%]{grid-template-columns:9.625rem 1fr}}.poster[_ngcontent-%COMP%]{width:100%;aspect-ratio:2/3;cursor:pointer;border-radius:var(--border-radius)}@media (min-width: 576px){.poster[_ngcontent-%COMP%]{width:9.625rem;height:14.4375rem}}.right[_ngcontent-%COMP%]{width:100%;overflow:hidden;display:grid;grid-template-columns:1fr auto;align-items:center;gap:1rem}.right.without-gap[_ngcontent-%COMP%]{gap:unset}.left-wrapper[_ngcontent-%COMP%]{overflow:hidden}.title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.125rem;--icon-size: 1rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]{margin-bottom:.75rem;--icon-size: 1.25rem}}.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;margin-bottom:0;margin-right:.25rem;font-size:1rem;font-weight:400;line-height:1.5rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;line-height:2rem}}.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:hover{cursor:pointer}.title-wrapper[_ngcontent-%COMP%]   .favorite-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:var(--icon-size);height:var(--icon-size)}.title-wrapper[_ngcontent-%COMP%]   .favorite-button.remove[_ngcontent-%COMP%]{display:none}.title-wrapper[_ngcontent-%COMP%]:hover   .favorite-button.remove[_ngcontent-%COMP%]{display:flex}.title-wrapper[_ngcontent-%COMP%]   .favorite-icon[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);line-height:var(--icon-size)}.progress-bar[_ngcontent-%COMP%]{margin-bottom:.25rem}@media (min-width: 576px){.progress-bar[_ngcontent-%COMP%]{margin-bottom:1rem}}.small-text[_ngcontent-%COMP%], .next-episode-text[_ngcontent-%COMP%], .next-episode-date[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.small-text[_ngcontent-%COMP%]{margin:0;color:var(--text-color-2)}@media (min-width: 576px){.small-text[_ngcontent-%COMP%]{margin-bottom:.5rem}}.next-episode-text[_ngcontent-%COMP%]{margin:0}@media (min-width: 576px){.next-episode-text[_ngcontent-%COMP%]{margin-bottom:.5rem}}.next-episode-date[_ngcontent-%COMP%]{margin:0;color:var(--text-color-2)}@media (min-width: 576px){.next-episode-date[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),o})();var b=i(1521);let Q=(()=>{class o{constructor(e){this.ref=e,this.element=e.nativeElement}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275dir=t.lG2({type:o,selectors:[["","appTransitionGroupItem",""]]}),o})();var J=i(7579),P=i(4968),A=i(8372),_=i(2722);let c=(()=>{class o{constructor(){this.destroy$=new J.x,this.moveClass="move"}ngOnInit(){(0,P.R)(window,"scroll").pipe((0,A.b)(10),(0,_.R)(this.destroy$)).subscribe(()=>this.refreshPosition("previousPosition"))}ngAfterViewInit(){requestAnimationFrame(()=>this.refreshPosition("previousPosition")),this.items?.changes.pipe((0,_.R)(this.destroy$)).subscribe(e=>{e.forEach(r=>r.previousPosition=r.newPosition||r.previousPosition),e.forEach(r=>r.onMove?.()),this.refreshPosition("newPosition"),e.forEach(r=>r.previousPosition=r.previousPosition||r.newPosition);const s=()=>{e.forEach(this.applyTranslation),this._forceReflow=document.body.offsetHeight,this.items?.forEach(this.runTransition.bind(this))};e.some(r=>!(!r.previousPosition||!r.newPosition)&&(!!(r.previousPosition.left-r.newPosition.left)||!!(r.previousPosition.top-r.newPosition.top)))?s():requestAnimationFrame(()=>{this.refreshPosition("newPosition"),s()})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}runTransition(e){!e.moved||(e.element.classList.add(this.moveClass),e.element.style.transform=e.element.style.transitionDuration="",e.element.addEventListener("transitionend",e.onMove=s=>{(!s||/transform$/.test(s.propertyName))&&(e.element.removeEventListener("transitionend",e.onMove),e.onMove=null,e.element.classList.remove(this.moveClass))}))}refreshPosition(e){this.items?.forEach(s=>{s[e]=s.element.getBoundingClientRect()})}applyTranslation(e){if(e.moved=!1,!e.previousPosition||!e.newPosition)return;const s=e.previousPosition.left-e.newPosition.left,d=e.previousPosition.top-e.newPosition.top;(s||d)&&(e.moved=!0,e.element.style.transform="translate("+s+"px,"+d+"px)",e.element.style.transitionDuration="0s")}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["","appTransitionGroup",""]],contentQueries:function(e,s,d){if(1&e&&t.Suo(d,Q,4),2&e){let r;t.iGM(r=t.CRH())&&(s.items=r)}}}),o})();function m(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"a",3)(1,"mat-list-item")(2,"app-show-item",4),t.NdJ("addFavorite",function(d){t.CHM(e);const r=t.oxw(2);return t.KtG(r.addFavorite.emit(d))})("removeFavorite",function(d){t.CHM(e);const r=t.oxw(2);return t.KtG(r.removeFavorite.emit(d))})("addShow",function(d){t.CHM(e);const r=t.oxw(2);return t.KtG(r.addShow.emit(d))})("removeShow",function(d){t.CHM(e);const r=t.oxw(2);return t.KtG(r.removeShow.emit(d))})("manageLists",function(d){t.CHM(e);const r=t.oxw(2);return t.KtG(r.manageLists.emit(d))}),t.qZA()()()}if(2&o){const e=l.$implicit,s=t.oxw(2);t.Q6J("routerLink",e.show&&"/series/s/"+e.show.ids.slug+(s.withLinkToEpisode&&e.nextEpisode?"/season/"+e.nextEpisode.season+"/episode/"+e.nextEpisode.number:"")),t.xp6(2),t.Q6J("show",e.show)("showWatched",e.showWatched)("progress",e.showProgress)("imgPrefix",s.tmdbConfig?s.tmdbConfig.images.secure_base_url+s.tmdbConfig.images.poster_sizes[1]:void 0)("tmdbShow",e.tmdbShow)("tmdbSeason",e.tmdbSeason)("episode",e.nextEpisode)("isFavorite",e.isFavorite)("isWatchlist",!!e.isWatchlist)("withYear",s.withYear)("withEpisode",s.withEpisode)("withAddButtons",s.withAddButtons)("withEpisodesCount",s.withEpisodesCount)("withProgressbar",s.withProgressbar)("withRelativeDate",s.withRelativeDate)("menu",s.menu)}}function v(o,l){if(1&o&&(t.TgZ(0,"mat-list",1),t.YNc(1,m,3,17,"a",2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.showsInfos)("ngForTrackBy",e.showId)}}let M=(()=>{class o{constructor(){this.showsInfos=[],this.addFavorite=new t.vpe,this.removeFavorite=new t.vpe,this.addShow=new t.vpe,this.removeShow=new t.vpe,this.manageLists=new t.vpe}showId(e,s){return s.show?.ids.trakt}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-shows"]],inputs:{showsInfos:"showsInfos",tmdbConfig:"tmdbConfig",withYear:"withYear",withEpisode:"withEpisode",withAddButtons:"withAddButtons",withLinkToEpisode:"withLinkToEpisode",withEpisodesCount:"withEpisodesCount",withProgressbar:"withProgressbar",withRelativeDate:"withRelativeDate",menu:"menu"},outputs:{addFavorite:"addFavorite",removeFavorite:"removeFavorite",addShow:"addShow",removeShow:"removeShow",manageLists:"manageLists"},decls:1,vars:1,consts:[["class","shows","appTransitionGroup","",4,"ngIf"],["appTransitionGroup","",1,"shows"],["class","show link","appTransitionGroupItem","","matRipple","","appHideRippleOnScroll","",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],["appTransitionGroupItem","","matRipple","","appHideRippleOnScroll","",1,"show","link",3,"routerLink"],[3,"show","showWatched","progress","imgPrefix","tmdbShow","tmdbSeason","episode","isFavorite","isWatchlist","withYear","withEpisode","withAddButtons","withEpisodesCount","withProgressbar","withRelativeDate","menu","addFavorite","removeFavorite","addShow","removeShow","manageLists"]],template:function(e,s){1&e&&t.YNc(0,v,2,2,"mat-list",0),2&e&&t.Q6J("ngIf",s.showsInfos)},dependencies:[h.sg,h.O5,O.i$,O.Tg,y.yS,g.wG,T,b.g,Q,c],styles:[".shows[_ngcontent-%COMP%]{margin-top:-1rem}.shows[_ngcontent-%COMP%]   .show.move[_ngcontent-%COMP%]{transition:transform .3s}mat-list-item.show[_ngcontent-%COMP%]{padding:.5rem 0}.loading-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.loading-title[_ngcontent-%COMP%]{margin-bottom:0}"]}),o})()},1521:(W,I,i)=>{i.d(I,{g:()=>x});var t=i(5861),h=i(7579),O=i(5698),y=i(2722),g=i(4650),L=i(3238);let x=(()=>{class w{constructor(a,p,S){this.el=a,this.matRipple=p,this.ngZone=S,this.destroy$=new h.x,this.touchTapDelay=100,this.isClick=new h.x,this.isNearThreshold=10,this.pointerDownEvents=["mousedown","touchstart"],this.pointerUpEvents=["mouseup","mouseleave","touchend","touchcancel","dragstart"],this.pointerMoveEvents=["pointermove","touchmove"],this.pointerUpEventsRegistered=!1,this.pointerMoveEventsRegistered=!1,this.isPointerDown=!1,this.isTouch=!1,this.matRipple.disabled=!0}ngOnDestroy(){this.removeEvents(),clearTimeout(this.timeoutId),this.destroy$.next(),this.destroy$.complete()}onPointerDown(a){this.isTouch="touch"===a.pointerType,this.isPointerDown=!0,this.downPosition={x:a.clientX,y:a.clientY},this.currentPosition={x:a.clientX,y:a.clientY},this.isClick.pipe((0,O.q)(1),(0,y.R)(this.destroy$)).subscribe(()=>{this.matRipple.launch(a.x,a.y,{persistent:!0}),clearTimeout(this.timeoutId)}),this.pointerUpEventsRegistered||(this.registerEvents(this.pointerUpEvents),this.pointerUpEventsRegistered=!0),this.isTouch?(clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.isNear(this.currentPosition,this.downPosition)&&this.isClick.next(void 0)},this.touchTapDelay),this.pointerMoveEventsRegistered||(this.registerEvents(this.pointerMoveEvents),this.pointerMoveEventsRegistered=!0)):this.isClick.next(void 0)}registerEvents(a){this.ngZone.runOutsideAngular(()=>{a.forEach(p=>{this.el.nativeElement.addEventListener(p,this,{passive:!0})})})}removeEvents(){this.el&&(this.pointerDownEvents.forEach(a=>{this.el.nativeElement.removeEventListener(a,this,{passive:!0})}),this.pointerUpEventsRegistered&&this.pointerUpEvents.forEach(a=>{this.el.nativeElement.removeEventListener(a,this,{passive:!0})}),this.pointerMoveEventsRegistered&&this.pointerMoveEvents.forEach(a=>{this.el.nativeElement.removeEventListener(a,this,{passive:!0})}))}handleEvent(a){var p=this;return(0,t.Z)(function*(){"pointermove"===a.type?p.onPointerMove(a):"touchmove"===a.type?p.onTouchMove(a):yield p.onPointerUp()})()}onPointerMove(a){this.currentPosition={x:a.clientX,y:a.clientY}}onTouchMove(a){this.currentPosition={x:a.touches[0].clientX,y:a.touches[0].clientY}}onPointerUp(){!this.isPointerDown||(this.isPointerDown=!1,this.isNear(this.currentPosition,this.downPosition)&&(this.isClick.next(void 0),clearTimeout(this.timeoutId)),this.matRipple.fadeOutAll())}isNear(a,p){return!(!a||!p)&&Math.abs(a.x-p.x)<this.isNearThreshold&&Math.abs(a.y-p.y)<this.isNearThreshold}}return w.\u0275fac=function(a){return new(a||w)(g.Y36(g.SBq),g.Y36(L.wG),g.Y36(g.R0b))},w.\u0275dir=g.lG2({type:w,selectors:[["","appHideRippleOnScroll",""]],hostBindings:function(a,p){1&a&&g.NdJ("pointerdown",function(R){return p.onPointerDown(R)})}}),w})()},1800:(W,I,i)=>{i.d(I,{H:()=>L});var t=i(975),h=i(7579),O=i(1135),y=i(2722),g=i(4650);let L=(()=>{class x{constructor(f){this.el=f,this.destroy$=new h.x,this.state=new O.X(t.Gu.LOADING)}ngOnInit(){this.state?.pipe((0,y.R)(this.destroy$)).subscribe(f=>{f===t.Gu.ERROR&&this.imageFallback&&(this.el.nativeElement.src=this.imageFallback)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onLoad(){this.state?.next(t.Gu.SUCCESS)}onError(){this.state?.next(t.Gu.ERROR)}}return x.\u0275fac=function(f){return new(f||x)(g.Y36(g.SBq))},x.\u0275dir=g.lG2({type:x,selectors:[["","appImageFallback",""]],hostBindings:function(f,a){1&f&&g.NdJ("load",function(){return a.onLoad()})("error",function(){return a.onError()})},inputs:{imageFallback:"imageFallback"}}),x})()},6124:(W,I,i)=>{function t(h=0){return new Promise(O=>{setTimeout(()=>{O()},h)})}i.d(I,{D:()=>t})}}]);