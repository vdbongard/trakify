"use strict";(self.webpackChunktrakify=self.webpackChunktrakify||[]).push([[517],{1517:(Eo,me,c)=>{c.r(me),c.d(me,{default:()=>ko});var M=c(5861),O=c(1135),v=c(2722),D=c(1850),m=c(975),w=c(858),Q=c(5606),u=c(3261),$=c(8424),ot=c(2578),d=c(6895),Z=c(4859),Y=c(4754),H=c(8255),J=c(7392),t=c(4650),z=c(6592),x=c(9841),C=c(4004),ie=c(8930),ne=c(6321),q=c(5507),ue=c(251),K=c(2042);class V{constructor(o,e,i,s){this.showService=o,this.tmdbService=e,this.configService=i,this.episodeService=s}getShowsFilteredAndSorted$(){return(0,x.a)([this.showService.getShowsWatched$(),this.showService.showsProgress.$,this.episodeService.getEpisodes$(),this.showService.showsHidden.$,this.showService.favorites.$,this.configService.config.$,this.tmdbService.getTmdbShows$(),this.tmdbService.tmdbSeasons.$]).pipe((0,C.U)(([o,e,i,s,a,r,p,g])=>{if(!o.length)return[];const f=[];return o.forEach(l=>{const T=e[l.show.ids.trakt],S=l.show.ids.tmdb?p[l.show.ids.tmdb]:void 0,N=T?.next_episode?i[(0,ne.d)(l.show.ids.trakt,T.next_episode.season,T.next_episode.number)]:void 0;if((0,ie.Ll)(r,l.show,T,S,s))return;const h=T?.next_episode&&g[(0,ne.u)(l.show.ids.tmdb,T.next_episode.season)];f.push({showWatched:l,show:l.show,showProgress:T,tmdbShow:S,tmdbSeason:h,nextEpisode:N,isFavorite:this.showService.isFavorite(l.show,a),isHidden:this.showService.isHidden(l.show)})}),(0,ie.TD)(r,f,i),f}))}static#t=this.\u0275fac=function(e){return new(e||V)(t.LFG(z.X),t.LFG(q.U),t.LFG(ue.E),t.LFG(K.n))};static#e=this.\u0275prov=t.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"})}var oe=c(5381),B=c(7009),st=c(6578),X=c(9450),at=c(629);function Qe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3).show,a=t.oxw();return t.KtG(a.dialogService.manageLists(s.ids.trakt))}),t._uU(1," Manage lists "),t.qZA()}}function He(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Qe,2,0,"button",7),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.length>0)}}function Re(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2),a=s.isFavorite,r=s.show,p=t.oxw();return t.KtG(a?p.showService.removeFavorite(r):p.showService.addFavorite(r))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2).isFavorite;t.xp6(1),t.hij(" ",e?"Remove favorite":"Add favorite"," ")}}function Ge(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2),a=s.isHidden,r=s.show,p=t.oxw();return t.KtG(a?p.executeService.removeShowHidden(r):p.executeService.addShowHidden(r))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2).isHidden;t.xp6(1),t.hij(" ",e?"Unhide show":"Hide show"," ")}}function Ue(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,He,2,1,"ng-container",5),t.ALo(2,"async"),t.TgZ(3,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().show,a=t.oxw();return t.KtG(a.executeService.addShow(s,{showConfirm:!0}))}),t._uU(4," Mark as seen "),t.qZA(),t.YNc(5,Re,2,1,"button",7),t.YNc(6,Ge,2,1,"button",7),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().show,a=t.oxw();return t.KtG(a.executeService.removeShow(s))}),t._uU(8,"Remove show"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(),i=e.isFavorite,s=e.isHidden,a=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,a.listService.lists.$)),t.xp6(4),t.Q6J("ngIf",void 0!==i),t.xp6(1),t.Q6J("ngIf",void 0!==s)}}function ze(n,o){1&n&&t.YNc(0,Ue,9,5,"ng-container",5),2&n&&t.Q6J("ngIf",o.show)}const qe=function(){return{}};class wt extends D.X{constructor(o,e,i,s,a,r,p,g,f,l){super(),this.showService=o,this.infoService=e,this.tmdbService=i,this.dialogService=s,this.snackBar=a,this.listService=r,this.executeService=p,this.activatedRoute=g,this.router=f,this.authService=l,this.pageState=new O.X(m.Gu.LOADING),this.paths=u}ngOnInit(){var e,o=this;this.activatedRoute.data.pipe((0,v.R)(this.destroy$)).subscribe(({showInfos:e})=>{this.showsInfos=e}),this.infoService.getShowsFilteredAndSorted$().pipe((0,v.R)(this.destroy$)).subscribe({next:(e=(0,M.Z)(function*(i){o.pageState.next(m.Gu.SUCCESS),o.showsInfos=i,console.debug("showsInfos",o.showsInfos)}),function(s){return e.apply(this,arguments)}),error:e=>(0,Q.q)(e,this.snackBar,this.pageState)})}static#t=this.\u0275fac=function(e){return new(e||wt)(t.Y36(z.X),t.Y36(V),t.Y36(q.U),t.Y36(oe.x),t.Y36(B.ux),t.Y36(st.X),t.Y36(X.V),t.Y36(w.gz),t.Y36(w.F0),t.Y36(at.e))};static#e=this.\u0275cmp=t.Xpm({type:wt,selectors:[["t-shows-page"]],standalone:!0,features:[t.qOj,t.jDz],decls:10,vars:15,consts:[[3,"loadingState"],[3,"isLoggedIn","showsInfos","withEpisode","withEpisodesCount","withProgressbar","menu","back","addFavorite","removeFavorite"],["mat-fab","","color","primary","aria-label","Add show to watchlist",1,"fab",3,"routerLink"],["menu","matMenu"],["matMenuContent",""],[4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0)(1,"t-shows",1),t.NdJ("addFavorite",function(a){return i.showService.addFavorite(a)})("removeFavorite",function(a){return i.showService.removeFavorite(a)}),t.ALo(2,"async"),t.qZA()(),t.TgZ(3,"a",2),t.ALo(4,"ngGenericPipe"),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()(),t.TgZ(7,"mat-menu",null,3),t.YNc(9,ze,1,1,"ng-template",4),t.qZA()),2&e){const s=t.MAs(8);t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(2,9,i.authService.isLoggedIn$))("showsInfos",i.showsInfos)("withEpisode",!0)("withEpisodesCount",!0)("withProgressbar",!0)("menu",s)("back",i.router.url),t.xp6(2),t.Q6J("routerLink",t.xi3(4,11,t.DdM(14,qe),i.paths.addShow))}},dependencies:[d.O5,$.N,ot.j,d.Ov,Z.ot,Z.EX,w.rH,Y.r,Y.a,H.Tx,H.VK,H.OP,H.KA,J.Ps,J.Hw],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"]})}var ct=c(7579),_e=c(3151),I=c(3900),y=c(9646),se=c(6451),rt=c(262);function ge(n=0){return new Promise(o=>{window.setTimeout(()=>{o()},n)})}var P=c(5022),A=c(4006),R=c(9549),bt=c(4144),F=c(1281),b=c(3238),dt=c(2687),je=c(5698),xt=c(8675),L=c(9521),fe=c(445);function We(n,o){1&n&&(t.TgZ(0,"span",8),t.Hsn(1,1),t.qZA())}function Ke(n,o){1&n&&(t.TgZ(0,"span",9),t.Hsn(1,2),t.qZA())}const Ve=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],Xe=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"],ae=["*"],be=new t.OlP("mat-chips-default-options"),xe=new t.OlP("MatChipAvatar"),ye=new t.OlP("MatChipTrailingIcon"),Se=new t.OlP("MatChipRemove"),yt=new t.OlP("MatChip");class li{}const mi=(0,b.sb)(li,-1);let tt=(()=>{class n extends mi{constructor(e,i){super(),this._elementRef=e,this._parentChip=i,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this._allowFocusWhenDisabled=!1,"BUTTON"===e.nativeElement.nodeName&&e.nativeElement.setAttribute("type","button")}get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=(0,F.Ig)(e)}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===L.K5||e.keyCode===L.L_)&&!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(yt))},n.\u0275dir=t.lG2({type:n,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(e,i){1&e&&t.NdJ("click",function(a){return i._handleClick(a)})("keydown",function(a){return i._handleKeydown(a)}),2&e&&(t.uIk("tabindex",i._getTabindex())("disabled",i._getDisabledAttribute())("aria-disabled",i.disabled),t.ekj("mdc-evolution-chip__action--primary",i._isPrimary)("mdc-evolution-chip__action--presentational",i._isPrimary)("mdc-evolution-chip__action--trailing",!i._isPrimary))},inputs:{disabled:"disabled",tabIndex:"tabIndex",isInteractive:"isInteractive",_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},features:[t.qOj]}),n})(),fi=0;const vi=(0,b.sb)((0,b.pj)((0,b.Kr)((0,b.Id)(class{constructor(n){this._elementRef=n}})),"primary"),-1);let j=(()=>{class n extends vi{constructor(e,i,s,a,r,p,g,f){super(i),this._changeDetectorRef=e,this._ngZone=s,this._focusMonitor=a,this._globalRippleOptions=g,this._isRippleCentered=!1,this._onFocus=new ct.x,this._onBlur=new ct.x,this.role=null,this._hasFocusInternal=!1,this.id="mat-mdc-chip-"+fi++,this.ariaLabel=null,this._removable=!0,this._highlighted=!1,this.removed=new t.vpe,this.destroyed=new t.vpe,this.basicChipAttrName="mat-basic-chip";const l=i.nativeElement;this._document=r,this._animationsDisabled="NoopAnimations"===p,this._isBasicChip=l.hasAttribute(this.basicChipAttrName)||l.tagName.toLowerCase()===this.basicChipAttrName,null!=f&&(this.tabIndex=parseInt(f)??this.defaultTabIndex),this._monitorFocus()}_hasFocus(){return this._hasFocusInternal}get value(){return void 0!==this._value?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get removable(){return this._removable}set removable(e){this._removable=(0,F.Ig)(e)}get highlighted(){return this._highlighted}set highlighted(e){this._highlighted=(0,F.Ig)(e)}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!(!this.trailingIcon&&!this.removeIcon)}_handleKeydown(e){(e.keyCode===L.ZH||e.keyCode===L.yY)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(i=>{const s=i._elementRef.nativeElement;return s===e||s.contains(e)})}_getActions(){const e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const i=null!==e;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):this._ngZone.onStable.pipe((0,je.q)(1)).subscribe(()=>this._ngZone.run(()=>this._onBlur.next({chip:this}))))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(dt.tE),t.Y36(d.K0),t.Y36(t.QbO,8),t.Y36(b.Y2,8),t.$8M("tabindex"))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-basic-chip"],["mat-chip"]],contentQueries:function(e,i,s){if(1&e&&(t.Suo(s,xe,5),t.Suo(s,ye,5),t.Suo(s,Se,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.leadingIcon=a.first),t.iGM(a=t.CRH())&&(i.trailingIcon=a.first),t.iGM(a=t.CRH())&&(i.removeIcon=a.first)}},viewQuery:function(e,i){if(1&e&&(t.Gf(b.wG,5),t.Gf(tt,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.ripple=s.first),t.iGM(s=t.CRH())&&(i.primaryAction=s.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:30,hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(a){return i._handleKeydown(a)}),2&e&&(t.Ikx("id",i.id),t.uIk("role",i.role)("tabindex",i.role?i.tabIndex:null)("aria-label",i.ariaLabel),t.ekj("mdc-evolution-chip",!i._isBasicChip)("mdc-evolution-chip--disabled",i.disabled)("mdc-evolution-chip--with-trailing-action",i._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",i.leadingIcon)("mdc-evolution-chip--with-primary-icon",i.leadingIcon)("mdc-evolution-chip--with-avatar",i.leadingIcon)("mat-mdc-chip-with-avatar",i.leadingIcon)("mat-mdc-chip-highlighted",i.highlighted)("mat-mdc-chip-disabled",i.disabled)("mat-mdc-basic-chip",i._isBasicChip)("mat-mdc-standard-chip",!i._isBasicChip)("mat-mdc-chip-with-trailing-icon",i._hasTrailingIcon())("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",id:"id",ariaLabel:["aria-label","ariaLabel"],value:"value",removable:"removable",highlighted:"highlighted"},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[t._Bn([{provide:yt,useExisting:n}]),t.qOj],ngContentSelectors:Xe,decls:9,vars:6,consts:[["matRipple","",1,"mat-mdc-chip-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],["class","mdc-evolution-chip__graphic mat-mdc-chip-graphic",4,"ngIf"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],["class","mdc-evolution-chip__cell mdc-evolution-chip__cell--trailing",4,"ngIf"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(e,i){1&e&&(t.F$t(Ve),t._UZ(0,"span",0)(1,"span",1),t.TgZ(2,"span",2)(3,"div",3),t.YNc(4,We,2,0,"span",4),t.TgZ(5,"span",5),t.Hsn(6),t._UZ(7,"span",6),t.qZA()()(),t.YNc(8,Ke,2,0,"span",7)),2&e&&(t.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i._isRippleCentered)("matRippleTrigger",i._elementRef.nativeElement),t.xp6(3),t.Q6J("isInteractive",!1),t.xp6(1),t.Q6J("ngIf",i.leadingIcon),t.xp6(4),t.Q6J("ngIf",i._hasTrailingIcon()))},dependencies:[d.O5,b.wG,tt],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{overflow-x:hidden}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mdc-evolution-chip__action--primary:before{box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1}.mdc-evolution-chip--touch{margin-top:8px;margin-bottom:8px}.mdc-evolution-chip__action-touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-evolution-chip__text-label{white-space:nowrap;user-select:none;text-overflow:ellipsis;overflow:hidden}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mdc-evolution-chip__checkmark-background{opacity:0}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__graphic{transition:width 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark{transition:opacity 50ms 0ms linear,transform 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-50%, -50%)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@keyframes mdc-evolution-chip-enter{from{transform:scale(0.8);opacity:.4}to{transform:scale(1);opacity:1}}.mdc-evolution-chip--enter{animation:mdc-evolution-chip-enter 100ms 0ms cubic-bezier(0, 0, 0.2, 1)}@keyframes mdc-evolution-chip-exit{from{opacity:1}to{opacity:0}}.mdc-evolution-chip--exit{animation:mdc-evolution-chip-exit 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-evolution-chip--hidden{opacity:0;pointer-events:none;transition:width 150ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-standard-chip .mdc-evolution-chip__checkmark{height:20px;width:20px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:24px}.mdc-evolution-chip--with-avatar .mdc-evolution-chip__graphic{height:24px;width:24px;font-size:24px}.mdc-evolution-chip--with-avatar .mdc-evolution-chip__icon--primary{height:24px;width:24px;font-size:24px}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px);height:var(--mdc-chip-container-height, 32px)}.mat-mdc-standard-chip .mdc-evolution-chip__ripple{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-radius:var(--mdc-chip-container-shape-radius, 16px 16px 16px 16px)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius, 14px 14px 14px 14px)}.mat-mdc-standard-chip.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:var(--mdc-chip-with-avatar-avatar-size, 28px)}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{height:var(--mdc-chip-with-avatar-avatar-size, 28px);width:var(--mdc-chip-with-avatar-avatar-size, 28px);font-size:var(--mdc-chip-with-avatar-avatar-size, 28px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-outline-width, 1px)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-outline-width, 1px)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-selected-outline-width, 0)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--selected) .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-unselected-outline-width, 1px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color, transparent)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color, currentColor)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{height:var(--mdc-chip-with-icon-icon-size, 18px);width:var(--mdc-chip-with-icon-icon-size, 18px);font-size:var(--mdc-chip-with-icon-icon-size, 18px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, currentColor)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, currentColor)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, currentColor)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, currentColor)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-mdc-standard-chip .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:.4}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary{width:100%}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{opacity:.04}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{opacity:.12}.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative}.mat-mdc-chip-action-label{text-align:left}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-chip-remove{opacity:.54}.mat-mdc-chip-remove:focus{opacity:1}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px) * -1);left:8px;right:8px}.mat-mdc-chip-remove .mat-icon{width:inherit;height:inherit;font-size:inherit;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})();class wi{constructor(o){}}const bi=(0,b.sb)(wi);let Ct=(()=>{class n extends bi{constructor(e,i,s){super(e),this._elementRef=e,this._changeDetectorRef=i,this._dir=s,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new ct.x,this._defaultRole="presentation",this._disabled=!1,this._explicitRole=null,this._chipActions=new t.n_E}get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,F.Ig)(e),this._syncChipsState()}get empty(){return 0===this._chips.length}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(e=>{e.disabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){const e=this.tabIndex;-1!==this.tabIndex&&(this.tabIndex=-1,setTimeout(()=>{this.tabIndex=e,this._changeDetectorRef.markForCheck()}))}_getChipStream(e){return this._chips.changes.pipe((0,xt.O)(null),(0,I.w)(()=>(0,se.T)(...this._chips.map(e))))}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList&&i.classList.contains("mdc-evolution-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe((0,xt.O)(this._chips)).subscribe(e=>{const i=[];e.forEach(s=>s._getActions().forEach(a=>i.push(a))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new dt.Em(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe((0,v.R)(this._destroyed)).subscribe(({chip:e})=>{const i=e._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe((0,v.R)(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe((0,xt.O)(null),(0,v.R)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe((0,v.R)(this._destroyed)).subscribe(e=>{const s=this._chips.toArray().indexOf(e.chip);this._isValidIndex(s)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=s)})}_redirectDestroyedChipFocus(){if(null!=this._lastDestroyedFocusedChipIndex){if(this._chips.length){const e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[e];i.disabled?1===this._chips.length?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(fe.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-chip-set"]],contentQueries:function(e,i,s){if(1&e&&t.Suo(s,j,5),2&e){let a;t.iGM(a=t.CRH())&&(i._chips=a)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(a){return i._handleKeydown(a)}),2&e&&t.uIk("role",i.role)},inputs:{disabled:"disabled",role:"role"},features:[t.qOj],ngContentSelectors:ae,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"span",0),t.Hsn(1),t.qZA())},styles:[".mdc-evolution-chip-set{display:flex}.mdc-evolution-chip-set:focus{outline:none}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mdc-evolution-chip-set--overflow .mdc-evolution-chip-set__chips{flex-flow:nowrap}.mdc-evolution-chip-set .mdc-evolution-chip-set__chips{margin-left:-8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip-set__chips,.mdc-evolution-chip-set .mdc-evolution-chip-set__chips[dir=rtl]{margin-left:0;margin-right:-8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-left:8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip,.mdc-evolution-chip-set .mdc-evolution-chip[dir=rtl]{margin-left:0;margin-right:8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-top:4px;margin-bottom:4px}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0}),n})(),Ai=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[b.rD,{provide:be,useValue:{separatorKeyCodes:[L.K5]}}],imports:[b.BQ,d.ez,b.si,b.BQ]}),n})();function Zi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.changeShowsSelection(a))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("highlighted",e.slug===i.activeSlug),t.xp6(1),t.hij(" ",e.name," ")}}function Mi(n,o){if(1&n&&(t.TgZ(0,"mat-chip-set",7),t.YNc(1,Zi,2,2,"mat-chip",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chips)}}class pt extends D.X{constructor(o,e,i,s,a,r,p,g,f){super(),this.showService=o,this.tmdbService=e,this.router=i,this.route=s,this.listService=a,this.snackBar=r,this.executeService=p,this.authService=g,this.episodeService=f,this.pageState=new O.X(m.Gu.LOADING),this.searchValue=null,this.chips=[{name:"Trending",slug:"trending",fetch:this.showService.fetchTrendingShows().pipe((0,C.U)(l=>l.map(T=>T.show)))},{name:"Popular",slug:"popular",fetch:this.showService.fetchPopularShows()},{name:"Recommended",slug:"recommended",fetch:this.showService.fetchRecommendedShows().pipe((0,C.U)(l=>l.map(T=>T.show)))},{name:"Upcoming",slug:"upcoming",fetch:this.episodeService.fetchCalendarAll().pipe((0,C.U)(l=>l.map(T=>T.show)))}],this.defaultSlug="trending",this.activeSlug="trending",this.nextShows$=new ct.x}ngOnInit(){var o=this;return(0,M.Z)(function*(){o.route.queryParams.pipe((0,C.U)(e=>Pi.parse(e)),(0,v.R)(o.destroy$)).subscribe(function(){var e=(0,M.Z)(function*(i){o.searchValue=i.q??null,o.activeSlug=i.slug??o.defaultSlug,o.searchValue?yield o.searchForShow(o.searchValue):yield o.getShowInfos(o.chips.find(s=>s.slug===o.activeSlug)?.fetch)});return function(i){return e.apply(this,arguments)}}())})()}ngOnDestroy(){super.ngOnDestroy(),this.nextShows$.complete()}searchForShow(o){var e=this;return(0,M.Z)(function*(){const i=e.showService.fetchSearchForShows(o).pipe((0,C.U)(s=>s.map(a=>a.show)));yield e.getShowInfos(i)})()}getShowInfos(o){var e=this;return(0,M.Z)(function*(){if(!o)return;e.nextShows$.next(),e.pageState.next(m.Gu.LOADING),e.showsInfos=void 0,yield ge();const i=o.pipe((0,_e.d)());i.pipe((0,I.w)(s=>(0,x.a)([e.showService.showsProgress.$,e.showService.getShowsWatched$(),e.listService.watchlist.$,(0,y.of)(s)])),(0,C.U)(([s,a,r,p])=>{e.showsInfos=e.showsInfos?e.showsInfos.map(g=>e.getShowInfo(g,s,a,r,void 0)):p.map(g=>e.getShowInfo(void 0,s,a,r,g)),console.debug("showsInfos",e.showsInfos),e.pageState.next(m.Gu.SUCCESS)}),(0,v.R)(e.nextShows$),(0,v.R)(e.destroy$)).subscribe({error:s=>(0,Q.q)(s,e.snackBar,e.pageState)}),i.pipe((0,I.w)(s=>(0,se.T)(...s.map(a=>e.tmdbService.getTmdbShow$(a,!1,{fetch:!0}).pipe((0,rt.K)(()=>(0,y.of)(void 0)))))),(0,C.U)(s=>{!s||!e.showsInfos||(e.showsInfos=e.showsInfos.map(a=>a.show?null===a.show.ids.tmdb?{...a,tmdbShow:null}:a.show.ids.tmdb!==s.id?a:{...a,tmdbShow:s}:a))}),(0,v.R)(e.nextShows$),(0,v.R)(e.destroy$)).subscribe({error:s=>(0,Q.q)(s,e.snackBar,e.pageState)})})()}getShowInfo(o,e,i,s,a){const r=a??o?.show;return{...o,show:r,showProgress:r&&e[r.ids.trakt],showWatched:i.find(p=>p.show.ids.trakt===r?.ids.trakt),isWatchlist:!!s?.find(p=>p.show.ids.trakt===r?.ids.trakt)}}searchSubmitted(o){var e=this;return(0,M.Z)(function*(){const i=o.target?.querySelector('input[type="search"]')?.value;yield e.router.navigate([],{queryParamsHandling:"merge",queryParams:i?{q:i}:void 0})})()}changeShowsSelection(o){var e=this;return(0,M.Z)(function*(){yield e.router.navigate([],{queryParamsHandling:"merge",queryParams:{slug:o.slug}})})()}static#t=this.\u0275fac=function(e){return new(e||pt)(t.Y36(z.X),t.Y36(q.U),t.Y36(w.F0),t.Y36(w.gz),t.Y36(st.X),t.Y36(B.ux),t.Y36(X.V),t.Y36(at.e),t.Y36(K.n))};static#e=this.\u0275cmp=t.Xpm({type:pt,selectors:[["t-add-show"]],standalone:!0,features:[t.qOj,t.jDz],decls:10,vars:11,consts:[[1,"search-form",3,"ngSubmit"],["appearance","fill","color","accent",1,"form-field"],["matInput","","type","search","enterkeyhint","search","name","search","data-test-id","add-show-search",3,"value","keyup.enter"],["searchInput",""],["aria-label","Show selection","class","show-selection",4,"ngIf"],[3,"loadingState"],[3,"isLoggedIn","showsInfos","withYear","withEpisodesCount","withAddButtons","back","add","remove"],["aria-label","Show selection",1,"show-selection"],["color","accent",3,"highlighted","click",4,"ngFor","ngForOf"],["color","accent",3,"highlighted","click"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(r){return i.searchSubmitted(r)}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search shows..."),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("keyup.enter",function(){t.CHM(s);const r=t.MAs(5);return t.KtG(r.blur())}),t.qZA()()(),t.YNc(6,Mi,2,1,"mat-chip-set",4),t.TgZ(7,"t-loading",5)(8,"t-shows",6),t.NdJ("add",function(r){return i.executeService.addToWatchlist(r)})("remove",function(r){return i.executeService.removeFromWatchlist(r)}),t.ALo(9,"async"),t.qZA()()}2&e&&(t.xp6(4),t.Q6J("value",i.searchValue),t.xp6(2),t.Q6J("ngIf",!i.searchValue),t.xp6(1),t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(9,9,i.authService.isLoggedIn$))("showsInfos",i.showsInfos)("withYear",!0)("withEpisodesCount",!0)("withAddButtons",!0)("back",i.router.url))},dependencies:[d.O5,d.sg,d.Ov,A.u5,A._Y,A.JL,A.F,R.lN,R.KE,R.hX,bt.c,bt.Nt,Ai,j,Ct,$.N,ot.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}.search-form[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]{width:100%}.show-selection[_ngcontent-%COMP%]{margin-top:-1.34375rem;margin-bottom:.75rem;display:inline-block}"]})}const Pi=P.z.object({q:P.z.string().optional(),slug:P.z.string().optional()}),Li=["searchInput"];class It extends D.X{constructor(o,e,i,s,a){super(),this.showService=o,this.tmdbService=e,this.router=i,this.route=s,this.snackBar=a,this.pageState=new O.X(m.Gu.LOADING)}ngOnInit(){var e,o=this;this.tmdbService.getTmdbShows$().pipe((0,v.R)(this.destroy$)).subscribe(e=>{this.tmdbShows=e}),this.route.queryParams.pipe((0,C.U)(e=>Oi.parse(e)),(0,v.R)(this.destroy$)).subscribe({next:(e=(0,M.Z)(function*(i){o.showsInfos=void 0,o.searchValue=i.q,o.search(o.searchValue),o.pageState.next(m.Gu.SUCCESS),o.searchValue||o.searchInput?.focus?.()}),function(s){return e.apply(this,arguments)}),error:e=>(0,Q.q)(e,this.snackBar,this.pageState)})}search(o){var i,e=this;!o||(this.showsInfos=void 0,this.showService.searchForAddedShows$(o).subscribe({next:(i=(0,M.Z)(function*(s){s.forEach(a=>{e.showsInfos||(e.showsInfos=[]),e.showsInfos.push({show:a,tmdbShow:a.ids.tmdb?e.tmdbShows?.[a.ids.tmdb]:void 0})}),console.debug("showsInfos",e.showsInfos),e.pageState.next(m.Gu.SUCCESS)}),function(a){return i.apply(this,arguments)}),error:i=>(0,Q.q)(i,this.snackBar,this.pageState)}))}searchByNavigating(){var o=this;return(0,M.Z)(function*(){yield o.router.navigate([],{queryParams:{q:o.searchValue??null},replaceUrl:!0})})()}static#t=this.\u0275fac=function(e){return new(e||It)(t.Y36(z.X),t.Y36(q.U),t.Y36(w.F0),t.Y36(w.gz),t.Y36(B.ux))};static#e=this.\u0275cmp=t.Xpm({type:It,selectors:[["t-search"]],viewQuery:function(e,i){if(1&e&&t.Gf(Li,5),2&e){let s;t.iGM(s=t.CRH())&&(i.searchInput=s.first)}},standalone:!0,features:[t.qOj,t.jDz],decls:8,vars:5,consts:[[1,"search-form"],["appearance","fill","color","accent",1,"form-field"],["matInput","","type","search","enterkeyhint","search","name","searchValue","cdkTrapFocus","","autocomplete","off","data-test-id","search",3,"ngModel","cdkTrapFocusAutoCapture","ngModelChange","keyup.enter"],["searchInput",""],[3,"loadingState"],[3,"showsInfos","back"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Search added shows..."),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("ngModelChange",function(r){return i.searchValue=r})("keyup.enter",function(){t.CHM(s);const r=t.MAs(5);return t.KtG(r.blur())})("ngModelChange",function(){return i.searchByNavigating()}),t.qZA()()(),t.TgZ(6,"t-loading",4),t._UZ(7,"t-shows",5),t.qZA()}2&e&&(t.xp6(4),t.Q6J("ngModel",i.searchValue)("cdkTrapFocusAutoCapture",!0),t.xp6(2),t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("back",i.router.url))},dependencies:[R.lN,R.KE,R.hX,bt.c,bt.Nt,A.u5,A._Y,A.Fj,A.JJ,A.JL,A.On,A.F,dt.rt,dt.mK,$.N,ot.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}.search-form[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]{width:100%}"]})}const Oi=P.z.object({q:P.z.string().optional()});var Fi=c(101);class kt extends D.X{constructor(o,e,i,s,a){super(),this.episodeService=o,this.snackBar=e,this.listService=i,this.configService=s,this.router=a,this.pageState=new O.X(m.Gu.LOADING),this.showsInfosAll=new O.X(void 0)}ngOnInit(){this.episodeService.getUpcomingEpisodeInfos$(198).pipe((0,v.R)(this.destroy$)).subscribe({next:o=>{let e=this.showsInfosAll.value;e||(e=[]),e.push(...o),this.showsInfosAll.next(e),this.pageState.next(m.Gu.SUCCESS)},error:o=>(0,Q.q)(o,this.snackBar,this.pageState)}),(0,x.a)([this.configService.config.$,this.listService.getWatchlistItems$(),this.showsInfosAll]).subscribe(([o,e,i])=>{if(!i)return;const s=i?.filter(a=>{if(!a.show)return!0;const r=this.listService.isWatchlistItem(e,a.show),p=!!o.upcomingFilters.find(l=>!(l.name!==m.ZR.WATCHLIST_ITEM||!l.value)&&("hide"===l.category?r:!r)),g=0===a.nextEpisode?.season,f=!!o.upcomingFilters.find(l=>!(l.name!==m.ZR.SPECIALS||!l.value)&&("hide"===l.category?g:!g));return!(p||f)});(0,Fi.Q)(s,this.showsInfos)||(this.showsInfos=s,console.debug("showsInfos",this.showsInfos))})}static#t=this.\u0275fac=function(e){return new(e||kt)(t.Y36(K.n),t.Y36(B.ux),t.Y36(st.X),t.Y36(ue.E),t.Y36(w.F0))};static#e=this.\u0275cmp=t.Xpm({type:kt,selectors:[["t-upcoming"]],standalone:!0,features:[t.qOj,t.jDz],decls:2,vars:6,consts:[[3,"loadingState"],[3,"showsInfos","withEpisode","withLinkToEpisode","withRelativeDate","back"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t._UZ(1,"t-shows",1),t.qZA()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("withEpisode",!0)("withLinkToEpisode",!0)("withRelativeDate",!0)("back",i.router.url))},dependencies:[$.N,ot.j],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"]})}function Ni(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().show,a=t.oxw();return t.KtG(a.executeService.removeFromWatchlist(s))}),t._uU(2," Remove from watchlist "),t.qZA(),t.BQk()}}function Yi(n,o){1&n&&t.YNc(0,Ni,3,0,"ng-container",5),2&n&&t.Q6J("ngIf",o.show)}const Ji=function(){return{}};class Tt extends D.X{constructor(o,e,i,s,a,r){super(),this.tmdbService=o,this.listService=e,this.snackBar=i,this.episodeService=s,this.executeService=a,this.router=r,this.pageState=new O.X(m.Gu.LOADING),this.paths=u}ngOnInit(){var e,o=this;(0,x.a)([this.listService.getWatchlistItems$(),this.tmdbService.getTmdbShows$(),this.episodeService.getEpisodes$()]).pipe((0,v.R)(this.destroy$)).subscribe({next:(e=(0,M.Z)(function*([i,s,a]){const r=i.map(p=>({show:p.show,tmdbShow:p.show.ids.tmdb?s[p.show.ids.tmdb]:void 0,isWatchlist:!0,nextEpisode:a[(0,ne.d)(p.show.ids.trakt,1,1)]}));(0,ie.TD)({sort:{by:m.PE.OLDEST_EPISODE},sortOptions:[{}]},r,a),o.showsInfos=r,console.debug("showsInfos",o.showsInfos),o.pageState.next(m.Gu.SUCCESS)}),function(s){return e.apply(this,arguments)}),error:e=>(0,Q.q)(e,this.snackBar,this.pageState)})}static#t=this.\u0275fac=function(e){return new(e||Tt)(t.Y36(q.U),t.Y36(st.X),t.Y36(B.ux),t.Y36(K.n),t.Y36(X.V),t.Y36(w.F0))};static#e=this.\u0275cmp=t.Xpm({type:Tt,selectors:[["t-watchlist"]],standalone:!0,features:[t.qOj,t.jDz],decls:9,vars:11,consts:[[3,"loadingState"],[3,"showsInfos","withEpisodesCount","withEpisode","menu","back"],["mat-fab","","color","primary","aria-label","Add show to watchlist",1,"fab",3,"routerLink"],["menu","matMenu"],["matMenuContent",""],[4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0),t._UZ(1,"t-shows",1),t.qZA(),t.TgZ(2,"a",2),t.ALo(3,"ngGenericPipe"),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()(),t.TgZ(6,"mat-menu",null,3),t.YNc(8,Yi,1,1,"ng-template",4),t.qZA()),2&e){const s=t.MAs(7);t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("showsInfos",i.showsInfos)("withEpisodesCount",!0)("withEpisode",!0)("menu",s)("back",i.router.url),t.xp6(1),t.Q6J("routerLink",t.xi3(3,7,t.DdM(10,Ji),i.paths.addShow))}},dependencies:[d.O5,H.Tx,H.VK,H.OP,H.KA,$.N,ot.j,Z.ot,Z.EX,w.rH,Y.r,Y.a,J.Ps,J.Hw],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"]})}var Et=c(8505),$i=c(9300),Te=c(4128),ht=c(136),k=c(4880);class At{transform(o){if(!o)return"...";let e=o.status;return o.networks?.[0]&&(e+=" \xb7 "+o.networks[0].name),e}static#t=this.\u0275fac=function(e){return new(e||At)};static#e=this.\u0275pipe=t.Yjl({name:"showSubheading",type:At,pure:!0,standalone:!0})}class Zt{transform(o){return function Bi(n){if(!n.videos)return;const o=[...n.videos.results];return[...n.videos.results].reverse().find(s=>"YouTube"===s.site&&"Trailer"===s.type)||o.find(s=>"YouTube"===s.site&&"Teaser"===s.type)}(o)}static#t=this.\u0275fac=function(e){return new(e||Zt)};static#e=this.\u0275pipe=t.Yjl({name:"getTrailer",type:Zt,pure:!0,standalone:!0})}class et{transform(o){return void 0!==o&&(null===o||new Date(o)>new Date)}static#t=this.\u0275fac=function(e){return new(e||et)};static#e=this.\u0275pipe=t.Yjl({name:"isInFuture",type:et,pure:!0,standalone:!0})}function Di(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",11),t.NdJ("load",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.posterLoaded=!0)})("click",function(){const a=t.CHM(e).ngIf,r=t.oxw(2);return t.KtG(r.showImageFunction(a))})("keyup",function(){const a=t.CHM(e).ngIf,r=t.oxw(2);return t.KtG(r.showImageFunction(a))}),t.qZA()}if(2&n){const e=o.ngIf,i=t.oxw(2);let s;t.Q6J("src",i.posterPrefixW185+e,t.LSH)("alt",i.tmdbShow||i.show?(null!==(s=null==i.tmdbShow?null:i.tmdbShow.name)&&void 0!==s?s:null==i.show?null:i.show.title)+" Poster":"Poster")}}function Qi(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Di,1,2,"img",10),t.BQk()),2&n){const e=t.oxw(),i=t.MAs(4);let s;t.xp6(1),t.Q6J("ngIf",e.posterPrefixW185&&(e.showWatched&&null!==(s=null==e.tmdbSeason?null:e.tmdbSeason.poster_path)&&void 0!==s?s:null==e.tmdbShow?null:e.tmdbShow.poster_path))("ngIfElse",i)}}function Hi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",12),t.NdJ("load",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.posterLoaded=!0)}),t.qZA()}}function Ri(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isFavorite?s.removeFavorite.emit(s.show):s.addFavorite.emit(s.show))}),t.TgZ(1,"mat-icon",14),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.ekj("remove",!e.isFavorite),t.xp6(2),t.hij(" ",e.isFavorite?"star":"star_outline"," ")}}function Gi(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(2),t.Oqu(e)}}function Ui(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.ALo(3,"slice"),t.ALo(4,"slice"),t.qZA(),t.TgZ(5,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isMoreOverviewShown=!s.isMoreOverviewShown)}),t._uU(6),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().ngIf,i=t.oxw();t.xp6(2),t.hij(" ",i.isMoreOverviewShown?e:(i.isSmall?t.Dn7(3,2,e,0,i.maxSmallOverviewLength):t.Dn7(4,6,e,0,i.maxLargeOverviewLength))+"..."," "),t.xp6(4),t.hij(" ",i.isMoreOverviewShown?"less":"more"," ")}}function zi(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Gi,3,1,"ng-container",2),t.YNc(2,Ui,7,10,"ng-container",2),t.qZA()),2&n){const e=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.isSmall?e.length<i.maxSmallOverviewLength:e.length<i.maxLargeOverviewLength),t.xp6(1),t.Q6J("ngIf",i.isSmall?e.length>=i.maxSmallOverviewLength:e.length>=i.maxLargeOverviewLength)}}function qi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const a=t.CHM(e).ngIf,r=t.oxw(2);return t.KtG(r.showTrailer.emit(a))}),t._uU(1," Trailer "),t.qZA()}}function ji(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.addShow.emit(s.show))}),t._uU(1," Mark show as seen "),t.qZA()}}function Wi(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,ji,2,0,"button",18),t.ALo(2,"isInFuture"),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isWatchlist?s.removeFromWatchlist.emit(s.show):s.addToWatchlist.emit(s.show))}),t._uU(4),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.nextEpisode&&!t.lcZ(2,2,e.nextEpisode.first_aired)),t.xp6(3),t.hij(" ",e.isWatchlist?"Remove from watchlist":"Add to watchlist"," ")}}function Ki(n,o){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,qi,2,0,"button",18),t.ALo(2,"getTrailer"),t.YNc(3,Wi,5,4,"ng-container",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,e.tmdbShow)),t.xp6(2),t.Q6J("ngIf",e.isLoggedIn&&e.isNewShow)}}class Mt{constructor(){this.addFavorite=new t.vpe,this.removeFavorite=new t.vpe,this.addToWatchlist=new t.vpe,this.removeFromWatchlist=new t.vpe,this.addShow=new t.vpe,this.showTrailer=new t.vpe,this.showImage=new t.vpe,this.posterLoaded=!1,this.isMoreOverviewShown=!1,this.maxSmallOverviewLength=96,this.maxLargeOverviewLength=504,this.posterPrefixW185=ht.m0,this.posterPrefixOriginal=ht.YY}showImageFunction(o){this.showImage.emit({url:this.posterPrefixOriginal+o,name:this.tmdbShow||this.show?(this.tmdbShow?.name??this.show?.title)+" Poster":"Poster"})}static#t=this.\u0275fac=function(e){return new(e||Mt)};static#e=this.\u0275cmp=t.Xpm({type:Mt,selectors:[["t-show-header"]],inputs:{isLoggedIn:"isLoggedIn",tmdbSeason:"tmdbSeason",showWatched:"showWatched",tmdbShow:"tmdbShow",nextEpisode:"nextEpisode",show:"show",isFavorite:"isFavorite",isSmall:"isSmall",isNewShow:"isNewShow",isWatchlist:"isWatchlist"},outputs:{addFavorite:"addFavorite",removeFavorite:"removeFavorite",addToWatchlist:"addToWatchlist",removeFromWatchlist:"removeFromWatchlist",addShow:"addShow",showTrailer:"showTrailer",showImage:"showImage"},standalone:!0,features:[t.jDz],decls:15,vars:8,consts:[[1,"header"],[1,"poster-wrapper"],[4,"ngIf"],["imgFallback",""],[1,"right"],[1,"mat-body-2","small-text"],[1,"title-wrapper"],[1,"mat-headline-5","title"],["mat-icon-button","","aria-label","Favorite","class","favorite-button",3,"remove","click",4,"ngIf"],["class","button-container",4,"ngIf"],["width","185","height","278","fetchpriority","high","data-test-id","poster-image",3,"src","alt","load","click","keyup",4,"ngIf","ngIfElse"],["width","185","height","278","fetchpriority","high","data-test-id","poster-image",3,"src","alt","load","click","keyup"],["ngSrc","assets/poster.png","width","154","height","231","priority","","alt","Poster",3,"load"],["mat-icon-button","","aria-label","Favorite",1,"favorite-button",3,"click"],[1,"favorite-icon"],[1,"mat-body","overview"],["mat-button","",3,"click"],[1,"button-container"],["class","button","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"button",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Qi,2,2,"ng-container",2),t.YNc(3,Hi,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"div",4)(6,"h4",5),t._uU(7),t.ALo(8,"showSubheading"),t.qZA(),t.TgZ(9,"div",6)(10,"h1",7),t._uU(11),t.qZA(),t.YNc(12,Ri,3,3,"button",8),t.qZA(),t.YNc(13,zi,3,2,"div",2),t.YNc(14,Ki,4,4,"div",9),t.qZA()()),2&e){let s;t.xp6(2),t.Q6J("ngIf",i.posterPrefixW185&&(i.showWatched?null!==(null!==(s=i.tmdbSeason)&&void 0!==s?s:i.tmdbShow):null!==i.tmdbShow)),t.xp6(5),t.Oqu(t.lcZ(8,6,i.tmdbShow)),t.xp6(4),t.Oqu(null==i.tmdbShow?null:i.tmdbShow.name),t.xp6(1),t.Q6J("ngIf",i.tmdbShow&&i.showWatched),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow?null:i.tmdbShow.overview),t.xp6(1),t.Q6J("ngIf",i.show&&i.tmdbShow)}},dependencies:[d.O5,d.Zd,At,J.Ps,J.Hw,Z.ot,Z.lW,Z.RK,d.OU,Zt,et],styles:[".header[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 1fr;gap:1rem}@media (min-width: 576px){.header[_ngcontent-%COMP%]{grid-template-columns:13rem 1fr;gap:3rem}}.poster-wrapper[_ngcontent-%COMP%]{aspect-ratio:2/3;border-radius:var(--border-radius);overflow:hidden;display:flex;place-items:center}.right[_ngcontent-%COMP%]{overflow:hidden}.small-text[_ngcontent-%COMP%]{color:var(--text-color-2);margin-bottom:.5rem;margin-top:0}@media (min-width: 576px){.small-text[_ngcontent-%COMP%]{margin-bottom:1rem}}.title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;margin-bottom:.67em;--icon-size: 1.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]{font-size:2rem;--icon-size: 1.5rem}}.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0;margin-right:.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:.5rem}}.title-wrapper[_ngcontent-%COMP%]   .favorite-button[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);padding:0}.title-wrapper[_ngcontent-%COMP%]   .favorite-button.remove[_ngcontent-%COMP%]{display:none}.title-wrapper[_ngcontent-%COMP%]:hover   .favorite-button.remove[_ngcontent-%COMP%]{display:flex}.title-wrapper[_ngcontent-%COMP%]   .favorite-icon[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size);font-size:var(--icon-size);line-height:var(--icon-size)}.overview[_ngcontent-%COMP%]{margin-bottom:.25rem}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1rem}"]})}var Ee=c(1629);function Vi(n,o){if(1&n&&t._UZ(0,"img",8),2&n){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("ngSrc",i.posterPrefix+e.profile_path)("alt",e.name)}}function Xi(n,o){if(1&n&&t._UZ(0,"img",9),2&n){const e=t.oxw().$implicit;t.Q6J("alt",e.name)}}function tn(n,o){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,Vi,1,2,"img",4),t.YNc(2,Xi,1,1,"ng-template",null,5,t.W1O),t.TgZ(4,"p",6),t._uU(5),t.qZA(),t.TgZ(6,"p",7),t._uU(7),t.qZA()()),2&n){const e=o.$implicit,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.profile_path)("ngIfElse",i),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.roles[0].character)}}class Pt{constructor(){this.posterPrefix=ht.m0}static#t=this.\u0275fac=function(e){return new(e||Pt)};static#e=this.\u0275cmp=t.Xpm({type:Pt,selectors:[["t-show-cast"]],inputs:{cast:"cast"},standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"mat-subtitle-1"],[1,"cast-wrapper"],["class","cast",4,"ngFor","ngForOf"],[1,"cast"],["width","185","height","278","class","cast-profile",3,"ngSrc","alt",4,"ngIf","ngIfElse"],["imgFallback",""],["ticker","",1,"mat-body","cast-name"],["ticker","",1,"mat-body","cast-character"],["width","185","height","278",1,"cast-profile",3,"ngSrc","alt"],["ngSrc","assets/poster.png","width","185","height","278",3,"alt"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Cast"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,tn,8,4,"div",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",i.cast))},dependencies:[d.ez,d.sg,d.O5,d.Zd,Ee.d],styles:[".cast-wrapper[_ngcontent-%COMP%]{display:flex;gap:1rem;overflow:auto;padding-bottom:.5rem}.cast-wrapper[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-shrink:0;width:6rem}@media (min-width: 576px){.cast-wrapper[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]{width:11rem}}.cast-wrapper[_ngcontent-%COMP%]   .cast-profile[_ngcontent-%COMP%]{aspect-ratio:2/3;border-radius:var(--border-radius)}.cast-wrapper[_ngcontent-%COMP%]   .cast-name[_ngcontent-%COMP%], .cast-wrapper[_ngcontent-%COMP%]   .cast-character[_ngcontent-%COMP%]{margin:0}.cast-wrapper[_ngcontent-%COMP%]   .cast-name[_ngcontent-%COMP%]{margin-top:.75rem}.cast-wrapper[_ngcontent-%COMP%]   .cast-character[_ngcontent-%COMP%]{color:var(--text-color-2)}"]})}class Lt{transform(o){return o.map(e=>e.name).join(", ")}static#t=this.\u0275fac=function(e){return new(e||Lt)};static#e=this.\u0275pipe=t.Yjl({name:"genre",type:Lt,pure:!0,standalone:!0})}class Ot{transform(o){return o.map(e=>e.name).join(", ")}static#t=this.\u0275fac=function(e){return new(e||Ot)};static#e=this.\u0275pipe=t.Yjl({name:"createdBy",type:Ot,pure:!0,standalone:!0})}function en(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"genre"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Genre: ",t.lcZ(2,1,e.tmdbShow.genres),"")}}function nn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"createdBy"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Created by: ",t.lcZ(2,1,e.tmdbShow.created_by)," ")}}function on(n,o){1&n&&(t.ynx(0),t._uU(1," First airing "),t.BQk())}function sn(n,o){1&n&&t._uU(0,"First aired")}function an(n,o){if(1&n&&(t.TgZ(0,"p",5),t.YNc(1,on,2,0,"ng-container",2),t.ALo(2,"isInFuture"),t.YNc(3,sn,1,0,"ng-template",null,6,t.W1O),t._uU(5),t.ALo(6,"date"),t.qZA()),2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,i.tmdbShow.first_air_date))("ngIfElse",e),t.xp6(4),t.hij(": ",t.xi3(6,5,i.tmdbShow.first_air_date,"d. MMM. yyyy")," ")}}function cn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"number"),t.TgZ(3,"span",7),t._uU(4),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Rating: ",t.xi3(2,2,e.tmdbShow.vote_average,"1.0-1")," "),t.xp6(3),t.hij("(",e.tmdbShow.vote_count," votes)")}}function rn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" Runtime: ",e.tmdbShow.episode_run_time[0]+"min"," ")}}function dn(n,o){if(1&n&&(t.TgZ(0,"p",5),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Type: ",e.tmdbShow.type,"")}}function pn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,en,3,3,"p",4),t.YNc(2,nn,3,3,"p",4),t.YNc(3,an,7,8,"p",4),t.YNc(4,cn,5,5,"p",4),t.YNc(5,rn,2,1,"p",4),t.YNc(6,dn,2,1,"p",4),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.tmdbShow.genres.length),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.created_by.length),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.first_air_date),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.vote_count),t.xp6(1),t.Q6J("ngIf",e.tmdbShow.episode_run_time.length),t.xp6(1),t.Q6J("ngIf","Scripted"!==e.tmdbShow.type)}}function hn(n,o){1&n&&(t.TgZ(0,"p",5),t._uU(1,"No details available."),t.qZA())}class Ft{constructor(){this.hasDetails=!1}ngOnChanges(o){o.tmdbShow&&(this.hasDetails=Boolean(this.tmdbShow&&(this.tmdbShow.genres.length||this.tmdbShow.created_by.length||this.tmdbShow.first_air_date||this.tmdbShow.vote_count||this.tmdbShow.episode_run_time.length||"Scripted"!==this.tmdbShow.type)))}static#t=this.\u0275fac=function(e){return new(e||Ft)};static#e=this.\u0275cmp=t.Xpm({type:Ft,selectors:[["t-show-details"]],inputs:{tmdbShow:"tmdbShow"},standalone:!0,features:[t.TTD,t.jDz],decls:6,vars:2,consts:[[1,"mat-subtitle-1"],[1,"details"],[4,"ngIf","ngIfElse"],["noDetails",""],["class","mat-body",4,"ngIf"],[1,"mat-body"],["isInPast",""],[1,"votes"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Details"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,pn,7,6,"ng-container",2),t.YNc(4,hn,2,0,"ng-template",null,3,t.W1O),t.qZA()),2&e){const s=t.MAs(5);t.xp6(3),t.Q6J("ngIf",i.tmdbShow&&i.hasDetails)("ngIfElse",s)}},dependencies:[d.ez,d.O5,d.JJ,d.uU,Lt,Ot,et],styles:[".details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.5rem}@media (min-width: 576px){.details[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:1rem}}.details[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.votes[_ngcontent-%COMP%]{color:var(--text-color-2)}"]})}var ce=c(3322),Ae=c(1572);function ln(n,o){1&n&&t.GkF(0)}const Ze=function(n,o,e){return{show:n,season:o,episode:e}},Me=function(n){return{back:n}};function mn(n,o){if(1&n&&(t.TgZ(0,"a",5),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.YNc(3,ln,1,0,"ng-container",6),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(3);t.Q6J("routerLink",e.show&&e.episode?t.xi3(1,4,t.kEZ(9,Ze,t.lcZ(2,7,e.show),e.episode.season+"",e.episode.number+""),e.paths.episode):null)("state",t.VKq(13,Me,e.back)),t.xp6(3),t.Q6J("ngIf",!1)("ngIfElse",i)}}function un(n,o){1&n&&t.GkF(0)}function _n(n,o){if(1&n&&(t.TgZ(0,"div",7),t.YNc(1,un,1,0,"ng-container",6),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.withLink)("ngIfElse",i)}}function gn(n,o){if(1&n&&(t.TgZ(0,"span",9),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" \xb7 ",t.xi3(2,1,e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}function fn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.ALo(3,"number"),t.YNc(4,gn,3,4,"span",8),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.lnq(" S",t.xi3(2,4,e.episode.season,"2.0-0"),"E",t.xi3(3,7,e.episode.number,"2.0-0")," ",e.episode.title," "),t.xp6(3),t.Q6J("ngIf",e.episode.first_aired)}}function vn(n,o){1&n&&(t.ynx(0),t._uU(1,"\xa0"),t.BQk())}function wn(n,o){1&n&&(t.TgZ(0,"div",13),t._UZ(1,"mat-spinner",14),t.qZA())}function bn(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",10),t.YNc(2,wn,2,0,"div",11),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.episode?null!=s.episodeProgress&&s.episodeProgress.completed?s.removeEpisode.emit({episode:s.episode,show:s.show}):s.addEpisode.emit({episode:s.episode,show:s.show}):null)}),t.ALo(4,"isInFuture"),t._uU(5),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.isSeenLoading),t.xp6(1),t.Q6J("disabled",e.isSeenLoading||!e.episode||t.lcZ(4,3,e.episode.first_aired)),t.xp6(2),t.hij(" ",null!=e.episodeProgress&&e.episodeProgress.completed?"Mark as unseen":"Mark as seen"," ")}}function xn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,mn,4,15,"a",2),t.YNc(2,_n,2,2,"div",3),t.TgZ(3,"a",4),t.ALo(4,"ngGenericPipe"),t.ALo(5,"showSlug"),t.YNc(6,fn,5,10,"ng-container",0),t.YNc(7,vn,2,0,"ng-container",0),t.qZA(),t.YNc(8,bn,6,5,"ng-container",0),t.ALo(9,"isInFuture"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.withLink),t.xp6(1),t.Q6J("ngIf",!e.withLink),t.xp6(1),t.Q6J("routerLink",e.show&&e.episode?t.xi3(4,7,t.kEZ(14,Ze,t.lcZ(5,10,e.show),e.episode.season+"",e.episode.number+""),e.paths.episode):null)("state",t.VKq(18,Me,e.back)),t.xp6(3),t.Q6J("ngIf",e.episode),t.xp6(1),t.Q6J("ngIf",!e.episode),t.xp6(1),t.Q6J("ngIf",e.isLoggedIn&&(!e.isNewShow||e.isNewShow&&!t.lcZ(9,12,null==e.episode?null:e.episode.first_aired)))}}function yn(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"p",15),t._uU(2),t.qZA(),t.TgZ(3,"p",16),t._uU(4,"Source: TMDB"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.episode.overview||"No episode description."," ")}}function Sn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",19),t.NdJ("load",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.stillLoaded=!0)})("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.showImageFunction())})("keyup",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.showImageFunction())}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("src",e.stillPrefix+(null==e.tmdbEpisode?null:e.tmdbEpisode.still_path),t.LSH)}}function Cn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Sn,1,1,"img",18),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.tmdbEpisode?null:e.tmdbEpisode.still_path)}}function In(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",20),t.NdJ("load",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.stillLoaded=!0)}),t.qZA()}}function kn(n,o){if(1&n&&(t.YNc(0,Cn,2,1,"ng-container",6),t.YNc(1,In,1,0,"ng-template",null,17,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.stillPrefix&&(void 0===i.tmdbEpisode||(null==i.tmdbEpisode?null:i.tmdbEpisode.still_path)))("ngIfElse",e)}}class lt{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.showImage=new t.vpe,this.stillLoaded=!1,this.stillPrefix=ht.YY,this.paths=u,this.back=history.state.back}showImageFunction(){this.withLink||this.showImage.emit({url:this.stillPrefix+this.tmdbEpisode?.still_path,name:"Episode still"})}static#t=this.\u0275fac=function(e){return new(e||lt)};static#e=this.\u0275cmp=t.Xpm({type:lt,selectors:[["t-episode"]],inputs:{isLoggedIn:"isLoggedIn",show:"show",episode:"episode",isNewShow:"isNewShow",episodeProgress:"episodeProgress",tmdbEpisode:"tmdbEpisode",isSeenLoading:"isSeenLoading",withLink:"withLink"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode",showImage:"showImage"},standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[4,"ngIf"],["image",""],["class","still-wrapper",3,"routerLink","state",4,"ngIf"],["class","still-wrapper",4,"ngIf"],[1,"mat-body-2","title",3,"routerLink","state"],[1,"still-wrapper",3,"routerLink","state"],[4,"ngIf","ngIfElse"],[1,"still-wrapper"],["class","subtitle",4,"ngIf"],[1,"subtitle"],[1,"button","button-container"],["class","spinner-container",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"spinner-container"],["diameter","24","color","accent"],[1,"mat-body","description"],[1,"mat-body","source"],["imgFallback",""],["width","1920","height","1080","fetchpriority","high","alt","Episode still","class","still",3,"src","load","click","keyup",4,"ngIf"],["width","1920","height","1080","fetchpriority","high","alt","Episode still",1,"still",3,"src","load","click","keyup"],["ngSrc","assets/still.png","width","800","height","450","priority","","alt","Still",3,"load"]],template:function(e,i){1&e&&(t.YNc(0,xn,10,20,"ng-container",0),t.YNc(1,yn,5,1,"ng-container",0),t.YNc(2,kn,3,2,"ng-template",null,1,t.W1O)),2&e&&(t.Q6J("ngIf",null!==i.episode&&i.show),t.xp6(1),t.Q6J("ngIf",i.episode))},dependencies:[d.O5,w.Bz,w.rH,ce.v,Y.r,Y.a,d.uU,d.JJ,et,Ae.Cq,Ae.Ou,d.Zd,Z.ot,Z.lW],styles:[".still-wrapper[_ngcontent-%COMP%]{aspect-ratio:16/9;margin-bottom:.5rem;overflow:hidden;display:flex;place-items:center}@media (min-width: 576px){.still-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}}.button[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.button.button-container[_ngcontent-%COMP%]{display:inline-block;position:relative;height:2.25rem}.spinner-container[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1;display:flex;align-items:center;justify-content:center}.source[_ngcontent-%COMP%]{color:var(--text-color-2);font-style:italic;margin-bottom:0}.subtitle[_ngcontent-%COMP%]{color:var(--text-color-2)}.description[_ngcontent-%COMP%]{margin-top:.5rem}"]})}var re=c(3022);function Tn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" \xb7 ",e.tmdbShow.number_of_episodes," episodes ")}}function En(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" \xb7 ",e.showProgress.aired-e.showProgress.completed," remaining ")}}function An(n,o){if(1&n&&(t.TgZ(0,"span",7),t.YNc(1,Tn,2,1,"ng-container",2),t.YNc(2,En,2,1,"ng-container",2),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.tmdbShow&&(!e.showProgress||0===e.showProgress.completed)),t.xp6(1),t.Q6J("ngIf",e.showProgress&&e.showProgress.completed>0&&e.showProgress.aired-e.showProgress.completed)}}function Zn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"t-episode",8),t.NdJ("addEpisode",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.addEpisode.emit(s))})("removeEpisode",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.removeEpisode.emit(s))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("isLoggedIn",e.isLoggedIn)("show",e.show)("episode",e.nextEpisodeTrakt)("tmdbEpisode",e.nextEpisodeTmdb)("episodeProgress",e.nextEpisodeProgress)("isNewShow",e.isNewShow)("isSeenLoading",e.seenLoading===e.state.LOADING)("withLink",!0)}}function Mn(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"h2",4),t._uU(2," Next episode "),t.YNc(3,An,3,2,"span",5),t.qZA(),t.YNc(4,Zn,1,8,"t-episode",6),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.showProgress||e.tmdbShow),t.xp6(1),t.Q6J("ngIf",e.show&&e.tmdbShow)}}function Pn(n,o){1&n&&(t.TgZ(0,"h3",9),t._uU(1," No next episode. "),t.qZA())}function Ln(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Mn,5,2,"ng-container",2),t.YNc(2,Pn,2,0,"h3",3),t.ALo(3,"isShowEnded"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null!==e.nextEpisodeTrakt),t.xp6(1),t.Q6J("ngIf",e.showWatched&&null===e.nextEpisodeTrakt&&!t.lcZ(3,2,e.tmdbShow))}}function On(n,o){1&n&&(t.TgZ(0,"div",10),t._uU(1,"..."),t.qZA())}class Nt{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.state=m.Gu}static#t=this.\u0275fac=function(e){return new(e||Nt)};static#e=this.\u0275cmp=t.Xpm({type:Nt,selectors:[["t-show-next-episode"]],inputs:{isLoggedIn:"isLoggedIn",isLoading:"isLoading",nextEpisodeTrakt:"nextEpisodeTrakt",nextEpisodeTmdb:"nextEpisodeTmdb",nextEpisodeProgress:"nextEpisodeProgress",showProgress:"showProgress",isNewShow:"isNewShow",tmdbShow:"tmdbShow",show:"show",showWatched:"showWatched",seenLoading:"seenLoading"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode"},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nextEpisodeLoading",""],[4,"ngIf"],["class","mat-subtitle-1",4,"ngIf"],[1,"mat-subtitle-1","next-text"],["class","subtitle",4,"ngIf"],[3,"isLoggedIn","show","episode","tmdbEpisode","episodeProgress","isNewShow","isSeenLoading","withLink","addEpisode","removeEpisode",4,"ngIf"],[1,"subtitle"],[3,"isLoggedIn","show","episode","tmdbEpisode","episodeProgress","isNewShow","isSeenLoading","withLink","addEpisode","removeEpisode"],[1,"mat-subtitle-1"],[1,"loading"]],template:function(e,i){if(1&e&&(t.YNc(0,Ln,4,4,"ng-container",0),t.YNc(1,On,2,0,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",!i.isLoading)("ngIfElse",s)}},dependencies:[d.O5,lt,re.t],styles:[".loading[_ngcontent-%COMP%]{background:var(--background-2);padding:1rem;border-radius:var(--border-radius);opacity:.5}.subtitle[_ngcontent-%COMP%]{color:var(--text-color-2)}"]})}var it=c(4633),Pe=c(1521),Fn=c(953),Nn=c(833);function mt(n){if(!n)throw Error("Empty season title");return"Season 0"===n?"Specials":n}class ut{transform(o){return mt(o)}static#t=this.\u0275fac=function(e){return new(e||ut)};static#e=this.\u0275pipe=t.Yjl({name:"seasonTitle",type:ut,pure:!0,standalone:!0})}var Yt=c(3162);function Jn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" (",e.seasonProgress.completed,"/",e.episodesAired,") ")}}function $n(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" (",e.season.episode_count," episodes) ")}}function Bn(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"seasonTitle"),t.TgZ(4,"span",2),t.YNc(5,Jn,2,2,"ng-container",0),t.YNc(6,$n,2,1,"ng-container",0),t.qZA()(),t._UZ(7,"mat-progress-bar",3),t.BQk()),2&n){const e=t.oxw();let i;t.xp6(2),t.hij(" ",t.lcZ(3,4,"Season "+(null!==(i=null==e.seasonProgress?null:e.seasonProgress.number)&&void 0!==i?i:null==e.season?null:e.season.season_number))," "),t.xp6(3),t.Q6J("ngIf",e.seasonProgress),t.xp6(1),t.Q6J("ngIf",!e.seasonProgress&&e.season),t.xp6(1),t.Q6J("value",e.seasonProgress&&e.episodesAired?e.seasonProgress.completed/e.episodesAired*100:0)}}class Jt{ngOnChanges(o){(o.seasonProgress||o.seasonEpisodes)&&(this.episodesAired=this.seasonProgress?.aired)}getEpisodesAiredCount(o){return o?o.filter(i=>function Yn(n){return(0,Nn.Z)(1,arguments),(0,Fn.Z)(n).getTime()<Date.now()}(new Date(i.first_aired+""))).length:0}static#t=this.\u0275fac=function(e){return new(e||Jt)};static#e=this.\u0275cmp=t.Xpm({type:Jt,selectors:[["t-show-season-item"]],inputs:{seasonProgress:"seasonProgress",seasonsEpisodes:"seasonsEpisodes",season:"season"},standalone:!0,features:[t.TTD,t.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mat-body-2","title"],[1,"episodes-text"],["mode","determinate","color","accent","aria-label","Season episodes watched percentage of all season episodes",3,"value"]],template:function(e,i){1&e&&t.YNc(0,Bn,8,6,"ng-container",0),2&e&&t.Q6J("ngIf",i.seasonProgress||i.season)},dependencies:[ut,d.O5,Yt.Cv,Yt.pW],styles:["[_nghost-%COMP%]{width:100%;height:100%}.title[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:0}@media (min-width: 576px){.title[_ngcontent-%COMP%]{margin-bottom:1rem}}.episodes-text[_ngcontent-%COMP%]{color:var(--text-color-2)}"]})}const Le=function(n,o){return{show:n,season:o}},Oe=function(n){return{back:n}};function Dn(n,o){if(1&n&&(t.TgZ(0,"a",4),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t._UZ(4,"t-show-season-item",5),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,4,t.WLB(9,Le,t.lcZ(2,7,i.show),e.number+""),i.paths.season))("state",t.VKq(12,Oe,i.back)),t.xp6(4),t.Q6J("seasonProgress",e)("seasonsEpisodes",i.seasonsEpisodes)}}function Qn(n,o){if(1&n&&(t.TgZ(0,"mat-list",2),t.YNc(1,Dn,5,14,"a",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.showProgress.seasons)}}function Hn(n,o){if(1&n&&(t.TgZ(0,"a",4),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t._UZ(4,"t-show-season-item",6),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,3,t.WLB(8,Le,t.lcZ(2,6,i.show),e.season_number+""),i.paths.season))("state",t.VKq(11,Oe,i.back)),t.xp6(4),t.Q6J("season",e)}}function Rn(n,o){if(1&n&&(t.TgZ(0,"mat-list"),t.YNc(1,Hn,5,13,"a",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tmdbShow.seasons)}}class $t{constructor(){this.paths=u}static#t=this.\u0275fac=function(e){return new(e||$t)};static#e=this.\u0275cmp=t.Xpm({type:$t,selectors:[["t-show-seasons"]],inputs:{show:"show",showProgress:"showProgress",seasonsEpisodes:"seasonsEpisodes",tmdbShow:"tmdbShow",back:"back"},standalone:!0,features:[t.jDz],decls:2,vars:2,consts:[["class","seasons-list",4,"ngIf"],[4,"ngIf"],[1,"seasons-list"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state",4,"ngFor","ngForOf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state"],[3,"seasonProgress","seasonsEpisodes"],[3,"season"]],template:function(e,i){1&e&&(t.YNc(0,Qn,2,1,"mat-list",0),t.YNc(1,Rn,2,1,"mat-list",1)),2&e&&(t.Q6J("ngIf",i.showProgress),t.xp6(1),t.Q6J("ngIf",i.tmdbShow&&!i.showProgress))},dependencies:[it.ie,it.i$,it.Tg,d.O5,d.sg,b.si,b.wG,Pe.g,w.rH,Jt,ce.v,Y.r,Y.a],styles:[".seasons-list[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"]})}function Gn(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Website"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href",null==e.tmdbShow?null:e.tmdbShow.homepage,t.LSH)}}function Un(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Trakt"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://trakt.tv/shows/"+(null==e.show||null==e.show.ids?null:e.show.ids.slug),t.LSH)}}function zn(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"TMDB"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.themoviedb.org/tv/"+(null==e.show||null==e.show.ids?null:e.show.ids.tmdb),t.LSH)}}function qn(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"IMDB"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://imdb.com/title/"+(null==e.show||null==e.show.ids?null:e.show.ids.imdb),t.LSH)}}function jn(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"TVDB"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.thetvdb.com/dereferrer/series/"+(null==e.show||null==e.show.ids?null:e.show.ids.tvdb),t.LSH)}}function Wn(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Twitter"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.twitter.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.twitter_id),t.LSH)}}function Kn(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Instagram"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.instagram.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.instagram_id),t.LSH)}}function Vn(n,o){if(1&n&&(t.TgZ(0,"a",3),t._uU(1,"Facebook"),t.qZA()),2&n){const e=t.oxw();t.Q6J("href","https://www.facebook.com/"+(null==e.tmdbShow||null==e.tmdbShow.external_ids?null:e.tmdbShow.external_ids.facebook_id),t.LSH)}}class Bt{static#t=this.\u0275fac=function(e){return new(e||Bt)};static#e=this.\u0275cmp=t.Xpm({type:Bt,selectors:[["t-show-links"]],inputs:{show:"show",tmdbShow:"tmdbShow"},standalone:!0,features:[t.jDz],decls:11,vars:8,consts:[[1,"mat-subtitle-1"],[1,"links"],["mat-stroked-button","","target","_blank","rel","noopener norefferer",3,"href",4,"ngIf"],["mat-stroked-button","","target","_blank","rel","noopener norefferer",3,"href"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Links"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,Gn,2,1,"a",2),t.YNc(4,Un,2,1,"a",2),t.YNc(5,zn,2,1,"a",2),t.YNc(6,qn,2,1,"a",2),t.YNc(7,jn,2,1,"a",2),t.YNc(8,Wn,2,1,"a",2),t.YNc(9,Kn,2,1,"a",2),t.YNc(10,Vn,2,1,"a",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",null==i.tmdbShow?null:i.tmdbShow.homepage),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.slug),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.tmdb),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.imdb),t.xp6(1),t.Q6J("ngIf",null==i.show||null==i.show.ids?null:i.show.ids.tvdb),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.twitter_id),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.instagram_id),t.xp6(1),t.Q6J("ngIf",null==i.tmdbShow||null==i.tmdbShow.external_ids?null:i.tmdbShow.external_ids.facebook_id))},dependencies:[d.ez,d.O5,Z.ot,Z.zs],styles:[".links[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}"]})}class Dt{transform(o){return o===m.Gu.ERROR}static#t=this.\u0275fac=function(e){return new(e||Dt)};static#e=this.\u0275pipe=t.Yjl({name:"isError",type:Dt,pure:!0,standalone:!0})}var Xn=c(6123),to=c(2289),de=c(1481),Fe=c(1884);class W{constructor(o){this.snackBar=o}params$(o,e,i){return o.pipe((0,C.U)(s=>e.parse(s)),(0,Fe.x)(),(0,k.J)("params",this.snackBar,i))}static#t=this.\u0275fac=function(e){return new(e||W)(t.LFG(B.ux))};static#e=this.\u0275prov=t.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"})}var pe=c(5137);function eo(n,o){1&n&&t._UZ(0,"t-show-cast",7),2&n&&t.Q6J("cast",o.ngIf)}function io(n,o){if(1&n&&(t._UZ(0,"t-show-details",8),t.ALo(1,"async")),2&n){const e=t.oxw();t.Q6J("tmdbShow",t.lcZ(1,1,e.tmdbShow$))}}function no(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"t-show-next-episode",9),t.NdJ("addEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.addToHistory(s.episode,s.show))})("removeEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.executeService.removeEpisode(s.episode,s.show))}),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"isError"),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.ALo(12,"async"),t.ALo(13,"async"),t.qZA()}if(2&n){const e=t.oxw();let i,s,a;t.Q6J("isLoggedIn",t.lcZ(1,11,e.authService.isLoggedIn$))("isLoading",null===t.lcZ(2,13,e.nextEpisode$)&&!t.lcZ(3,15,t.lcZ(4,17,e.pageState)))("nextEpisodeTrakt",null==(i=t.lcZ(5,19,e.nextEpisode$))?null:i[0])("nextEpisodeTmdb",null==(s=t.lcZ(6,21,e.nextEpisode$))?null:s[1])("nextEpisodeProgress",null==(a=t.lcZ(7,23,e.nextEpisode$))?null:a[2])("showProgress",t.lcZ(8,25,e.showProgress$))("isNewShow",void 0===t.lcZ(9,27,e.showProgress$))("tmdbShow",t.lcZ(10,29,e.tmdbShow$))("show",t.lcZ(11,31,e.show$))("showWatched",t.lcZ(12,33,e.showWatched$))("seenLoading",t.lcZ(13,35,e.seenLoading))}}function oo(n,o){if(1&n&&(t._UZ(0,"t-show-seasons",10),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&n){const e=t.oxw();t.Q6J("show",t.lcZ(1,5,e.show$))("showProgress",t.lcZ(2,7,e.showProgress$))("seasonsEpisodes",t.lcZ(3,9,e.seasonEpisodes$))("tmdbShow",t.lcZ(4,11,e.tmdbShow$))("back",e.back)}}function so(n,o){if(1&n&&(t._UZ(0,"t-show-links",11),t.ALo(1,"async"),t.ALo(2,"async")),2&n){const e=t.oxw();t.Q6J("show",t.lcZ(1,2,e.show$))("tmdbShow",t.lcZ(2,4,e.tmdbShow$))}}class Qt extends D.X{constructor(o,e,i,s,a,r,p,g,f,l,T,S,N){super(),this.route=o,this.showService=e,this.tmdbService=i,this.episodeService=s,this.snackBar=a,this.executeService=r,this.observer=p,this.title=g,this.paramService=f,this.seasonService=l,this.listService=T,this.authService=S,this.dialogService=N,this.pageState=new O.X(m.Gu.LOADING),this.seenLoading=new O.X(m.Gu.SUCCESS),this.back=history.state.back,this.isSmall$=this.observer.observe([`(max-width: ${ht.SM})`]).pipe((0,C.U)(h=>h.matches)),this.params$=this.paramService.params$(this.route.params,ao,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState).pipe((0,Et.b)(h=>{this.title.setTitle(`${h.title} - Trakify`),this.pageState.next(m.Gu.SUCCESS)}),(0,_e.d)()),this.isWatchlist$=(0,x.a)([this.show$,this.listService.watchlist.$]).pipe((0,C.U)(([h,_])=>!!_?.find(E=>E.show.ids.trakt===h.ids.trakt)),(0,k.J)("isWatchlist",this.snackBar,this.pageState)),this.showWatched$=this.show$.pipe((0,I.w)(h=>this.showService.getShowWatched$(h)),(0,k.J)("showWatched",this.snackBar,this.pageState)),this.showProgress$=this.show$.pipe((0,I.w)(h=>this.showService.getShowProgress$(h)),(0,C.U)(h=>{if(h)return{...h,seasons:[...h.seasons].reverse()}}),(0,k.J)("showProgress",this.snackBar,this.pageState)),this.tmdbShow$=this.show$.pipe((0,I.w)(h=>this.tmdbService.getTmdbShow$(h,!0,{fetchAlways:!0})),(0,C.U)(h=>{if(!h)return;const _={...h,seasons:[...h.seasons]},E=_.seasons.findIndex(ft=>0===ft.season_number);return E>=0&&_.seasons.push(_.seasons.splice(E,1)[0]),_}),(0,k.J)("tmdbShow",this.snackBar,this.pageState,"An error occurred while fetching the tmdb show")),this.isFavorite$=(0,x.a)([this.show$,this.showService.favorites.$]).pipe((0,C.U)(([h,_])=>!!_?.includes(h.ids.trakt)),(0,k.J)("isFavorite",this.snackBar,this.pageState)),this.nextEpisode$=(0,x.a)([this.tmdbShow$,this.showProgress$,this.showWatched$,this.show$]).pipe((0,C.U)(([h,_,E,ft])=>{const nt=(0,re.D)(h);return{seasonNumber:_&&null!==_?.next_episode?_?.next_episode?.season:(nt||null===_?.next_episode)&&E?null:1,episodeNumber:_&&null!==_?.next_episode?_?.next_episode?.number:(nt||null===_?.next_episode)&&E?null:1,show:ft,showProgress:_}}),(0,Xn.a)(),(0,I.w)(({seasonNumber:h,episodeNumber:_,show:E,showProgress:ft})=>{const nt=void 0!==h&&void 0!==_&&null!==h&&null!==_;return(0,x.a)([nt?this.episodeService.getEpisode$(E,h,_,{sync:!0,fetchAlways:!0}).pipe((0,rt.K)(()=>(0,y.of)(void 0))):(0,y.of)(h),nt?this.tmdbService.getTmdbEpisode$(E,h,_,{sync:!0,fetchAlways:!0}).pipe((0,rt.K)(()=>(0,y.of)(void 0))):(0,y.of)(h),nt?(0,y.of)(ft?.seasons.find(vt=>vt.number===h)?.episodes?.find(vt=>vt.number===_)).pipe((0,rt.K)(()=>(0,y.of)(void 0))):(0,y.of)(h)])}),(0,k.J)("nextEpisode",this.snackBar,this.pageState)),this.tmdbSeason$=(0,x.a)([this.show$,this.nextEpisode$]).pipe((0,I.w)(([h,_])=>{const E=_[0];return E?this.tmdbService.getTmdbSeason$(h,E.season,!0,!0):(0,y.of)(void 0)}),(0,k.J)("tmdbSeason",this.snackBar,this.pageState)),this.seasonEpisodes$=(0,x.a)([this.show$,this.tmdbShow$]).pipe((0,$i.h)(h=>!(0,re.D)(h[1])),(0,I.w)(([h,_])=>_?(0,Te.D)([..._.seasons.map(E=>(0,Te.D)([(0,y.of)(E.season_number),this.seasonService.getSeasonEpisodes$(h,E.season_number)]).pipe((0,rt.K)(()=>(0,y.of)([E.season_number,[]]))))]):(0,y.of)([])),(0,C.U)(h=>Object.fromEntries(h)),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState))}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0)}addToHistory(o,e){var i=this;return(0,M.Z)(function*(){if(!o)throw Error("Episode is empty (addToHistory)");try{yield i.executeService.addEpisode(o,e)}catch(s){(0,Q.q)(s,i.snackBar,i.seenLoading)}})()}static#t=this.\u0275fac=function(e){return new(e||Qt)(t.Y36(w.gz),t.Y36(z.X),t.Y36(q.U),t.Y36(K.n),t.Y36(B.ux),t.Y36(X.V),t.Y36(to.Yg),t.Y36(de.Dx),t.Y36(W),t.Y36(pe.t),t.Y36(st.X),t.Y36(at.e),t.Y36(oe.x))};static#e=this.\u0275cmp=t.Xpm({type:Qt,selectors:[["t-show"]],standalone:!0,features:[t.qOj,t.jDz],decls:23,vars:48,consts:[[1,"container",3,"loadingState"],[3,"isLoggedIn","tmdbSeason","showWatched","tmdbShow","show","nextEpisode","isFavorite","isSmall","isNewShow","isWatchlist","addFavorite","removeFavorite","addToWatchlist","removeFromWatchlist","addShow","showTrailer","showImage"],[3,"cast",4,"ngIf"],[3,"tmdbShow",4,"ngIf"],[3,"isLoggedIn","isLoading","nextEpisodeTrakt","nextEpisodeTmdb","nextEpisodeProgress","showProgress","isNewShow","tmdbShow","show","showWatched","seenLoading","addEpisode","removeEpisode",4,"ngIf"],[3,"show","showProgress","seasonsEpisodes","tmdbShow","back",4,"ngIf"],[3,"show","tmdbShow",4,"ngIf"],[3,"cast"],[3,"tmdbShow"],[3,"isLoggedIn","isLoading","nextEpisodeTrakt","nextEpisodeTmdb","nextEpisodeProgress","showProgress","isNewShow","tmdbShow","show","showWatched","seenLoading","addEpisode","removeEpisode"],[3,"show","showProgress","seasonsEpisodes","tmdbShow","back"],[3,"show","tmdbShow"]],template:function(e,i){if(1&e&&(t.TgZ(0,"t-loading",0)(1,"t-show-header",1),t.NdJ("addFavorite",function(a){return i.showService.addFavorite(a)})("removeFavorite",function(a){return i.showService.removeFavorite(a)})("addToWatchlist",function(a){return i.executeService.addToWatchlist(a)})("removeFromWatchlist",function(a){return i.executeService.removeFromWatchlist(a)})("addShow",function(a){return i.executeService.addShow(a)})("showTrailer",function(a){return i.dialogService.showTrailer(a)})("showImage",function(a){return i.dialogService.showImage(a.url,a.name)}),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.qZA(),t.YNc(12,eo,1,1,"t-show-cast",2),t.ALo(13,"async"),t.YNc(14,io,2,3,"t-show-details",3),t.ALo(15,"async"),t.YNc(16,no,14,37,"t-show-next-episode",4),t.ALo(17,"async"),t.YNc(18,oo,5,13,"t-show-seasons",5),t.ALo(19,"async"),t.ALo(20,"async"),t.YNc(21,so,3,6,"t-show-links",6),t.ALo(22,"async"),t.qZA()),2&e){let s,a,r,p,g,f;t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(2,16,i.authService.isLoggedIn$))("tmdbSeason",t.lcZ(3,18,i.tmdbSeason$))("showWatched",t.lcZ(4,20,i.showWatched$))("tmdbShow",t.lcZ(5,22,i.tmdbShow$))("show",t.lcZ(6,24,i.show$))("nextEpisode",null==(s=t.lcZ(7,26,i.nextEpisode$))?null:s[0])("isFavorite",t.lcZ(8,28,i.isFavorite$))("isSmall",t.lcZ(9,30,i.isSmall$))("isNewShow",void 0===t.lcZ(10,32,i.showProgress$))("isWatchlist",t.lcZ(11,34,i.isWatchlist$)),t.xp6(11),t.Q6J("ngIf",null==(a=t.lcZ(13,36,i.tmdbShow$))||null==a.aggregate_credits?null:a.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",null==(r=t.lcZ(15,38,i.tmdbShow$))||null==r.aggregate_credits?null:r.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",null==(p=t.lcZ(17,40,i.tmdbShow$))||null==p.aggregate_credits?null:p.aggregate_credits.cast),t.xp6(2),t.Q6J("ngIf",(null==(g=t.lcZ(19,42,i.tmdbShow$))||null==g.aggregate_credits?null:g.aggregate_credits.cast)&&t.lcZ(20,44,i.nextEpisode$)),t.xp6(3),t.Q6J("ngIf",null==(f=t.lcZ(22,46,i.tmdbShow$))||null==f.aggregate_credits?null:f.aggregate_credits.cast)}},dependencies:[d.O5,$.N,Mt,Pt,d.Ov,Ft,Nt,$t,Bt,Dt],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}@media (min-width: 576px){.container[_ngcontent-%COMP%]{gap:3rem}}"]})}const ao=P.z.object({show:P.z.string()});var G=c(7272);function co(n,o){1&n&&(t.TgZ(0,"h2",6),t._uU(1,"/"),t.qZA())}const ro=function(n){return{back:n}};function po(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"a",4),t._uU(2),t.qZA(),t.YNc(3,co,2,0,"h2",5),t.BQk()),2&n){const e=o.$implicit,i=o.index,s=t.oxw(2);t.xp6(1),t.Q6J("routerLink",e.link)("state",t.VKq(5,ro,s.back))("tickerIf",0===i),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",i!==s.parts.length-1)}}function ho(n,o){if(1&n&&(t.ynx(0),t.YNc(1,po,4,7,"ng-container",3),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.parts)}}function lo(n,o){1&n&&(t.TgZ(0,"span",7),t._uU(1,"\xa0"),t.qZA())}class _t{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||_t)};static#e=this.\u0275cmp=t.Xpm({type:_t,selectors:[["t-breadcrumb"]],inputs:{parts:"parts"},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[1,"breadcrumb-wrapper"],[4,"ngIf"],["class","mat-subtitle-1 part",4,"ngIf"],[4,"ngFor","ngForOf"],["ticker","",1,"mat-subtitle-1","part",3,"routerLink","state","tickerIf"],["class","mat-subtitle-1 divider",4,"ngIf"],[1,"mat-subtitle-1","divider"],[1,"mat-subtitle-1","part"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0),t.YNc(1,ho,2,1,"ng-container",1),t.YNc(2,lo,2,0,"span",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.parts),t.xp6(1),t.Q6J("ngIf",!i.parts))},dependencies:[d.O5,d.sg,w.Bz,w.rH,Ee.d],styles:[".breadcrumb-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;white-space:nowrap}.part[_ngcontent-%COMP%]{display:inline-block;margin:0}.divider[_ngcontent-%COMP%]{display:inline-block;margin:0 .5rem;cursor:default}"]})}function Ne(n,o,e){return Math.min(Math.max(n,o),e)}class Ht{transform(o,e,i){if(!o.season||!o.show||!i[0])return"";const s=parseInt(o.season);if(isNaN(s))throw Error("Season number not found (EpisodeLinkWithCounterPipe)");const r=Ne(s+e,i.at(0).number,i.at(-1).number);return(0,u.season)({show:o.show,season:r+""})}static#t=this.\u0275fac=function(e){return new(e||Ht)};static#e=this.\u0275pipe=t.Yjl({name:"seasonLinkWithCounter",type:Ht,pure:!0,standalone:!0})}const Ye=function(n,o){return{season:n,show:o}},Je=function(n){return{back:n}};class Rt{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||Rt)};static#e=this.\u0275cmp=t.Xpm({type:Rt,selectors:[["t-season-header"]],inputs:{breadcrumbParts:"breadcrumbParts",seasonNumber:"seasonNumber",showSlug:"showSlug",seasonProgress:"seasonProgress",seasons:"seasons"},standalone:!0,features:[t.jDz],decls:16,vars:29,consts:[[3,"parts"],[1,"title-wrapper"],[1,"left"],[1,"mat-headline-6","title"],[1,"right"],["mat-icon-button","","aria-label","Previous season","data-test-id","previous-button",3,"routerLink","state","disabled"],["mat-icon-button","","aria-label","Next season","data-test-id","next-button",3,"routerLink","state","disabled"],["mode","determinate","color","accent","aria-label","Season episodes watched percentage",1,"progress-bar",3,"value"]],template:function(e,i){if(1&e&&(t._UZ(0,"t-breadcrumb",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.ALo(5,"seasonTitle"),t.qZA()(),t.TgZ(6,"div",4)(7,"a",5),t.ALo(8,"seasonLinkWithCounter"),t.TgZ(9,"mat-icon"),t._uU(10,"navigate_before"),t.qZA()(),t.TgZ(11,"a",6),t.ALo(12,"seasonLinkWithCounter"),t.TgZ(13,"mat-icon"),t._uU(14,"navigate_next"),t.qZA()()()(),t._UZ(15,"mat-progress-bar",7)),2&e){let s;t.Q6J("parts",i.breadcrumbParts),t.xp6(4),t.hij(" ",t.lcZ(5,9,null!==(s=null==i.seasonProgress?null:i.seasonProgress.title)&&void 0!==s?s:"Season "+i.seasonNumber)," "),t.xp6(3),t.Q6J("routerLink",i.seasons?t.Dn7(8,11,t.WLB(19,Ye,i.seasonNumber,i.showSlug),-1,i.seasons):null)("state",t.VKq(22,Je,i.back))("disabled",!!i.seasons&&i.seasonNumber===i.seasons[0].number+""),t.xp6(4),t.Q6J("routerLink",i.seasons?t.Dn7(12,15,t.WLB(24,Ye,i.seasonNumber,i.showSlug),1,i.seasons):null)("state",t.VKq(27,Je,i.back))("disabled",!!i.seasons&&i.seasonNumber===i.seasons[i.seasons.length-1].number+""),t.xp6(4),t.Q6J("value",i.seasonProgress?i.seasonProgress.completed/i.seasonProgress.aired*100:0)}},dependencies:[_t,Z.ot,Z.o6,w.rH,ut,Ht,Yt.Cv,Yt.pW,J.Ps,J.Hw],styles:[".title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:0}.title-wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex}.progress-bar[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})}var he=c(6709);class Gt{transform(o){return new Date(o?.first_aired+"")}static#t=this.\u0275fac=function(e){return new(e||Gt)};static#e=this.\u0275pipe=t.Yjl({name:"airDate",type:Gt,pure:!0,standalone:!0})}class Ut{transform(o,e){return o?.title&&void 0!==o?.number?o.title+" ("+o.number+")":"Episode "+((o?.number??e)+1)}static#t=this.\u0275fac=function(e){return new(e||Ut)};static#e=this.\u0275pipe=t.Yjl({name:"episodeTitleWithIndex",type:Ut,pure:!0,standalone:!0})}function mo(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-checkbox",5),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onClick(s))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("checked",null==e.episodeProgress?null:e.episodeProgress.completed)}}function uo(n,o){if(1&n&&(t.TgZ(0,"h3",6),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.episode.first_aired,"d. MMM. yyyy")," ")}}class zt{constructor(){this.i=0,this.add=new t.vpe,this.remove=new t.vpe,this.currentDate=new Date}onClick(o){o.preventDefault(),o.stopPropagation(),this.checkbox?.checked?this.remove.emit(this.episode):this.add.emit(this.episode)}static#t=this.\u0275fac=function(e){return new(e||zt)};static#e=this.\u0275cmp=t.Xpm({type:zt,selectors:[["t-season-episode-item"]],viewQuery:function(e,i){if(1&e&&t.Gf(he.oG,5),2&e){let s;t.iGM(s=t.CRH())&&(i.checkbox=s.first)}},inputs:{isLoggedIn:"isLoggedIn",i:"i",episodeProgress:"episodeProgress",episode:"episode"},outputs:{add:"add",remove:"remove"},standalone:!0,features:[t.jDz],decls:8,vars:10,consts:[[1,"wrapper"],["class","checkbox",3,"checked","click",4,"ngIf"],[1,"right-wrapper"],[1,"mat-body-2","title"],["class","mat-body-2 subtitle",4,"ngIf"],[1,"checkbox",3,"checked","click"],[1,"mat-body-2","subtitle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,mo,1,1,"mat-checkbox",1),t.TgZ(2,"div",2),t.ALo(3,"airDate"),t.TgZ(4,"h3",3),t._uU(5),t.ALo(6,"episodeTitleWithIndex"),t.qZA(),t.YNc(7,uo,3,4,"h3",4),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isLoggedIn),t.xp6(1),t.ekj("not-aired",t.lcZ(3,5,i.episode)>i.currentDate),t.xp6(3),t.hij(" ",t.xi3(6,7,i.episode,i.i)," "),t.xp6(2),t.Q6J("ngIf",i.episode&&i.episode.first_aired))},dependencies:[he.p9,he.oG,d.O5,Gt,Ut,d.uU],styles:["[_nghost-%COMP%]{width:100%;height:100%}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.right-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}@media (min-width: 576px){.right-wrapper[_ngcontent-%COMP%]{gap:.5rem}}.title[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.subtitle[_ngcontent-%COMP%], .not-aired[_ngcontent-%COMP%]{color:var(--text-color-2)}"]})}class qt{transform(o,e){if(o&&e)return o.find(i=>i.number===e.number)}static#t=this.\u0275fac=function(e){return new(e||qt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeProgress",type:qt,pure:!0,standalone:!0})}function _o(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"t-season-episode-item",5),t.NdJ("add",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.addEpisode.emit({episode:s,show:a.show}))})("remove",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.removeEpisode.emit({episode:s,show:a.show}))}),t.ALo(1,"episodeProgress"),t.qZA()}if(2&n){const e=t.oxw(),i=e.index,s=e.$implicit,a=t.oxw(2);t.Q6J("i",i)("isLoggedIn",a.isLoggedIn)("episodeProgress",t.xi3(1,4,null==a.seasonProgress?null:a.seasonProgress.episodes,s))("episode",s)}}const go=function(n,o,e){return{show:n,season:o,episode:e}},fo=function(n){return{back:n}};function vo(n,o){if(1&n&&(t.TgZ(0,"a",3),t.ALo(1,"ngGenericPipe"),t.ALo(2,"showSlug"),t.TgZ(3,"mat-list-item"),t.YNc(4,_o,2,7,"t-season-episode-item",4),t.qZA()()),2&n){const e=o.index,i=t.oxw(2);t.Q6J("routerLink",t.xi3(1,3,t.kEZ(8,go,t.lcZ(2,6,i.show),i.seasonNumber,e+1+""),i.paths.episode))("state",t.VKq(12,fo,i.back)),t.xp6(4),t.Q6J("ngIf",i.show)}}function wo(n,o){if(1&n&&(t.TgZ(0,"mat-list"),t.YNc(1,vo,5,14,"a",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.episodes)}}class jt{constructor(){this.addEpisode=new t.vpe,this.removeEpisode=new t.vpe,this.episodesLoadingState=new O.X(m.Gu.LOADING),this.paths=u,this.back=history.state.back}ngOnChanges(){this.episodes&&this.episodesLoadingState.value===m.Gu.LOADING&&this.episodesLoadingState.next(m.Gu.SUCCESS)}static#t=this.\u0275fac=function(e){return new(e||jt)};static#e=this.\u0275cmp=t.Xpm({type:jt,selectors:[["t-season-episodes"]],inputs:{isLoggedIn:"isLoggedIn",show:"show",seasonNumber:"seasonNumber",seasonProgress:"seasonProgress",episodes:"episodes"},outputs:{addEpisode:"addEpisode",removeEpisode:"removeEpisode"},standalone:!0,features:[t.TTD,t.jDz],decls:2,vars:2,consts:[[3,"loadingState"],[4,"ngIf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state",4,"ngFor","ngForOf"],["matRipple","","tHideRippleOnScroll","",3,"routerLink","state"],[3,"i","isLoggedIn","episodeProgress","episode","add","remove",4,"ngIf"],[3,"i","isLoggedIn","episodeProgress","episode","add","remove"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,wo,2,1,"mat-list",1),t.qZA()),2&e&&(t.Q6J("loadingState",i.episodesLoadingState),t.xp6(1),t.Q6J("ngIf",i.episodes&&i.seasonNumber))},dependencies:[$.N,it.ie,it.i$,it.Tg,d.sg,b.si,b.wG,Pe.g,w.rH,ce.v,Y.r,Y.a,zt,d.O5,qt]})}function bo(n,o){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"t-season-header",2),t.ALo(2,"async"),t.ALo(3,"async"),t.TgZ(4,"t-season-episodes",3),t.NdJ("addEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.executeService.addEpisode(s.episode,s.show))})("removeEpisode",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.executeService.removeEpisode(s.episode,s.show))}),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.qZA(),t.BQk()}if(2&n){const e=o.ngIf,i=t.oxw();t.xp6(1),t.Q6J("breadcrumbParts",i.breadcrumbParts)("seasonProgress",t.lcZ(2,10,i.seasonProgress$))("seasonNumber",e.season)("showSlug",e.show)("seasons",t.lcZ(3,12,i.seasons$)),t.xp6(3),t.Q6J("isLoggedIn",t.lcZ(5,14,i.authService.isLoggedIn$))("episodes",t.lcZ(6,16,i.seasonEpisodes$))("show",t.lcZ(7,18,i.show$))("seasonNumber",e.season)("seasonProgress",t.lcZ(8,20,i.seasonProgress$))}}class Wt extends D.X{constructor(o,e,i,s,a,r,p,g){super(),this.route=o,this.snackBar=e,this.showService=i,this.seasonService=s,this.executeService=a,this.title=r,this.paramService=p,this.authService=g,this.pageState=new O.X(m.Gu.LOADING),this.paths=u,this.params$=this.paramService.params$(this.route.params,xo,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState),this.seasonProgress$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([f,l])=>(0,G.z)((0,y.of)(null),this.seasonService.getSeasonProgress$(l,parseInt(f.season)))),(0,Et.b)(()=>this.pageState.next(m.Gu.SUCCESS)),(0,k.J)("seasonProgress",this.snackBar,this.pageState)),this.seasons$=this.show$.pipe((0,I.w)(f=>(0,G.z)((0,y.of)(null),this.seasonService.fetchSeasons(f))),(0,k.J)("seasons",this.snackBar,this.pageState)),this.seasonEpisodes$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([f,l])=>(0,G.z)((0,y.of)(null),this.seasonService.getSeasonEpisodes$(l,parseInt(f.season)))),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState))}ngOnInit(){var o=this;(0,x.a)([this.params$,this.show$]).pipe((0,v.R)(this.destroy$)).subscribe(([e,i])=>{this.breadcrumbParts=[{name:i.title,link:u.show({show:e.show})},{name:mt(`Season ${e.season}`),link:u.season({show:e.show,season:e.season})}]}),(0,x.a)([this.seasons$,this.seasonProgress$]).pipe((0,v.R)(this.destroy$)).subscribe(([e,i])=>{if(!i)return;const s=e?.find(a=>a.number===i.number);this.seasonService.activeSeason$.next(s)}),(0,x.a)([this.params$,this.show$,this.seasonProgress$]).pipe((0,v.R)(this.destroy$)).subscribe(function(){var e=(0,M.Z)(function*([i,s,a]){yield ge(),o.title.setTitle(`${mt(a?.title??`Season ${i.season}`)}\n            - ${s.title}\n            - Trakify`)});return function(i){return e.apply(this,arguments)}}())}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0),this.seasonService.activeSeason$.next(void 0)}static#t=this.\u0275fac=function(e){return new(e||Wt)(t.Y36(w.gz),t.Y36(B.ux),t.Y36(z.X),t.Y36(pe.t),t.Y36(X.V),t.Y36(de.Dx),t.Y36(W),t.Y36(at.e))};static#e=this.\u0275cmp=t.Xpm({type:Wt,selectors:[["t-season"]],standalone:!0,features:[t.qOj,t.jDz],decls:3,vars:4,consts:[[3,"loadingState"],[4,"ngIf"],[3,"breadcrumbParts","seasonProgress","seasonNumber","showSlug","seasons"],[3,"isLoggedIn","episodes","show","seasonNumber","seasonProgress","addEpisode","removeEpisode"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,bo,9,22,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.params$)))},dependencies:[$.N,d.O5,Rt,jt,d.Ov],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"]})}const xo=P.z.object({show:P.z.string(),season:P.z.string()});function $e(n,o){if(!n)return"";const e=n?.title;return e||(o?`Episode ${o}`:"")}class Kt{transform(o,e){return $e(o,e)}static#t=this.\u0275fac=function(e){return new(e||Kt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeTitle",type:Kt,pure:!0,standalone:!0})}class Vt{transform(o,e,i){if(!o.episode||!o.season||!o.show)return"";const s=parseInt(o.episode);if(isNaN(s))throw Error("Episode number not found (EpisodeLinkWithCounterPipe)");const a=s+e,r=Ne(a,1,i??(Math.abs(a)||1));return(0,u.episode)({show:o.show,season:o.season,episode:r+""})}static#t=this.\u0275fac=function(e){return new(e||Vt)};static#e=this.\u0275pipe=t.Yjl({name:"episodeLinkWithCounter",type:Vt,pure:!0,standalone:!0})}function yo(n,o){if(1&n&&(t.TgZ(0,"h2",8),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,null==e.episode?null:e.episode.first_aired,"d. MMM. yyyy (E.)")," ")}}const Be=function(n,o,e){return{episode:n,season:o,show:e}},De=function(n){return{back:n}};class Xt{constructor(){this.back=history.state.back}static#t=this.\u0275fac=function(e){return new(e||Xt)};static#e=this.\u0275cmp=t.Xpm({type:Xt,selectors:[["t-episode-header"]],inputs:{breadcrumbParts:"breadcrumbParts",episode:"episode",tmdbEpisode:"tmdbEpisode",episodeProgress:"episodeProgress",episodeNumber:"episodeNumber",seasonNumber:"seasonNumber",showSlug:"showSlug",episodes:"episodes"},standalone:!0,features:[t.jDz],decls:16,vars:31,consts:[[3,"parts"],[1,"title-wrapper"],[1,"left"],[1,"mat-headline-5","title"],["class","mat-body-2 subtitle",4,"ngIf"],[1,"right"],["mat-icon-button","","aria-label","Previous episode","data-test-id","previous-button",3,"routerLink","state","disabled"],["mat-icon-button","","aria-label","Next episode","data-test-id","next-button",3,"routerLink","state","disabled"],[1,"mat-body-2","subtitle"]],template:function(e,i){1&e&&(t._UZ(0,"t-breadcrumb",0),t.TgZ(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.ALo(5,"episodeTitle"),t.qZA(),t.YNc(6,yo,3,4,"h2",4),t.qZA(),t.TgZ(7,"div",5)(8,"a",6),t.ALo(9,"episodeLinkWithCounter"),t.TgZ(10,"mat-icon"),t._uU(11,"navigate_before"),t.qZA()(),t.TgZ(12,"a",7),t.ALo(13,"episodeLinkWithCounter"),t.TgZ(14,"mat-icon"),t._uU(15,"navigate_next"),t.qZA()()()()),2&e&&(t.Q6J("parts",i.breadcrumbParts),t.xp6(4),t.hij(" ",t.xi3(5,9,i.episode,null==i.episodeProgress?null:i.episodeProgress.number)," "),t.xp6(2),t.Q6J("ngIf",null==i.episode?null:i.episode.first_aired),t.xp6(2),t.Q6J("routerLink",t.xi3(9,12,t.kEZ(19,Be,i.episodeNumber,i.seasonNumber,i.showSlug),-1))("state",t.VKq(23,De,i.back))("disabled","1"===i.episodeNumber),t.xp6(4),t.Q6J("routerLink",t.Dn7(13,15,t.kEZ(25,Be,i.episodeNumber,i.seasonNumber,i.showSlug),1,null==i.episodes?null:i.episodes.length))("state",t.VKq(29,De,i.back))("disabled",i.episodeNumber===(null==i.episodes?null:i.episodes.length)+""))},dependencies:[_t,Kt,d.uU,d.O5,Z.ot,Z.o6,w.rH,Vt,J.Ps,J.Hw],styles:[".title-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:.25rem}@media (min-width: 576px){.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:.5rem}}.title-wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--text-color-2);margin:0}.title-wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex}"]})}function So(n,o){if(1&n&&(t._UZ(0,"t-episode-header",3),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&n){const e=o.ngIf,i=t.oxw();t.Q6J("breadcrumbParts",i.breadcrumbParts)("episode",t.lcZ(1,8,i.episode$))("tmdbEpisode",t.lcZ(2,10,i.tmdbEpisode$))("episodeProgress",t.lcZ(3,12,i.episodeProgress$))("episodeNumber",e.episode)("seasonNumber",e.season)("showSlug",e.show)("episodes",t.lcZ(4,14,i.seasonEpisodes$))}}class te extends D.X{constructor(o,e,i,s,a,r,p,g,f,l,T){super(),this.route=o,this.tmdbService=e,this.snackBar=i,this.showService=s,this.episodeService=a,this.executeService=r,this.seasonService=p,this.title=g,this.paramService=f,this.authService=l,this.dialogService=T,this.pageState=new O.X(m.Gu.LOADING),this.episodeState=new O.X(m.Gu.LOADING),this.seenState=new O.X(m.Gu.SUCCESS),this.state=m.Gu,this.params$=this.paramService.params$(this.route.params,Co,this.pageState),this.show$=this.showService.show$(this.params$,this.pageState),this.seasonEpisodes$=(0,x.a)([this.params$,this.show$]).pipe((0,Fe.x)((S,N)=>S[0].season===N[0].season),(0,I.w)(([S,N])=>(0,G.z)((0,y.of)(null),this.seasonService.getSeasonEpisodes$(N,parseInt(S.season),!1,!1))),(0,k.J)("seasonEpisodes",this.snackBar,this.pageState)),this.showProgress$=this.show$.pipe((0,I.w)(S=>(0,G.z)((0,y.of)(null),this.showService.getShowProgress$(S))),(0,k.J)("showProgress",this.snackBar,this.pageState)),this.episodeProgress$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([S,N])=>(0,G.z)((0,y.of)(null),this.episodeService.getEpisodeProgress$(N,parseInt(S.season),parseInt(S.episode)))),(0,k.J)("episodeProgress",this.snackBar,this.pageState)),this.episode$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([S,N])=>(0,G.z)((0,y.of)(null),this.episodeService.getEpisode$(N,parseInt(S.season),parseInt(S.episode),{fetchAlways:!0}))),(0,Et.b)(S=>S&&this.episodeState.next(m.Gu.SUCCESS)),(0,k.J)("episode",this.snackBar,this.pageState)),this.tmdbEpisode$=(0,x.a)([this.params$,this.show$]).pipe((0,I.w)(([S,N])=>(0,G.z)((0,y.of)(null),this.tmdbService.getTmdbEpisode$(N,parseInt(S.season),parseInt(S.episode),{fetchAlways:!0}))),(0,Et.b)(()=>this.episodeState.next(m.Gu.SUCCESS)),(0,k.J)("tmdbEpisode",this.snackBar,this.pageState))}ngOnInit(){(0,x.a)([this.episode$,this.episodeProgress$,this.show$,this.params$]).pipe((0,v.R)(this.destroy$)).subscribe(([o,e,i,s])=>{this.title.setTitle(`${$e(o,e?.number)}\n            - ${i.title}\n            - ${mt(`Season ${s.season}`)}\n            - Trakify`)}),(0,x.a)([this.params$,this.show$]).pipe((0,v.R)(this.destroy$)).subscribe(([o,e])=>{this.pageState.next(m.Gu.SUCCESS),this.breadcrumbParts=[{name:e.title,link:u.show({show:o.show})},{name:mt(`Season ${o.season}`),link:u.season({show:o.show,season:o.season})},{name:`Episode ${o.episode}`,link:u.episode({show:o.show,season:o.season,episode:o.episode})}]})}ngOnDestroy(){super.ngOnDestroy(),this.showService.activeShow$.next(void 0)}static#t=this.\u0275fac=function(e){return new(e||te)(t.Y36(w.gz),t.Y36(q.U),t.Y36(B.ux),t.Y36(z.X),t.Y36(K.n),t.Y36(X.V),t.Y36(pe.t),t.Y36(de.Dx),t.Y36(W),t.Y36(at.e),t.Y36(oe.x))};static#e=this.\u0275cmp=t.Xpm({type:te,selectors:[["t-episode-page"]],standalone:!0,features:[t.qOj,t.jDz],decls:12,vars:26,consts:[[3,"loadingState"],[3,"breadcrumbParts","episode","tmdbEpisode","episodeProgress","episodeNumber","seasonNumber","showSlug","episodes",4,"ngIf"],[3,"isLoggedIn","show","episode","episodeProgress","isNewShow","tmdbEpisode","isSeenLoading","addEpisode","removeEpisode","showImage"],[3,"breadcrumbParts","episode","tmdbEpisode","episodeProgress","episodeNumber","seasonNumber","showSlug","episodes"]],template:function(e,i){1&e&&(t.TgZ(0,"t-loading",0),t.YNc(1,So,5,16,"t-episode-header",1),t.ALo(2,"async"),t.TgZ(3,"t-loading",0)(4,"t-episode",2),t.NdJ("addEpisode",function(a){return i.executeService.addEpisode(a.episode,a.show,i.seenState)})("removeEpisode",function(a){return i.executeService.removeEpisode(a.episode,a.show,i.seenState)})("showImage",function(a){return i.dialogService.showImage(a.url,a.name)}),t.ALo(5,"async"),t.ALo(6,"async"),t.ALo(7,"async"),t.ALo(8,"async"),t.ALo(9,"async"),t.ALo(10,"async"),t.ALo(11,"async"),t.qZA()()()),2&e&&(t.Q6J("loadingState",i.pageState),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,10,i.params$)),t.xp6(2),t.Q6J("loadingState",i.episodeState),t.xp6(1),t.Q6J("isLoggedIn",t.lcZ(5,12,i.authService.isLoggedIn$))("show",t.lcZ(6,14,i.show$))("episode",t.lcZ(7,16,i.episode$))("episodeProgress",t.lcZ(8,18,i.episodeProgress$))("isNewShow",void 0===t.lcZ(9,20,i.showProgress$))("tmdbEpisode",t.lcZ(10,22,i.tmdbEpisode$))("isSeenLoading",t.lcZ(11,24,i.seenState)===i.state.LOADING))},dependencies:[$.N,Xt,d.O5,d.Ov,lt],styles:["[_nghost-%COMP%]{display:block;max-width:55rem;margin:0 auto;padding:1rem}"]})}const Co=P.z.object({show:P.z.string(),season:P.z.string(),episode:P.z.string()});class gt{constructor(o){this.infoService=o}resolve(){return this.infoService.getShowsFilteredAndSorted$()}static#t=this.\u0275fac=function(e){return new(e||gt)(t.LFG(V))};static#e=this.\u0275prov=t.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"})}var U=c(923),ee=c(9914);function le(){return(le=(0,M.Z)(function*(){return!localStorage.getItem("access_token")||(yield(0,t.f3M)(w.F0).navigateByUrl(u.showsProgress({})),!1)})).apply(this,arguments)}const ko=[{path:"",component:pt,canActivate:[function Io(){return le.apply(this,arguments)}],title:"Shows - Trakify"},{path:(0,U.E)(u.showsProgress.pattern,u.shows.pattern),component:wt,title:"Shows - Trakify",canActivate:[ee.P],resolve:{showInfos:gt}},{path:(0,U.E)(u.addShow.pattern,u.shows.pattern),component:pt,title:"Add Show - Trakify"},{path:(0,U.E)(u.show.pattern,u.shows.pattern),component:Qt,title:"Show - Trakify"},{path:(0,U.E)(u.season.pattern,u.shows.pattern),component:Wt,title:"Season - Trakify"},{path:(0,U.E)(u.episode.pattern,u.shows.pattern),component:te,title:"Episode - Trakify"},{path:(0,U.E)(u.search.pattern,u.shows.pattern),component:It,canActivate:[ee.P],title:"Search - Trakify"},{path:(0,U.E)(u.upcoming.pattern,u.shows.pattern),component:kt,canActivate:[ee.P],title:"Upcoming - Trakify"},{path:(0,U.E)(u.watchlist.pattern,u.shows.pattern),component:Tt,canActivate:[ee.P],title:"Watchlist - Trakify"}]}}]);