<mat-list *ngIf="episodes && seasonNumber; else progressFallback">
  <a
    *ngFor="let episode of episodes; let i = index"
    matRipple
    tHideRippleOnScroll
    [routerLink]="
      { show: showSlug(), season: seasonNumber, episode: i + 1 + '' } | ngGenericPipe: Paths.episode
    "
    [state]="{ back }"
  >
    <mat-list-item>
      <t-season-episode-item
        *ngIf="show()"
        [i]="i"
        [isLoggedIn]="isLoggedIn"
        [seasonProgress]="seasonProgress"
        [episode]="episode"
        (add)="addEpisode.emit({ episode: $event, show: show()! })"
        (remove)="removeEpisode.emit({ episode: $event, show: show()! })"
      />
    </mat-list-item>
  </a>
</mat-list>

<ng-template #progressFallback>
  <mat-list *ngIf="seasonProgress()?.episodes && seasonNumber">
    <a
      *ngFor="let episodeProgress of seasonProgress()!.episodes; let i = index"
      matRipple
      tHideRippleOnScroll
      [routerLink]="
        { show: showSlug(), season: seasonNumber, episode: i + 1 + '' }
          | ngGenericPipe: Paths.episode
      "
      [state]="{ back }"
    >
      <mat-list-item>
        <t-season-episode-item
          *ngIf="show"
          [i]="i"
          [isLoggedIn]="isLoggedIn"
          [seasonProgress]="seasonProgress"
          (add)="addEpisode.emit({ episode: $event, show: show()! })"
          (remove)="removeEpisode.emit({ episode: $event, show: show()! })"
        />
      </mat-list-item>
    </a>
  </mat-list>
</ng-template>
