@if (showErrorTemplate() ? loadingState() !== state.ERROR : true) {
  @if (isLoadingDelayed() === false || !showLoading()) {
    <ng-content />
  } @else {
    <ng-container *ngTemplateOutlet="customLoading() ?? loading" />
  }
} @else {
  <ng-container *ngTemplateOutlet="customError() ?? error" />
}

<ng-template #loading>
  <div class="loading-wrapper">
    <mat-spinner [diameter]="32" color="accent" />
  </div>
</ng-template>
<ng-template #error>
  <p class="mat-body">An error occurred.</p>
</ng-template>
